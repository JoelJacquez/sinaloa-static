/*! Ustream Multi-Target-Embed @ 2016-08-04 06:46 PDT */
!function(a,b,c,d,e,f,g,h,i,j){var k,l,m,n=["vendor/almond","logic/module/stream","logic/module/meta","logic/module/logo","logic/module/broadcaster","logic/module/viewer","logic/module/thumbnail","lib/replace","vendor/env","logic/lock/agelock","lib/objectcopy","lib/polyfill/object/keys","lib/polyfill/array/map","lib/log","lib/polyfill/array/filter","lib/polyfill/array/reduce","lib/storage","data/content","lib/merge","lib/event/notifier","lib/event","lib/emit","lib/cookie","lib/bind","ui/screen/agelock","data/ui","data/params","lib/debug","data/referrer","lib/dom/getElementById","lib/dom/createElement","lib/dom/appendChild","lib/dom/addEventListener","lib/dom/removeEventListener","lib/getHostName","data/htmlmode","logic/lock/default","logic/lock/geolock","ui/screen/geolock","logic/lock/iplock","ui/screen/iplock","logic/lock/hashlock","ui/screen/unauthorized","ui/screen/hashlockadvanced","lib/openWindow","logic/lock/passwordlock","ui/screen/passwordlock","logic/lock/referrerlock","lib/i18n","ui/screen/referrerlock","ui/screen/redirect","lib/largePlayButton","logic/lock/cluster","logic/lock/nonexistent","ui/screen/nonexistent","logic/lock/sessionauthlock","logic/lock/reject","ui/screen/reject","ui/screen/ban","logic/lock/viewerhourlimitlock","ui/screen/viewerhourlimitlock","viewer/html","data/logic","lib/dom/getElementsByTagName","lib/checkEmbedRedirect","lib/loading","lib/layers","logic/advert/advert","lib/cdngw","vendor/jsonp","lib/loader","logic/advert/ruleset","logic/advert/provider/adaptv","lib/getEmbedSize","logic/streamstat","ustream-ums","logic/api","logic/getstream","lib/xhr","logic/hashlock","ui/screen","vendor/jquery","ui/ui","ui/components","ui/lib/treeTraversal","ui/config","ui/lib/componentFactory","lib/template","ui/lib/componentPositioner","ui/screenHandler","ui/screen/offline","ui/screen/getflash","ui/playbackHandler","ui/uiInterface","logic/ads/adEvents","ui/event/playerEvent","ui/components/contextMenu","ui/lib/copySwf","ui/brand","logic/videotag","lib/purge","lib/dom/removeChild","logic/mediaevents","lib/track","logic/seekreporter","logic/offaircontent/offaircontent","logic/offaircontent/videos","viewer/swf","lib/popup","data/qos","lib/flashjsapi","data/wmode","viewer/htmlplayback","data/datamanager","logic/event/facade","logic/htmlApiProxy","logic/ads/ads","logic/ads/providers/adaptv","logic/ads/adConstants","logic/ads/adParams","logic/ads/ruleset/handler","logic/ads/providers/adaptvDesktop","logic/ads/providers/delay","logic/ads/providers/googleIMA","logic/ads/utils/adHolderCleanup","logic/ads/providers/liveRail","logic/ads/utils/adResponseReporter","logic/logsender","logic/stats/reporter","logic/stats/collector","logic/stats/aggregator","logic/offairContentHandler","playback/playbackhandler","atlas","playback/streamparser","lib/polyfill/array/foreach","playback/stream/streamshim","lib/nativeType","playback/stream/shim/legacy","playback/stream/formats","playback/stream/shim/util","playback/stream/shim/properties","playback/stream/shim/mp4segmented","playback/stream/shim/flvsegmented","playback/stream/shim/hls","playback/stream/shim/simple","playback/streams","playback/providers","playback/ecdn/handler","playback/tcdnurlresolver","playback/ecdn/selector","playback/ecdn/locationhistory","playback/ecdn/pingqueue","playback/ecdn/speedtest","playback/qos","data/application","playback/representation","logic/embed","vendor/json2","viewer","ui/screen/unavailable","ui/screen/hashlocksimple","ui/components/adHolder","ui/components/container","ui/components/fullscreen","ui/components/play","ui/components/playScreen","ui/components/messageScreen","ui/components/quality","ui/lib/popover","ui/components/seekbar","ui/components/volume","ui/components/badge","ui/components/logo","ui/components/share","ui/lib/overlay","ui/components/title","ui/components/cc","ui/components/customlogo","ui/components/slideshow","ui/components/statusAnimation","ui/components/theater","ui/components/thumbnail","ui/components/popout","ui/components/premium","ui/components/flag","ui/components/statsOverlay","ui/components/audioOnly","viewer/qrsl"];!function(a){function b(a,b){return v.call(a,b)}function c(a,b){var c,d,e,f,g,h,i,j,k,l,m=b&&b.split("/"),n=t.map,o=n&&n["*"]||{};if(a&&"."===a.charAt(0))if(b){for(m=m.slice(0,m.length-1),a=m.concat(a.split("/")),j=0;j<a.length;j+=1)if(l=a[j],"."===l)a.splice(j,1),j-=1;else if(".."===l){if(1===j&&(".."===a[2]||".."===a[0]))break;j>0&&(a.splice(j-1,2),j-=2)}a=a.join("/")}else 0===a.indexOf("./")&&(a=a.substring(2));if((m||o)&&n){for(c=a.split("/"),j=c.length;j>0;j-=1){if(d=c.slice(0,j).join("/"),m)for(k=m.length;k>0;k-=1)if(e=n[m.slice(0,k).join("/")],e&&(e=e[d])){f=e,g=j;break}if(f)break;!h&&o&&o[d]&&(h=o[d],i=j)}!f&&h&&(f=h,g=i),f&&(c.splice(0,g,f),a=c.join("/"))}return a}function d(b,c){return function(){return o.apply(a,w.call(arguments,0).concat([b,c]))}}function f(a){return function(b){return c(b,a)}}function g(a){return function(b){r[a]=b}}function h(c){if(b(s,c)){var d=s[c];delete s[c],u[c]=!0,n.apply(a,d)}if(!b(r,c)&&!b(u,c))throw new Error("No "+c);return r[c]}function i(a){var b,c=a?a.indexOf("!"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function j(a){return function(){return t&&t.config&&t.config[a]||{}}}var n,o,p,q,r={},s={},t={},u={},v=Object.prototype.hasOwnProperty,w=[].slice;p=function(a,b){var d,e=i(a),g=e[0];return a=e[1],g&&(g=c(g,b),d=h(g)),g?a=d&&d.normalize?d.normalize(a,f(b)):c(a,b):(a=c(a,b),e=i(a),g=e[0],a=e[1],g&&(d=h(g))),{f:g?g+"!"+a:a,n:a,pr:g,p:d}},q={require:function(a){return d(a)},exports:function(a){var b=r[a];return"undefined"!=typeof b?b:r[a]={}},module:function(a){return{id:a,uri:"",exports:r[a],config:j(a)}}},n=function(c,e,f,i){var j,k,l,m,n,o,t=[];if(i=i||c,"function"==typeof f){for(e=!e.length&&f.length?["require","exports","module"]:e,n=0;n<e.length;n+=1)if(m=p(e[n],i),k=m.f,"require"===k)t[n]=q.require(c);else if("exports"===k)t[n]=q.exports(c),o=!0;else if("module"===k)j=t[n]=q.module(c);else if(b(r,k)||b(s,k)||b(u,k))t[n]=h(k);else{if(!m.p)throw new Error(c+" missing "+k);m.p.load(m.n,d(i,!0),g(k),{}),t[n]=r[k]}l=f.apply(r[c],t),c&&(j&&j.exports!==a&&j.exports!==r[c]?r[c]=j.exports:l===a&&o||(r[c]=l))}else c&&(r[c]=f)},k=l=o=function(b,c,d,f,g){return"string"==typeof b?q[b]?q[b](c):h(p(b,c).f):(b.splice||(t=b,c.splice?(b=c,c=d,d=null):b=a),c=c||function(){},"function"==typeof d&&(d=f,f=g),f?n(a,b,c,d):e(function(){n(a,b,c,d)},4),o)},o.config=function(a){return t=a,t.deps&&o(t.deps,t.callback),o},k._defined=r,m=function(a,c,d){c.splice||(d=c,c=[]),b(r,a)||b(s,a)||(s[a]=[a,c,d])},m.amd={jQuery:!0}}(),m(n[0],function(){}),m(n[1],[],function(){function a(a){var b=[];return"offline"!=a&&a.length>0&&a.map(function(a){a&&a.name&&"uhls"===a.name&&b.push(a.url)}),b}function b(a){var b=[];return a.length!==c&&a.length>0&&a.map(function(a){if(a.hasOwnProperty("streams")){var c=a.streams;c&&c.length>0&&c.map(function(a){a.mimetype&&"video/mp4"===a.mimetype&&b.push(a.streamName)})}else a.hasOwnProperty("url")&&b.push(a.url)}),b}var c="undefined",d="stream";return function(c,e,f){var g,h={};return h.type=d,g=f.indexOf("channel")>-1?a(c):b(c),h.stream=g,h}}),m(n[2],[],function(){var a="meta";return function(b){return b.type=a,b}}),m(n[3],[],function(){var a="logo";return function(b){var c={};return c.type=a,c.data=b,c}}),m(n[4],[],function(){var a="broadcaster";return function(b){return b.type=a,b}}),m(n[5],[],function(){var a=n[159],b={viewers:0,allViewers:0,allTimeTotal:0};return function(c,d){return b[d]=c,b.type=a,b}}),m(n[7],[],function(){return function(a,b,c){return c||(c=""),a.replace(b,c)}}),m(n[8],[],function(){function b(){return typeof c.getElementById!==z&&typeof c.getElementsByTagName!==z&&typeof c.createElement!==z}function e(){return I?/win/.test(I):/win/.test(H)}function f(){return I?/mac/.test(I):/mac/.test(H)}function g(){return!(h()||i()||j()||k())}function h(){var a=/android/i.test(H);return a&&(a=H.match(/android (\d*)\.(\d*)?\.?(\d*)/i),a.shift()),a}function i(){var a=/iphone|ipad|ipod/.test(H);return a&&(a=H.match(/os (\d*)?\_?(\d*)?\_?(\d*)/i),a.shift()),a}function j(){return/BB10(.*)Mobile/i.test(H)}function k(){return H.indexOf("playstation")>-1}function l(){var a=/chrome/i.test(H);return a&&(a=H.match(/chrome\/(\d*)\.(\d*)?\.?(\d*)/i),a.shift()),a}function m(){return"undefined"!=typeof opera&&"[object Opera]"===opera.toString()}function n(){return/firefox/.test(H)}function o(){var a=c.getElementsByTagName("html")[0],b=a.className.indexOf("ie ")>-1;return b||(b=H.indexOf("trident")>-1),b}function p(){return/safari/.test(H)&&!l()}function q(){return/https/.test(J.protocol)}function r(){return!!/webkit/.test(H)&&parseFloat(H.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1"))}function s(a){var b,c;return b=H.match(/trident\/(\d)/i),c=H.match(/compatible/i),c=!!c&&c.length>0,a&&!c&&b&&b[1]&&"7"===b[1]}function t(b){var c=typeof a.WebSocket;return c=c===A||c===B,c&&typeof a.WebSocket.prototype.CLOSING===z&&(c=!1),b&&!c&&(b[0]>4||4===b[0]&&b[1]>2)&&(c=!0),c}function u(){var a="a";try{return localStorage.setItem(a,a),localStorage.removeItem(a),!0}catch(b){return!1}}function v(){var a=!1;try{a=c.createElement("input").hasOwnProperty("placeholder")}catch(b){a=!1}return a}function w(){var a,b=G&&G[E]&&G[E].enabledPlugin&&G[E].enabledPlugin.filename||"";return b=b.toLowerCase(),a="pepflashplayer.dll"===b||"libpepflashplayer.so"===b||"pepperflashplayer.plugin"===b||"chrome.plugin"===b.slice(-13)}function x(){var b,c;if(typeof a.ActiveXObject===z)return!1;try{if(b=new a.ActiveXObject(D))return c=b.GetVariable("$version"),!c||(c=c.split(" ")[1].split(","),[parseInt(c[0],10),parseInt(c[1],10),parseInt(c[2],10)])}catch(d){}return!1}function y(){var a,b=[0,0,0];return typeof F.plugins!==z&&typeof F.plugins[C]===B?(a=F.plugins[C].description,!a||typeof G!==z&&G[E]&&!G[E].enabledPlugin||(a=a.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),b[0]=+a.replace(/^(.*)\..*$/,"$1"),b[1]=+a.replace(/^.*\.(.*)\s.*$/,"$1"),b[2]=/[a-zA-Z]/.test(a)?+a.replace(/^.*[a-zA-Z]+(.*)$/,"$1"):0)):x()&&(b=x()),"000"===b.join("")&&(b=!1),b}var z="undefined",A="function",B="object",C="Shockwave Flash",D="ShockwaveFlash.ShockwaveFlash",E="application/x-shockwave-flash",F=d,G=F.mimeTypes,H=F.userAgent.toLowerCase(),I=F.platform.toLowerCase(),J=a.location;return function(){var a=i(),c=o();return{w3:b(),win:e(),mac:f(),desktop:g(),ios:a,android:h(),blackberry:j(),playstation:k(),chrome:l(),opera:m(),ff:n(),safari:p(),ie:c,ssl:q(),wk:r(),edgeIe:s(c),ws:t(a),storage:u(),placeholder:v(),adblock:!1,swf:y(),flashPPAPI:w(),flashActiveX:x(),nav:{appCodeName:F.appCodeName,appName:F.appName,appVersion:F.appVersion,cpuClass:F.cpuClass,platform:F.platform,product:F.product,userAgent:F.userAgent,vendor:F.vendor,vendorSub:F.vendorSub}}}()}),m(n[6],[n[7],n[8]],function(a,b){var c="thumbnail";return function(d){var e="";return d.type=c,e=b.ssl?d.liveThumbnailSecureUrl||d.channelPictureSecureUrl||d.thumbnailSecureUrl||"":d.liveThumbnailUrl||d.channelPictureUrl||d.thumbnailUrl||"",d.liveThumbnail=a(e,"#SIZE#","640x360"),d}}),m(n[11],[],function(){var a=Object.prototype.hasOwnProperty,b=!{toString:null}.propertyIsEnumerable("toString"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=c.length,e=function(e){if("object"!=typeof e&&("function"!=typeof e||null===e))throw new TypeError("Object.keys called on non-object");var f,g,h=[];for(f in e)a.call(e,f)&&h.push(f);if(b)for(g=0;g<d;g++)a.call(e,c[g])&&h.push(c[g]);return h},f=Object.keys||e;return function(a){return f.call(null,a)}}),m(n[12],[],function(){var a=function(a,b){var c,d,e;if(null==this)throw new TypeError(" this is null or not defined");var f=Object(this),g=f.length>>>0;if("function"!=typeof a)throw new TypeError(a+" is not a function");for(arguments.length>1&&(c=b),d=new Array(g),e=0;e<g;){var h,i;e in f&&(h=f[e],i=a.call(c,h,e,f),d[e]=i),e++}return d},b=Array.prototype.map||a;return function(a,c,d){return b.call(a,c,d)}}),m(n[10],[n[11],n[12]],function(a,b){return function(c,d){var e=a(c);b(e,function(a){d[a]=c[a]})}}),m(n[14],[],function(){var a=function(a,b){"use strict";if(void 0===this||null===this)throw new TypeError;var c=Object(this),d=c.length>>>0;if("function"!=typeof a)throw new TypeError;for(var e=[],b=arguments.length>=2?arguments[1]:void 0,f=0;f<d;f++)if(f in c){var g=c[f];a.call(b,g,f,c)&&e.push(g)}return e},b=Array.prototype.filter||a;return function(a,c,d){return b.call(a,c,d)}}),m(n[15],[],function(){var a=function(a){"use strict";if(null==this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof a)throw new TypeError(a+" is not a function");var b,c=Object(this),d=c.length>>>0,e=0;if(2==arguments.length)b=arguments[1];else{for(;e<d&&!e in c;)e++;if(e>=d)throw new TypeError("Reduce of empty array with no initial value");b=c[e++]}for(;e<d;e++)e in c&&(b=a(b,c[e],e,c));return b},b=Array.prototype.reduce||a;return function(a,c,d){return b.call(a,c,d)}}),m(n[13],[n[12],n[14],n[15]],function(a,b,c){function d(){var b,c,d,e=k.log,f=k.graphs,g=e.length;a(e,l);for(c in f)for(d=f[c],g=d.length,b=0;b<g;b++)l(c,d[b])}function e(){for(var a=+new j,b=a-h,c=k.log,d=0;c[d][0]<b;)c[d][4]?d++:c.splice(d,1)}function f(a,b,c,d,f){var g=[+new j,a,b,JSON.stringify(c),d,f];f||k.log.push(g),e(),l&&l(g)}function g(a,b){"undefined"==typeof k.graphs[a]&&(k.graphs[a]=[],k.graphs[a].last=0);var d,e=!1,f=[],g=+new j,h=i.floor(g/500%2),m=1e3*i.floor(g/1e3)+500*h;0===k.graphs[a].last&&(k.graphs[a].last=m),"undefined"==typeof k.graphs[a].buffer&&(k.graphs[a].buffer=[b]),k.graphs[a].last<m?(e=!0,d=c(k.graphs[a].buffer,function(a,b){return a+b},0),f=[k.graphs[a].last,d/k.graphs[a].buffer.length],k.graphs[a].buffer=[b],k.graphs[a].last=m):k.graphs[a].buffer.push(b),e&&(k.graphs[a].push(f),l&&l(a,f))}var h=18e5,k={log:[],graphs:{}},l=null;return function(){var a,b;return 0===arguments.length?k.log:"function"==typeof arguments[0]?(l=arguments[0],void d()):arguments[0]instanceof Array?void f.apply(null,arguments[0]):(a=arguments[0],b=function(){var b=Array.prototype.slice.call(arguments,0);b.unshift(a),f.apply(null,b)},b.graph=g,b)}}),m(n[18],[],function(){function a(){for(var b={},c=0;c<arguments.length;c++)for(var d in arguments[c]){var e=arguments[c][d],f=b[d];f&&"object"==typeof e&&"object"==typeof f?b[d]=a(f,e):b[d]=e}return b}return a}),m(n[20],[],function(){function a(a,b){var c,d=a.length;for(c=0;c<d&&a[c]!=b;c++);return a.splice(c,1),a}var b="undefined";return{emit:function(a,c,d,e){if(e=e?e:"def",a&&a[c]){var f=[];if("def"===e)for(var g in a[c])f=f.concat(a[c][g]);else f=a[c][e];var g,h,i=f.length;for(g=0;g<i;g++)h=f[g],typeof d!==b?h.call(null,d):h.call(null)}},on:function(a,b,c,d){d=d?d:"def",a[b]||(a[b]={},a[b].def=[]),a[b][d]||(a[b][d]=[]),a[b][d].push(c)},off:function(b,c,d,e){if(c&&d&&e)b[c][e]=a(b[c][e],d);else if(c&&d&&!e)for(var f in b[c])b[c][f]=a(b[c][f],d);else if(!c||d||e){if(c&&!d&&e)b[c][e]=[];else if(!c&&!d&&e)for(var g in b)b[g][e]=[]}else b[c]={def:[]}}}}),m(n[21],[],function(){var a="undefined";return function(b,c,d){var d=Array.prototype.slice.call(arguments,2);if(b&&b[c]&&b[c].length>0){var e,f,g=b[c].length;for(e=0;e<g;e++)f=b[c][e],typeof d!==a?f.apply(null,d):f.call(null)}}}),m(n[19],[n[13],n[20],n[21]],function(a,b,c){function d(a,b){return a+"."+b}var e=a(n[19]),f={},g={COMMAND:"command",EVENT:"event",UI:"ui",SCREEN:"screen",REPORT:"report"},h={REPRESENTATION_UPDATE:"representationUpdate"};return{types:g,events:h,send:function(a,b,g){var h=d(a,b);"progress"!==b&&e(a,b,g),c(f,h,g),c(f,a+".*",b,g)},on:function(a,b,c){var e=d(a,b);f[e]||(f[e]=[]),f[e].push(c)}}}),m(n[17],[n[13],n[18],n[19]],function(c,d,e){function f(a){H="",E=a}function g(a){F=a,H="",e.send(e.types.EVENT,"contentPlaying",F)}function h(a){I=a,r=a?"video":""}function i(a){s=d(s,a)}function j(a){H="image"===a.itemType?"image":""}function k(){G||(G=!0)}function l(){H="video"}function m(){H=""}var o,p,q,r,s,t=ustream.vars,u="channel",v="embed",w="recorded",x="video",y="highlight",z=c(n[17]),A=b.pathname,B=A.indexOf(w)>0,C=!B&&A.indexOf("embed")>0,D=A.indexOf(y)>0,E=!1,F=!1,G=!1,H="",I=!1;if(A.indexOf("/embed/")<0&&t.player)switch(p=[t.player.contentId],t.player.contentType===y&&p.unshift(t.player.videoId),t.player.contentType){case u:C=!0;break;case x:B=!0;break;case y:B=!0,D=!0}else p=A.match(/(\d+\d*)/gi);return q=+p[0],o=C?u:w,e.on(e.types.EVENT,"live",f),e.on(e.types.EVENT,"playing",g),e.on(e.types.EVENT,"videoAdPlaying",h),e.on(e.types.EVENT,"meta",i),e.on(e.types.EVENT,"currentOffairSlide",j),e.on(e.types.EVENT,"prerollDone",k),e.on(e.types.EVENT,"createOffairVideo",l),e.on(e.types.EVENT,"destroyOffairVideo",m),function(){return{isContentPlayable:function(){return""===H&&G&&(I===!1||I===!0&&"video"!==r)},playing:function(){return F},isPrerollDone:function(){return G},live:function(){return E},meta:function(){return s},offairType:function(){return H},id:function(){return q},app:function(){return o},ids:function(){return p},isCid:function(){return C},getType:function(){return C?u:D?y:w},isVid:function(){return B},isHid:function(){return D},getMid:function(){return[this.app()].concat(p).join(".")},getUrl:function(b,c){var d="/",e=""+a.location.protocol+d+d+a.location.host+d;return c?e+=v+d:C&&(e+=u+d),B&&(e+=w+d),e+=p[0],D&&(e+=d+y+d+p[1]),b&&(e+=d+"pop-out"),e},update:function(a,b){z("update ",a,b),b instanceof Array.prototype.constructor||(b=[b]),p=b,a===u?(C=!0,q=b[0],o=u,B=!1,D=!1):a===x||a===w?(B=!0,q=b[0],o=w,C=!1,D=!1):a===y&&(B=!0,D=!0,q=b[0],o=w,C=!1),e.send(e.types.EVENT,"contentUpdate")}}}()}),m(n[22],[],function(){function a(a){var b,c="";return a.expires&&("number"==typeof a.expires||a.expires.toUTCString)&&("number"==typeof a.expires?(b=new j,b.setTime(b.getTime()+24*a.expires*60*60*1e3)):b=a.expires,c="; expires="+b.toUTCString()),c}function b(a){return"; path="+(a.path?a.path:"/")}function d(a){return a.domain?"; domain="+a.domain:""}function e(a){return a.secure?"; secure":""}function f(f,h,i){var j,k,l,m;i=i||{},null===h&&(h="",i.expires=-1,i.path="/"),j=a(i),k=b(i),l=d(i),m=e(i),c.cookie=[f,"=",g(h),j,k,l,m].join("")}function i(a){for(var b,d,e=c.cookie.split(";"),f={},g=0,i=e.length,j=/^\s+|\s+$/g;g<i;g++)b=e[g].split("="),f[b[0].replace(j,"")]=b[1];return d=f[a]?h(f[a]):f[a]}return c.cookie?{set:f,get:i}:{set:function(){},get:function(){return null}}}),m(n[16],[n[17],n[22],n[8]],function(a,b,c){function d(a,b,c){var d,e={};return c=c||{},null===b?void localStorage.removeItem(a):(e.createdAt=+new j,e.value=b,c.expires&&("object"==typeof c.expires?e.expires=c.expires.getTime():(d=new j,d.setTime(d.getTime()+24*c.expires*60*60*1e3),e.expires=d.getTime())),void localStorage.setItem(a,JSON.stringify(e)))}function e(a){var b=localStorage.getItem(a),c=!1;return b&&(b=JSON.parse(b),c=b.value,b.expires&&b.expires<+new j)?(d(a,null),null):c}function f(){return"ustreamEmbedHash-"+(a.isVid()?g.cId:a.id())}var g=ustream.vars,h=function(){};return(h=c.storage?function(){return{set:d,get:e,getHashStorageName:f}}:function(){return{set:b.set,get:b.get,getHashStorageName:f}})()}),m(n[23],[],function(){return function(a,b){var c,d,e=b,f=[];for(c=2,d=arguments.length;c<d;++c)f.push(arguments[c]);return function(){return a.apply(e,f.concat(Array.prototype.slice.call(arguments)))}}}),m(n[28],[],function(){function d(a){if(a)return 0!==a.indexOf("multilevel_embed")&&a.lastIndexOf("/")<a.indexOf("://")+3&&(a+="/"),a}var e="multilevel_embed",f="unknown",g=e,h=a.parent;return g=b.ancestorOrigins?b.ancestorOrigins[b.ancestorOrigins.length-1]:e,g=d(g),function(){if(h!==a.top)try{return h.location.host===b.host?h.multiLevelEmbed?g:d(h.document.referrer)||f:g}catch(e){return g}else if(h===a&&0!==b.pathname.indexOf("/embed"))return d(b.href);return d(c.referrer)||f}()}),m(n[29],[],function(){return function(a){return c.getElementById(a)}}),m(n[30],[],function(){return function(a){return c.createElement(a)}}),m(n[31],[],function(){return function(a,b){if("string"==typeof b){var d=c.createDocumentFragment(),e=d.appendChild(c.createElement("div"));return e.innerHTML=b,a.appendChild(e.childNodes[0])}return a.appendChild(b)}}),m(n[32],[],function(){return function(b,d,e){if(b.attachEvent){var f=function(a){a.target=a.srcElement,a.currentTarget=b,e.handleEvent?e.handleEvent(a):e.call(b,a)};if("DOMContentLoaded"==d){var g=function(a){"complete"==c.readyState&&f(a)};if(c.attachEvent("onreadystatechange",g),"complete"==c.readyState){var h=new Event;h.srcElement=a,g(h)}}else b.attachEvent("on"+d,f)}else b.addEventListener(d,e);return b}}),m(n[33],[],function(){return function(a,b,c){a.detachEvent?"DOMContentLoaded"==b?a.detachEvent("onreadystatechange",eventListener.wrapper):a.detachEvent("on"+b,eventListener.wrapper):a.removeEventListener(b,c)}}),m(n[34],[],function(){var a=new RegExp("^(http(?:s)?://[^/]+)","im");return function(b){var c=b.match(a);return c?!(!c||!c[1])&&b.match(a)[1].toString():""}}),m(n[27],[n[28],n[13],n[16],n[29],n[30],n[31],n[32],n[33],n[34]],function(c,d,e,f,g,h,i,k,l){function m(a,b){var c=new WebSocket("ws://"+a+":"+b);c.addEventListener("open",function(){var a=function(){var a=[].splice.call(arguments,0);a=a.slice(0,1),1===c.readyState&&c.send(JSON.stringify(a))};d(a)})}function o(){if(typeof a.console!==y){var b,c,d,e,f,g;if(b=[].splice.call(arguments,0),"object"==typeof b[0]){c=b[0][0],d="[ "+b[0][1]+" ]",e=b[0][2],f=b[0][3],c=(g=new j(c))?[g.getHours(),":",g.getMinutes(),":",g.getSeconds(),".",g.getMilliseconds()].join(""):"";var h=0===d.indexOf(n[133]);h&&!x.atlasDebug&&0===f.level||(h&&(f=f.data),typeof f!==y?console.log(c,d,e,f):console.log(c,d,e))}}}function p(){return q=!1,r=!1,u=l(c),v=function(){},c.indexOf("ustream.tv/embed/test")>-1&&(q=function(){var b=[].splice.call(arguments,0);a.parent.postMessage(JSON.stringify({mte:b}),u)}),/([0-9]{1,3}\.){3}[0-9]{1,3}/.test(z)?(r=z[1].split(":"),s=r[0],t=r[1]||8080,m(s,t),void(q=!1)):(q?v=q:r||(v=o),w=a.onerror,a.onerror=function(a,b,c){return v([+new j,"jserror",a+" Cannot continue.",JSON.stringify({url:b,lineNumber:c})]),!!w&&w(a,b,c)},void((!A||A&&x.debug)&&d(v)))}var q,r,s,t,u,v,w,x={debug:e.get("jsDebugConsoleLogOn"),atlasDebug:e.get("atlasConsoleLogOn")},y="undefined",z=b.search.match(/(debug)=([a-zA-Z0-9\-_\.\:\%]*)/gi),A=!1;return z&&z[0]&&(z=z[0].split("=")||!0),function(){if("object"==typeof arguments[0]&&arguments[0].hasOwnProperty("htmlplayback"))return A=arguments[0].htmlplayback,void((A||!A&&z)&&p());if("object"==typeof arguments[0]&&arguments[0].hasOwnProperty("debug"))return x=arguments[0],void d(x.debug?o:function(){});var b=f("EmbedViewer"),c=g("button");c.className="debugger-button",c.innerHTML="Connect Debugger",i(c,"click",function(){var b=prompt("Remote Console IP:PORT"),c=a.sessionStorage;c&&c.setItem("mte-remote-debug",b),b=b.split(":"),m(b[0],b[1])}),h(b,c)}}),m(n[26],[n[17],n[27],n[13],n[16]],function(c,d,e,f){function g(a,b){var d=c.id()+"";K[d]||(K[d]={}),K[d][a]=b}function h(a){var b=c.id();return K[b]&&K[b][a]||g(a,!1),K[b][a]}function i(c,d){var e,f,g=c?c.length:0;if(a==a.parent&&G.player&&0!=b.pathname.indexOf("/embed")){J("parseParams","from U.player");for(var e in G.player)J("parseParams",e),d[e]=G.player[e]}else for(J("parseParams","from url"),e=0;e<g;e+=1)f=c[e].split("="),d[f[0]]=f[1];return d.autoPlay&&(d.autoplay=d.autoPlay),d.siteMode&&(d.sitemode=d.siteMode),"false"===d.autoplay&&(d.autoplay=!1),d.subscription=G.hasSubscription,d.betaChannel=G.isBetaChannel,d.isLive=G.isLive,d.uumf=G.isUUMF,d}function j(a,b,c){return a.hasOwnProperty(b)?a[b]=a[b]===I||1===+a[b]||""===a[b]||void 0===a[b]:a[b]=c,a}function k(a){return a.longpoll===I?a.longpoll=!0:a.longpoll=!1,a}function l(a){return G.sessionId&&G.adFree?a.adFree=!0:a.adFree=!1,a}function m(a){return a.controls===H||a.controls===!1?a.controls=!1:a.controls=!0,a}function o(a){var c,d,e=b.hash,f=/to(\d*)\:?(\d*)\:?(\d*)?/;return f.test(e)&&(c=e.match(f),"undefined"!=typeof c[3]&&""!=c[3]?(d=60*+e.match(f)[1]*60,d+=60*+e.match(f)[2],d+=+e.match(f)[3]):"undefined"!=typeof c[2]&&""!=c[2]?(d=60*+e.match(f)[1],d+=+e.match(f)[2]):"undefined"!=typeof c[1]&&""!=c[1]&&(d=+e.match(f)[1])),g("startAt",d),a}function p(a){return!a.autoplay||a.autoplay!==I&&1!=a.autoplay?a.autoplay=!1:a.autoplay=!0,a}function q(a){return a.lite&&a.lite===I?a.lite=!0:a.lite=!1,a}function r(a){return a.showtitle&&a.showtitle===H?a.showtitle=!1:a.showtitle=!0,a}function s(a){return a.volume&&+a.volume>=0&&+a.volume<=100?a.volume=+a.volume:a.volume=100,a}function t(a){var b=["low","med","high","best"],d=!!c.isCid()&&c.id();return a.quality&&("medium"===a.quality?a.quality="med":"hd"===a.quality?a.quality="best":("|"+b.join("|")+"|").indexOf("|"+a.quality+"|")===-1&&delete a.quality),a.abs=!1,12930607===d&&(a.quality="high"),[0,443086,16427094,13434778,13434793,13434812,16433957,16433959,16433961,16433964,16433967,16434052,16434199,16472054,17881973,0].join("|").indexOf("|"+d+"|")!==-1&&(a.quality="auto",a.abs=!0),a}function u(a){var b={green:"ub85a901:lc85a901:ocffffff:ucffffff",red:"ubff3d23:lcff3d23:ocffffff:ucffffff",pink:"ube166b7:lce166b7:ocffffff:ucffffff",orange:"ubff720a:lcff720a:ocffffff:ucffffff"};return a.color&&a.color in b?a.style=b[a.color]:a.ub||a.gradlow?a.style="ub"+(a.ub||a.gradlow):a.style=!1,a}function v(a){return a.v=3,a}function w(a){return a.refTest&&(a.refTest=!0),a}function x(a){return a.bdtools&&(a.bdtools=!0,a.autoplay=!0,a.adFree=!0),a}function y(a){return a=z(a),a=A(a),a=B(a)}function z(a){return a.p&&G.isVerizon?g("channelPassword",a.p):g("channelPassword",!1),a}function A(b){var d,e=(c.isVid()?"v:":"c:")+c.id(),h="c:"+G.cId,i="ustreamContentPw-"+e,j="ustreamContentPw-"+h,k="",l="",m=!1;try{d=a.sessionStorage}catch(n){return b}return d&&(k=d.getItem(i),l=f.get(i),k||l||(k=d.getItem(j),l=f.get(j)),k?"string"==typeof k&&(m=JSON.parse(k)):l&&(m={value:l}),m&&m.value&&g("channelPassword",m.value)),b}function B(b){var c,d,e,h=f.getHashStorageName();try{c=a.sessionStorage,d=f.get(h)||c.getItem(h)||G.hash}catch(i){return b}return d?(e=JSON.parse(d),g("hash",d),g("hashObj",e)):(g("hash",null),g("hashObj",null)),b}function C(a){return a.qosplayer===I||"1"===a.qosplayer?a.qosplayer=!0:a.qosplayer=!1,a}function D(a){return a.experiment===I||"1"===a.experiment?a.experiment=!0:a.experiment=!1,a}function E(a){var c="/pop-out";return a.popout=b.pathname.slice(c.length*-1)===c,a}function F(a){return a.showHiddenContextMenuItems=a.showHiddenContextMenuItems===I||"1"===a.showHiddenContextMenuItems||f.get("showHiddenContextMenuItems"),a}var G=ustream.vars,H="false",I="true",J=e(n[26]),K={width:"100%",height:"100%",color:!1,autoplay:!1,controls:!0,wmode:"opaque",locale:G.locale,sitemode:!1,bdtools:!1,playing:!1,live:!1,showHiddenContextMenuItems:!1},L=/([a-z0-9\-_]+)(?:=([a-z0-9\-_\.\:\%]*))?/gi,M=b.search,N=M.match(L)||[];return function(){return K=i(N,K),K=k(K),K=l(K),K=m(K),K=o(K),K=p(K),K=r(K),K=q(K),K=s(K),K=t(K),K=u(K),K=v(K),K=w(K),K=x(K),K=C(K),K=D(K),K=E(K),K=F(K),K=j(K,"html5ui",!1),K=j(K,"htmlplayback",!1),K=j(K,"ads",!1),K=j(K,"allowfullscreen",!0),K=j(K,"cmenu",!0),K=y(K),K.html5ui=!!K.htmlplayback||K.html5ui,K.setByContent=g,K.getByContent=h,K.update=function(){K=y(K)},d({htmlplayback:K.htmlplayback}),J("params setup",K,!0),K}()}),m(n[35],[n[26],n[17],n[8]],function(a,b,d){var e=!(b.isCid()&&d.android&&2===d.android[0])&&!d.swf&&!d.ie&&!!c.createElement("video").canPlayType&&d.android||d.blackberry||d.ios||d.playstation||!!a.ios||!!a.refTest||!!a.html5;return e}),m(n[25],[n[26],n[17],n[8],n[35]],function(a,b,d,e){function f(a){return"|"+a.replace(/\s*/g,"").replace(/,/g,"|")+"|"}function g(){return!b.isCid()||m.indexOf("|"+b.id()+"|")===-1}function h(){return c.fullscreenEnabled||c.mozFullScreenEnabled||c.msFullscreenEnabled||c.webkitFullscreenEnabled}function i(){return e||a.experiment||(a.html5ui||a.sitemode||a.popout)&&l&&(h()||!a.allowfullscreen)&&g()}var j=ustream.vars,k=j.mte_html_ui||{},l=k&&!!k.enabled,m=k.exceptionCids||"";return m=f(m),{isEnabled:i,isFullScreenEnabled:h}}),m(n[24],[n[25],n[13],n[7],n[16],n[29],n[30],n[32],n[33],n[19],n[8]],function(a,b,c,d,e,f,g,h,i,k){function l(a,b,c){var d='<option value="0">'+a+"</option>",e=0,f="";for(e=c||1;e<=b;e++)f=e<10?"0"+e:e,d+='<option value="'+f+'">'+f+"</option>";return d}function m(b){var c="";return!a.isEnabled()&&s?(b=new j((+b)),c='<input type="date" id="BirthDate" value="'+b.toString()+'" />'):c='<select class="age" id="BMonth">'+l("month",12)+'</select><select class="age" id="BDay">'+l("day",31)+'</select><select class="age" id="BYear">'+l("year",(new j).getFullYear(),1900)+"</select>",c}function o(a,b){var d="";d=a instanceof j?c(b.alertMaxBirth,"#maxbirth#",a.toLocaleString(q.locale.replace("_","-"),{year:"numeric",month:"numeric",day:"numeric"})):c(b.alert,"#minage#",a),alert(d)}var p=function(){},q=ustream.vars,r=b(n[24]),s=function(){var a=f("input");return a.setAttribute("type","date"),(!k.ios||4!==k.ios[0])&&"text"!==a.type}(),t='<form id="Agelock"><div class="agelock-fields"><p>%text%<br /><br />%input%<br /><br /><button>%submit%</button></p></div><div class="agelock-link"><p>%agelink%</p></div>';return function(){var b,f=q.labelAgeLock,k=t,l=p,n=function(c){c.preventDefault();var g,h=b.age;return g=!a.isEnabled()&&s?e("BirthDate").value.split("-"):[e("BYear").value,e("BMonth").value,e("BDay").value],g[0]>0&&g[1]>0&&g[2]>0&&(g=new j((+g[0]),+g[1]-1,(+g[2])))&&"Invalid Date"!==g.toString()?(d.set("userProvidedAge",g.getTime()),b.validate()?l.call(null):o(h,f)):o(h,f),!1};return b={html:function(){return k=c(k,/%lead%/g,f.lead),k=c(k,/%submit%/g,f.submit),k=c(k,/%input%/g,m(b.userAge)),k=c(k,/%agelink%/g,f.enterAgeLink),k=b.maximumBirthDate?c(k,/%text%/g,f.textMaxBirth):c(k,/%text%/g,c(f.text,"#minage#",b.minAge))},setup:function(a){l=a;var b;r("setup "),b=e("Agelock"),g(b,"submit",n),$(".agelock-link").on("click",function(){i.send(i.types.UI,"mouseDblClick")})},destroy:function(){var a=e("Agelock");r("destroy "),h(a,"submit",n)}}}()}),m(n[9],[n[10],n[13],n[16],n[23],n[19],n[24]],function(a,b,c,d,e,f){function g(){var a;return a=c.get(p),+a||!1}function h(a,b){var c,d,e,f,g=new j((+a));return b instanceof j?c=g<=b:(d=new j,e=new j(d.getFullYear()-b,d.getMonth(),d.getDate()),f=new j(g.getFullYear(),g.getMonth(),g.getDate()),c=a&&f<=e),c}function i(a){if(!a)return!0;var b,c=g();return!!c&&(b=h(c,a),o(b?"passed":"failed"),e.send(e.types.EVENT,"ageLockValidation",c),b)}function k(a){var b,c=a.maximumBirthDate,d=[];return c?(d=c.split("-"),b=new j((+d[0]),+d[1]-1,(+d[2]))):b=a.minAge,b}var l="object",m="agelock",o=b(n[9]),p="userProvidedAge";return function(b){return function(b){return typeof b!==l&&(b={minAge:b}),a(b,f),f.type=m,f.age=k(b),f.userAge=g(),f.validate=d(i,null,f.age),f}(b)}}),m(n[36],[],function(){var a="default";return function(b){return function(b){return b.type=a,b}(b)}}),m(n[38],[],function(){var a=ustream.vars;return function(){return{title:a.labelGeolock.lead,text:a.labelGeolock.text}}()}),m(n[37],[n[10],n[38]],function(a,b){var c="geolock";return function(d){return function(d){return a(d,b),b.type=c,b}(d)}}),m(n[40],[],function(){var a=ustream.vars;return function(){return{title:a.labelIplock.lead,text:a.labelIplock.text}}()}),m(n[39],[n[10],n[40]],function(a,b){var c="iplock";return function(d){return function(d){return a(d,b),b.type=c,b}(d)}}),m(n[42],[],function(){var a=ustream.vars;return function(){return{title:a.labelUnAuth.lead,text:a.labelUnAuth.text}}()}),m(n[44],[],function(){var b="width=720,height=480,scrollbars=no,resizable=no",c=[];return function(d,e,f){f=f||b;var g=a.open(d,e,f);return c.push(g),g}}),m(n[43],[n[17],n[26],n[29],n[13],n[7],n[16],n[44],n[32],n[33],n[8]],function(b,c,d,e,f,g,h,i,j,k){function l(a){var b="";return typeof a.iframeEnable!==t&&"0"!==a.iframeEnable?b=f(w,/%url%/g,q(a.url)):(b=f(x,/%submit%/g,a.buttonCaption),b=f(b,/%message%/g,a.message)),b}function m(a){g.set(g.getHashStorageName(),a,{expires:14}),c.update()}function o(){var a=!1;return 23218581==s.ownerUserId&&(a=!0),
a}function p(a){var b="external-hashlock";return"advanced"===a.type&&a.url.indexOf("hashlock/webinar")>-1&&(b=""),b}function q(a){var c=a.split("#");return c[0]+=c[0].indexOf("?")>-1?"&":"?",c[0]+=["ustreamContentType="+b.app(),"ustreamContentId="+b.id()].join("&"),c=c.join("#"),c.indexOf("hashlock/webinar")>-1&&k.ssl&&(c=c.replace("http:","https:")),c}function r(){return!!c.getByContent("hash")}var s=ustream.vars,t="undefined",u=function(){},v=e(n[43]),w='<iframe id="Hashlock" src="%url%" frameborder="no" allowfullscreen webkitallowfullscreen></iframe>',x='<form id="Hashlock"><p>%message%<br /><br /><button>%submit%</button></p></form>';return function(){function b(a){v("prepare",a),e=a||s.hashLockData,f=q(e.url),g=o(),k=p(e),n=l(e),c.html=n}var c,e,f,g,k,n="",w=u,x=function(a){a.preventDefault();h(f,"UstreamHashAuth","width="+e.popupWidth+"px,height="+e.popupHeight+"px,scrollbars="+(g?"yes":"no")+",resizable=no,top=100,left=100");return!1};return c={additionalClass:k,html:n,prepare:b,setup:function(b){if(v("setup "),typeof e.iframeEnable===t||"0"===e.iframeEnable){var c=d("Hashlock");i(c,"submit",x)}w=b,a.hashPass=function(a){v("hash response ",a),m(a),w.call(null)},a.saveHash=function(a){v("hash response",a),m(a)},a.hasStoredHash=function(){return r()},a.retryHash=function(){w.call(null)}},destroy:function(){if(v("destroy "),a.hashPass=u,typeof e.iframeEnable===t||"0"===e.iframeEnable){var b=d("Hashlock");j(b,"submit",x)}}}}()}),m(n[41],[n[26],n[10],n[16],n[42],n[43]],function(a,b,c,d,e){var f="hashlock";return function(g){return c.set(c.getHashStorageName(),null),a.update(),function(a){var c;return a&&"advanced"===a.type?(c=e,c.prepare(a)):(b(a,d),c=d,d.type=f),c}(g)}}),m(n[46],[n[26],n[13],n[29],n[32],n[33],n[19]],function(a,b,c,d,e,f){var g=ustream.vars,h=function(){},i=b(n[46]),j='<form id="Password"><p>%lead%<br /><br /><div class="pwfield-and-button"><div class="input-bg"><input type="password" id="Pwd" placeholder="%placeholder%" autocomplete="off" /></div><button>%submit%</button></div><div class="pw-label"><p>%pwlabel%</p></div>\t</p></form>';return function(){var b=j.replace("%lead%",g.labelPasslock.lead).replace("%placeholder%",g.labelPasslock.placeholder).replace("%submit%",g.labelPasslock.submit).replace("%pwlabel%",g.labelPasslock.enterPassLink),k=h,l=function(b){return b.preventDefault(),a.setByContent("channelPassword",c("Pwd").value),k.call(null),!1};return{html:b,setup:function(a){k=a,i("setup ");var b=c("Password");d(b,"submit",l),$(".pw-label").on("click",function(){f.send(f.types.UI,"mouseDblClick")})},destroy:function(){i("destroy ");var a=c("Password");e(a,"submit",l)}}}()}),m(n[45],[n[10],n[46]],function(a,b){var c="passwordlock";return function(d){return function(d){return a(d,b),b.type=c,b}(d)}}),m(n[48],[],function(){return{getText:function(a){var b,c=ustream.vars.playerOneLabels;for(path=a.split("."),b=0;b<path.length;b++)c&&"object"==typeof c&&(c=c[path[b]]);return c&&"string"==typeof c?c:"! "+a+" !"}}}),m(n[49],[],function(){var a=ustream.vars;return function(){return{title:a.labelReflock.lead,text:a.labelReflock.text}}()}),m(n[51],[n[29],n[31],n[26],n[25]],function(a,b,d,e){return function(a){return function(a){var d,f,g=c.createElement("canvas"),h=c.createElement("div"),i=function(a,b,c,d,e,f,g){a.bezierCurveTo(b,c,d,e,f,g)},j=function(a,b,c){a.addColorStop(b,c)},k=function(a,b,c){a.moveTo(b,c)},l=function(a,b,c){a.lineTo(b,c)};if(b(h,g),h.className="large-play-cover",h.id="LargePlayContainer",g.className="large-play-button",g.getContext){f=g.getContext("2d"),f.canvas.width=60,f.canvas.height=60;var d,m=f.globalAlpha;f.save(),f.globalAlpha=.15*m,f.beginPath(),k(f,55,30),i(f,55,43.8,43.8,55,30,55),i(f,16.2,55,5,43.8,5,30),i(f,5,16.2,16.2,5,30,5),i(f,43.8,5,55,16.2,55,30),f.closePath(),f.fill(),f.globalAlpha=1*m,f.save(),f.beginPath(),k(f,40.3,28.1),l(f,25.9,20),i(f,24.2,19.1,22.8,19.8,22.8,21.6),l(f,22.8,38.2),i(f,22.8,40.1,24.2,40.8,25.9,39.8),l(f,40.3,31.6),i(f,42,30.6,42,29,40.3,28.1),f.closePath(),d=f.createLinearGradient(32.2,19.6,32.2,40.2),e.isEnabled()?(j(d,0,"rgb(255, 255, 255)"),j(d,1,"rgb(255, 255, 255)")):(j(d,0,"rgb(61, 160, 255)"),j(d,1,"rgb(40, 111, 255)")),f.fillStyle=d,f.fill(),f.beginPath(),k(f,30,0),i(f,13.4,0,0,13.4,0,30),i(f,0,46.6,13.4,60,30,60),i(f,46.6,60,60,46.6,60,30),i(f,60,13.4,46.6,0,30,0),f.closePath(),k(f,30,52.5),i(f,17.6,52.5,7.5,42.4,7.5,30),i(f,7.5,17.6,17.6,7.5,30,7.5),i(f,42.4,7.5,52.5,17.6,52.5,30),i(f,52.5,42.4,42.4,52.5,30,52.5),f.closePath(),d=f.createLinearGradient(30,0,30,60),e.isEnabled()?(j(d,0,"rgb(255, 255, 255)"),j(d,1,"rgb(255, 255, 255)")):(j(d,0,"rgb(61, 160, 255)"),j(d,1,"rgb(40, 111, 255)")),f.fillStyle=d,f.fill(),f.restore(),f.restore()}return g.addEventListener("click",a),h}(a)}}),m(n[50],[n[26],n[17],n[7],n[29],n[31],n[51]],function(a,b,c,d,e,f){var g=(n[50],'<a id="RedirectContainer" class="redirect-container" style="%style%" href="%href%" target="_blank"></a>');return function(){function h(a,b){a?m.html=c(g,"%style%","background-image:url("+a+");"):m.html=c(g,"%style%",""),m.html=c(m.html,"%href%",b)}var i,j,k=a.getByContent("thumbnail"),l=a.getByContent("meta"),m={};return b.isCid()?i=l?l.url:"":b.isHid()?(j=b.ids(),i="/recorded/"+j[0]+"/highlight/"+j[1]):i="/recorded/"+b.id(),h(k,i),m.setData=h,m.setup=function(a){var b=d("RedirectContainer"),c=f(function(){},!1);b.parentNode.className+=" screen-full",e(b,c)},m.destroy=function(){var a=d("RedirectContainer");a.parentNode.className=a.parentNode.className.replace(new RegExp("screen-full","g"),"")},m}()}),m(n[47],[n[26],n[10],n[7],n[48],n[49],n[50],n[8]],function(a,b,c,d,e,f,g){var h="referrerlock";return function(a){return function(a){var i,j=null;return a.redirectUrl?(j=f,i=g.ssl?a.liveThumbnailSecureUrl||a.channelPictureSecureUrl||a.thumbnailSecureUrl||"":a.liveThumbnailUrl||a.channelPictureUrl||a.thumbnailUrl||"",i=c(i,"#SIZE#","640x360"),j.setData(i,a.redirectUrl)):(j=e,a.messageToken&&(j.title="",j.text=d.getText("ui.lockScreens."+a.messageToken))),b(a,j),j.type=h,j}(a)}}),m(n[52],[],function(){var a="cluster";return function(b){return function(b){return b.type=a,b}(b)}}),m(n[54],[],function(){var a=ustream.vars;return function(){return{title:a.labelNoTranscoded.lead,text:a.labelNoTranscoded.text}}()}),m(n[53],[n[10],n[54]],function(a,b){var c="nonexistent";return function(d){return function(d){return a(d,b),b.type=c,b}(d)}}),m(n[55],[n[10],n[42]],function(a,b){var c="sessionauthlock";return function(d){return function(d){return a(d,b),b.type=c,b}(d)}}),m(n[57],[],function(){var a=ustream.vars;return function(){return{title:a.labelDefaultReject.lead,text:a.labelDefaultReject.text}}()}),m(n[58],[],function(){var a=ustream.vars;return function(){return{title:a.labelBanReject.lead,text:a.labelBanReject.text}}()}),m(n[56],[n[10],n[57],n[58]],function(a,b,c){var d="rejectLock";return function(e){return function(e){var f=b;return e.hasOwnProperty("ban")&&(f=c),a(e,b),b.type=d,f}(e)}}),m(n[60],[],function(){var a=ustream.vars;return function(){return{title:a.labelViewerHourLock.lead,text:a.labelViewerHourLock.text}}()}),m(n[59],[n[10],n[60]],function(a,b){var c="viewerhourlimitlock";return function(d){return function(d){return a(d,b),b.type=c,b}(d)}}),m(n[62],[n[13],n[21],n[19]],function(a,b,c){var d="object",e=function(){},f=a(n[62]),g={REJECT:"logic_reject",UPDATE:"logic_update"},h={stream:n[1],broadcaster:n[4],meta:n[2],logo:n[3],thumbnail:n[6],viewers:n[5],allViewers:n[5],allTimeTotal:n[5],presentation:"logic/module/presentation"};return function(a){function i(a,c){var e;e=typeof c!==d?{data:c}:c,b(o,g.REJECT,a(e))}function j(){r||q||(c.send(c.types.EVENT,"mediaAccept",!0),q=!0)}function k(a){r=!0,c.send(c.types.EVENT,"mediaReject",!0),a.map(function(a){var b=Object.keys(a);b.map(function(b){try{l(["logic/lock/"+b.toLowerCase()],function(c){i(c,a[b])})}catch(c){l([n[36]],function(c){i(c,a[b])})}})})}function m(a){var c=e,d={};a.map(function(a){"ageLock"in a&&(f(p+" agelock ",a),l([n[9]],function(d){c=d(a.ageLock),c.validate()?r=!1:(r=!0,b(o,g.REJECT,c))}));var i=Object.keys(a);i.map(function(i){c=e,d={},"ageLock"!==i&&h[i]&&l([h[i]],function(c){r||(d=c(a[i],i,p),f(p+" module update",[i,d]),b(o,g.UPDATE,d))})})}),j()}var o={},p=a.instanceId,q=!1,r=!1;return a.on(a.event.REJECT,k),a.on(a.event.UPDATE,m),{event:g,onAccept:function(){r=!1},onReject:k,onUpdate:m,on:function(a,b){o[a]||(o[a]=[]),o[a].push(b)},destroy:function(){o=null}}}}),m(n[63],[],function(){return function(a,b){return b||(b=c),b.getElementsByTagName(a)}}),m(n[64],[n[26],n[28],n[34],n[8]],function(a,b,c,d){function e(a){var b=["static-shell.cerevo.com","shell.cerevo.com","secure.cerevo.com","s-dev.cerevo.com","s-dev-01.cerevo.com","s-dev-02.cerevo.com"],c=a.split("://").length?a.split("://")[1]:a;return b="|"+b.join("|")+"|",b.indexOf("|"+c+"|")!==-1}function f(){var f=a.getByContent("broadcaster"),g=a.getByContent("meta"),h=f&&f.benefits&&f.benefits.indexOf("adfreebroadcast")>-1,i=c(b),j=/.*ustream\.tv(\.lh)?$/.test(i)||a.bdtools;return d.ssl&&!(h||a.adFree)&&g&&!j&&!e(i)}function g(){return f()||!1}return g}),m(n[66],[n[13]],function(a){function b(a){a?e():d()}function d(){f("disable"),b.enabled=!1,g.className.indexOf("hidelayers")<0&&(g.className+=" hidelayers")}function e(){f("enable"),b.enabled=!0,g.className=g.className.replace("hidelayers","")}var f=a(n[66]),g=c.getElementsByTagName("body")[0];return b.enabled=!0,b}),m(n[65],[n[13],n[29],n[66]],function(a,b,c){function d(a){if(c.enabled&&a!==h){var b=f.className;e(a),a?f.className=b.replace(/hidden/g,""):b.indexOf(g)<0&&(f.className+=" "+g),h=a}}var e=a(n[65]),f=b("Loading"),g="hidden",h=!1;return d}),m(n[69],[],function(){function a(a){var b=c.createElement("script"),d=!1;b.src=a,b.async=!0,b.onload=b.onreadystatechange=function(){d||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(d=!0,b.onload=b.onreadystatechange=null,b&&b.parentNode&&b.parentNode.removeChild(b))},f||(f=c.getElementsByTagName("head")[0]),f.appendChild(b)}function b(a){return g(a)}function d(c,d,e,f){h=(c||"").indexOf("?")===-1?"?":"&",d=d||{};for(i in d)d.hasOwnProperty(i)&&(h+=b(i)+"="+b(d[i])+"&");var g="json"+ ++j;return k[g]=function(a){e(a);try{delete k[g]}catch(b){}k[g]=null},a(c+h+(f||l.callbackName||"callback")+"="+g),g}function e(a){l=a}var f,h,i,j=0,k=this,l={callbackName:"jsoncallback"};return{get:d,init:e}}),m(n[68],[n[13],n[8],n[69]],function(a,b,c){function d(a,b,c,d,f){p=!1;var g;m>6?d.call(null):(f?g=f:(g=i.pow(s,m),g=1e3*g),o=e(function(){h(a,b,c,d,f)},g),a(b,c,d,f))}function h(a,b,c,e,f){f?(l("gateway timeout."),e.call(null)):(m+=1,l("gateway timeout. Trying again ..."),d(a,b,c,e))}function j(a,b){f(o),m=1,p||a.call(null,b)}var k="recorded",l=a(n[68]),m=0,o=0,p=!1,q="http://cdngw.ustream.tv/rgwjson",r="https://cdngw-a.akamaihd.net/rgwjson",s=2;return{abort:function(){p=!0,f(o)},getAdverts:function(a,e,f,h){var i=function(a){return function(b){j(a,b)}}(e);d(function(a,d,e,f){var h=a[0],i=a[1],j=a[2],l=a[3],m=a[4],n=a[5],o=a[6],p=b.ssl?r:q;l&&(i=k),c.get(p+"/Viewer.getAdverts/{%22brandId%22:1,"+(o?"%22device%22:%22"+o+"%22,":"")+"%22mediaId%22:"+h+",%22mediaType%22:%22"+i+"%22,%22countryCode%22:%22"+j+"%22,"+(l?"%22highlightId%22:"+l+",":"")+"%22locale%22:%22"+m+"%22,%22pageUrl%22:%22"+g(n)+"%22}",{},d)},a,i,f,h)}}}),m(n[70],[n[8],n[63]],function(a,b){function e(){var a=c.createElement("script");return a.type="text/javascript",a.charset="utf-8",a.async=!0,a}function f(b){var c=e();c.setAttribute("data-requirecontext",b),!c.attachEvent||c.attachEvent.toString&&c.attachEvent.toString().indexOf("[native code")<0||a.opera?(c.addEventListener("load",b.onScriptLoad,!1),c.addEventListener("error",b.onScriptError,!1)):c.attachEvent("onreadystatechange",b.onScriptLoad),c.src=b.url,h=c,j.appendChild(c),h=null}function g(a,b,c){return function(a,b,c){var d;return d={url:a,onSuccess:b,onError:c,onScriptLoad:function(a){("load"===a.type||i.test((a.currentTarget||a.srcElement).readyState))&&d.onSuccess()},onScriptError:function(a){d.onError&&d.onError()}}}(a,b,c)}var h,i="PLAYSTATION 3"===d.platform?/^complete$/:/^(complete|loaded)$/,j=b("head")[0];return function(a,b,c){f(g(a,b,c))}}),m(n[71],[n[26],n[17],n[28],n[13]],function(a,b,c,d){function e(b){var c,d={};a.getByContent("broadcaster");d.info=g(b);for(c in r)d[c]=f(b,c);return p("parse done",d),d}function f(a,c){var d,e=b.isVid(),f=!a[c],g=c===r.mid&&e,i=!a[c]||a[c].length<1;return d=!(f||g||i)&&h(a[c],{},c)}function g(d){var e=d.info||{},f=b.isCid(),g=a.getByContent("meta"),h=a.getByContent("broadcaster"),i=c.indexOf("ustream.tv/new");return e.ps4=h.ps4,e.verizon="Verizon"==g.brand,f?(e.videoId=b.id(),e.videoLength="555000",e.featured=h.featured):(e.videoId=+g.ownerChannelId,e.videoLength=g.videoLength+"",e.vid=b.id(),e.vodId=b.id()),e.locale=m.locale,e.autoplay=a.autoplay,e.isHomePage=i>-1&&"/"!=c.charAt(i+14),a.prerollDone&&(e.secondPreroll=!0),e}function h(a,b,c){var d,e,f,g,h,j,k,l;for(d=0,e=a.length;d<e;d++)f=a[d],g=f.block?f.block:"255",b[g]||(b[g]=[],b[g].positionType=c,b[g].currentIndex=0),h=b[g],b.blockList=i(b,g),j=f.provider===q.d,k=f.provider===q.a,l=f.type===s.v,j&&h.push(f),k&&l?h.push(f):(f.provider=q.d,h.push(f));return b}function i(a,b){var c=a.blockList;return c||(c=[]),c.indexOf(b)<0&&c.push(b),a.currentBlock||(a.currentBlock=b),c}function j(a){var b=a.currentBlock,c=b.currentIndex,d=!1;return b[c]&&b[c].remove&&(p("recently played ad has to be removed"),b.splice(c,1),b.currentIndex-=1),b[c+1]?(p("next ad in current block"),b.currentIndex+=1):(p("get next block"),b=k(a)),b?(c=b.currentIndex,d=b[c]):d=!1,p("next ad item"),d}function k(b){var c,d=b.currentBlock,e=d.positionType,f=b[e]||{},g=f.blockList||[],h=g.indexOf(f.currentBlock),i=!1;return d!==!1&&typeof e===o?b.currentBlock=i=l(b,r.pre):f[g[h+1]]?(c=g[h+1],i=f[c],f.currentBlock=c):e===r.pre?(a.prerollDone=!0,b.currentBlock=i=l(b,r.mid)):e===r.mid&&d.length>0&&(d.currentIndex=0,i=d),p("next ad block"),i}function l(a,b){var c,d=a[b];return c=!!d&&d[d.currentBlock],p("next ad position",b),c}var m=ustream.vars,o="undefined",p=d(n[71]),q={a:"adaptv",d:"delay"},r={pre:"pre",mid:"mid",post:"post"},s={v:"video"},r={pre:"pre",mid:"mid",post:"post"};return function(a){var b=e(a);return function(a){function b(){return j(a)}return a.currentBlock={},a.next=b,a}(b)}}),m(n[73],[n[29]],function(b){return function(){var d=0,e=0,f="clientWidth",g="clientHeight",h="innerWidth",i="innerHeight",j=c.documentElement,k=c.body;return a===a.parent?(j=b("PlayerOne"),d=j[f],e=j[g]):a[h]?(d=a[h],e=a[i]):0!==j[f]?(d=j[f],e=j[g]):(d=k[f],e=k[g]),[d,e]}}),m(n[72],[n[28],n[26],n[13],n[66],n[73],n[29],n[8]],function(c,d,g,h,i,j,k){function l(a){B.pageUrl=b.href,B.pageUrlOv=a.url,B.url=c,B.id=a.videoId,B.title=a.title,B.description=a.description,B.duration=a.videoLength,B.categories=a.categoryIds.main+"-"+(a.categoryIds.sub||0),B.keywords=a.categories.join(",")}function m(a,b,c){return b&&(a.prg||(a.prg=""),a.prg+=c),a}function o(b,c){var d={};return b.context&&(d=b.context),d=m(d,c.autoplay,"a"),d=m(d,c.featured,"f"),d=m(d,c.isHomePage,"h"),d=m(d,c.secondPreroll,"s"),d=m(d,c.verizon,"v"),d=m(d,c.ps4,"4"),b.uname&&(d.uname=b.uname),d.language=a.navigator.language,d.locale=c.locale,c.vid&&(d.vid=c.vid),d}function p(a){v(a.type+"! Error code: "+a.data.errorCode+". Error message: "+a.data.errorMessage);var b=function(a){v("adaptv onerror",a)};switch(a.data.errorCode){case 400:b("Unknown error has occurred.");break;case 401:b("Failed to get response for 1st-party ad tag or response for the 1st-party ad tag is invalid or empty. Typically indicative of a no-fill.");break;case 402:b("Ad tag timeout. Unable to retrieve response from ad tag within configured time.");break;case 411:b("3rd-party ad tag response is invalid or empty. Typically indicative of a no-fill.");break;case 412:b("Invalid media file type. Typically FLV or VPAID creative type.");break;case 413:b("maxWrapperLevels has been reached.");break;case 514:b("Ad slot is not defined.");break;case 515:b("Invalid or undefined ad tag url.");break;case 521:b("Failed to play HTML5 media file. No valid media files found.");break;case 522:b("Video start timeout. Video ad did not start with configured time.");break;case 523:b("Container div provided is invalid.")}}function q(a){a.subscribe("AdLoaded",r),a.subscribe("AdStopped",r),a.subscribe("AdStart",r),a.subscribe("AdPlaying",r),a.subscribe("AdPaused",r),a.subscribe("AdVideoComplete",r),a.subscribe("AdVideoStart",r),a.subscribe("AdClickThru",r)}function r(a){v(a.type)}function s(){if(z.videoSlot&&z.videoSlot.parentNode)for(var a=z.videoSlot.parentNode,b=a.children,c=b.length;c--;)b[c]&&"IMG"===b[c].tagName.toUpperCase()&&a.removeChild(b[c])}function t(a,b){function c(){r=o(a,b),B.zid=a.zid,z.videoSlot=j("UViewer"),__adaptv__.vpaid&&__adaptv__.vpaid.VPAIDAd?m=new __adaptv__.vpaid.VPAIDAd:__adaptv__.ads&&__adaptv__.ads.vpaid.VPAIDAd&&(m=new __adaptv__.ads.vpaid.VPAIDAd),d.debug&&q(m),m.subscribe("AdLoaded",function(){a.paused?z.videoSlot.setAttribute("controls",!0):(h(!1),m.startAd())}),m.subscribe("AdError",p),m.subscribe("AdError",function(){}),m.subscribe("AdClickThru",function(){m.pauseAd()}),m.subscribe("AdStopped",F),m.subscribe("AdStopped",s),m.subscribe("AdStopped",function(){f(D)}),m.subscribe("AdVideoStart",function(){t&&E(m,u),a.paused=!1}),m.subscribe("AdPlaying",function(){a.paused=!1});for(var c in G)m.subscribe(c,G[c].bind(null,m));a.forceTimer&&(t=!0,u=a.duration),n={adTagUrl:__adaptv__.vpaid.constructAdTag((k.ssl?"https:":"http:")+A,B,r)}}function g(){x?(c(),m.initAd(C[0],C[1],-1,-1,n,z)):y||e(g,100)}v(" setup ",a,b),l(b);var m,n,r,t=!1,u=0,w=0,C=i(),D=0,E=function(a,b){w=e(function(){a.stopAd()},b)},F=function(){t&&f(w)},G={};return x&&c(),{run:function(){v(" run ",n),g()},onStart:function(a){G.AdVideoStart=function(){a()}},onError:function(a){G.AdError=function(b){b.adFinishedCalled||(b.adFinishedCalled=!0,a())}},onFinish:function(a){G.AdStopped=function(b){b.adFinishedCalled||(b.adFinishedCalled=!0,a())},G.AdVideoComplete=function(b){b.adFinishedCalled||(b.adFinishedCalled=!0,a())}},onClickThrough:function(a){G.AdClickThru=function(b){a()}}}}var u="undefined",v=g(n[72]),w={ssl:"https://secure-assets.adap.tv/redir/javascript/jsvpaid.js",nonSsl:"http://redir.adap.tv/redir/javascript/jsvpaid.js"},x=typeof __adaptv__!==u,y=!1,z={maxWrapperLevels:5,adTagTimeout:10,videoTimeout:30,videoSlot:""},A="//ads.adap.tv/a/t/ustreamtv",B={pageUrl:"http://www.adap.tv/",id:"[VIDEO_ID]",title:"[VIDEO_TITLE]",description:"[VIDEO_DESCRPTION]",duration:"[VIDEO_DURATION]",categories:"[CATEGORIES]"};return{create:t,getSdkUrl:function(){return k.ssl?w.ssl:w.nonSsl},hasSdk:function(){return x},sdkError:function(){x=!1,y=!0},sdkLoaded:function(){x=!0,y=!0}}}),m("ustream-ums/lib/internals",[],function(){function a(a){return b[a]=b[a]||{},b[a]}var b={};return a}),m("ustream-ums/lib/merge",[],function(){function a(){for(var b={},c=0;c<arguments.length;c++)for(var d in arguments[c]){var e=arguments[c][d],f=b[d];f&&"object"==typeof e&&"object"==typeof f?b[d]=a(f,e):b[d]=e}return b}return a}),m("ustream-ums/lib/bind",[],function(){return function(a,b){var c,d,e=b,f=[];for(c=2,d=arguments.length;c<d;++c)f.push(arguments[c]);return function(){return a.apply(e,f.concat(Array.prototype.slice.call(arguments)))}}}),m("ustream-ums/lib/event",[],function(){function a(a,b){var c,d=a.length;for(c=0;c<d&&a[c]!=b;c++);return a.splice(c,1),a}var b="undefined";return{emit:function(a,c,d,e){if(e=e?e:"def",a&&a[c]){var f=[];if("def"===e)for(var g in a[c])f=f.concat(a[c][g]);else f=a[c][e];var g,h,i=f.length;for(g=0;g<i;g++)h=f[g],typeof d!==b?h.call(null,d):h.call(null)}},on:function(a,b,c,d){d=d?d:"def",a[b]||(a[b]={},a[b].def=[]),a[b][d]||(a[b][d]=[]),a[b][d].push(c)},listenerCount:function(a,b,c){return c=c||"def",a[b]&&a[b][c]?a[b][c].length:0},off:function(b,c,d,e){if(c&&d&&e)b[c][e]=a(b[c][e],d);else if(c&&d&&!e)for(var f in b[c])b[c][f]=a(b[c][f],d);else if(!c||d||e){if(c&&!d&&e)b[c][e]=[];else if(!c&&!d&&e)for(var g in b)b[g][e]=[]}else b[c]={def:[]}}}}),m("ustream-ums/lib/eventedlog",["ustream-ums/lib/bind","ustream-ums/lib/event"],function(a,b){function c(a,c){function h(){var h=Array.prototype.slice.apply(arguments);if(h.unshift(new j,c),b.listenerCount(d[a],f))b.emit(d[a],f,h);else{for(e[a]=e[a]||[];e[a].length>g;)e[a].shift();e[a].push(h)}}return d[a]=d[a]||{},h.onLog=function(c){if(b.on(d[a],f,c),e[a]){for(;e[a].length;)b.emit(d[a],f,e[a].shift());delete e[a]}},h}var d={},e={},f="log",g=30;return c}),m("ustream-ums/conf/consts",[],function(){return{VERSION:"3.1.4"}}),m("ustream-ums/vendor/env",[],function(){function b(){return typeof c.getElementById!==z&&typeof c.getElementsByTagName!==z&&typeof c.createElement!==z}function e(){return I?/win/.test(I):/win/.test(H)}function f(){return I?/mac/.test(I):/mac/.test(H)}function g(){return!(h()||i()||j()||k())}function h(){var a=/android/i.test(H);return a&&(a=H.match(/android (\d*)\.(\d*)?\.?(\d*)/i),a.shift()),a}function i(){var a=/iphone|ipad|ipod/.test(H);return a&&(a=H.match(/os (\d*)?\_?(\d*)?\_?(\d*)/i),a.shift()),a}function j(){return/BB10(.*)Mobile/i.test(H)}function k(){return H.indexOf("playstation")>-1}function l(){var a=/chrome/i.test(H);return a&&(a=H.match(/chrome\/(\d*)\.(\d*)?\.?(\d*)/i),a.shift()),a}function m(){return"undefined"!=typeof opera&&"[object Opera]"===opera.toString()}function n(){return/firefox/.test(H)}function o(){var a=c.getElementsByTagName("html")[0],b=a.className.indexOf("ie ")>-1;return b||(b=H.indexOf("trident")>-1),b}function p(){return/safari/.test(H)&&!l()}function q(){return/https/.test(J.protocol)}function r(){return!!/webkit/.test(H)&&parseFloat(H.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1"))}function s(a){var b,c;return b=H.match(/trident\/(\d)/i),c=H.match(/compatible/i),c=!!c&&c.length>0,a&&!c&&b&&b[1]&&"7"===b[1]}function t(b){var c=typeof a.WebSocket;return c=c===A||c===B,c&&typeof a.WebSocket.prototype.CLOSING===z&&(c=!1),b&&!c&&(b[0]>4||4===b[0]&&b[1]>2)&&(c=!0),c}function u(){var a="a";try{return localStorage.setItem(a,a),localStorage.removeItem(a),!0}catch(b){return!1}}function v(){var a=!1;try{a=c.createElement("input").hasOwnProperty("placeholder")}catch(b){a=!1}return a}function w(){var a,b=G&&G[E]&&G[E].enabledPlugin&&G[E].enabledPlugin.filename||"";return b=b.toLowerCase(),a="pepflashplayer.dll"===b||"libpepflashplayer.so"===b||"pepperflashplayer.plugin"===b||"chrome.plugin"===b.slice(-13)}function x(){var b,c;if(typeof a.ActiveXObject===z)return!1;try{if(b=new a.ActiveXObject(D))return c=b.GetVariable("$version"),!c||(c=c.split(" ")[1].split(","),[parseInt(c[0],10),parseInt(c[1],10),parseInt(c[2],10)])}catch(d){}return!1}function y(){var a,b=[0,0,0];return typeof F.plugins!==z&&typeof F.plugins[C]===B?(a=F.plugins[C].description,!a||typeof G!==z&&G[E]&&!G[E].enabledPlugin||(a=a.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),b[0]=+a.replace(/^(.*)\..*$/,"$1"),b[1]=+a.replace(/^.*\.(.*)\s.*$/,"$1"),b[2]=/[a-zA-Z]/.test(a)?+a.replace(/^.*[a-zA-Z]+(.*)$/,"$1"):0)):x()&&(b=x()),"000"===b.join("")&&(b=!1),b}var z="undefined",A="function",B="object",C="Shockwave Flash",D="ShockwaveFlash.ShockwaveFlash",E="application/x-shockwave-flash",F=d,G=F.mimeTypes,H=F.userAgent.toLowerCase(),I=F.platform.toLowerCase(),J=a.location;return function(){var a=i(),c=o();return{w3:b(),win:e(),mac:f(),desktop:g(),ios:a,android:h(),blackberry:j(),playstation:k(),chrome:l(),opera:m(),ff:n(),safari:p(),ie:c,ssl:q(),wk:r(),edgeIe:s(c),ws:t(a),storage:u(),placeholder:v(),adblock:!1,swf:y(),flashPPAPI:w(),flashActiveX:x(),nav:{appCodeName:F.appCodeName,appName:F.appName,appVersion:F.appVersion,cpuClass:F.cpuClass,platform:F.platform,product:F.product,userAgent:F.userAgent,vendor:F.vendor,vendorSub:F.vendorSub}}}()}),m("ustream-ums/conf/rpin",["ustream-ums/vendor/env"],function(a){return function(){var b="_rpin.0";return a.storage&&(b=localStorage.getItem("umte_rpin"),b||(b="_rpin."+i.ceil(1e15*i.random()),localStorage.setItem("umte_rpin",b))),b}()}),JSON=JSON||a.JSON,"object"!=typeof JSON&&(JSON={}),function(){"use strict";function b(a){return a<10?"0"+a:a}function c(){return this.valueOf()}function d(a){return g.lastIndex=0,g.test(a)?'"'+a.replace(g,function(a){var b=k[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function e(a,b){var c,f,g,j,k,m=h,n=b[a];switch(n&&"object"==typeof n&&"function"==typeof n.toJSON&&(n=n.toJSON(a)),"function"==typeof l&&(n=l.call(b,a,n)),typeof n){case"string":return d(n);case"number":return isFinite(n)?String(n):"null";case"boolean":case"null":return String(n);case"object":if(!n)return"null";if(h+=i,k=[],"[object Array]"===Object.prototype.toString.apply(n)){for(j=n.length,c=0;c<j;c+=1)k[c]=e(c,n)||"null";return g=0===k.length?"[]":h?"[\n"+h+k.join(",\n"+h)+"\n"+m+"]":"["+k.join(",")+"]",h=m,g}if(l&&"object"==typeof l)for(j=l.length,c=0;c<j;c+=1)"string"==typeof l[c]&&(f=l[c],g=e(f,n),g&&k.push(d(f)+(h?": ":":")+g));else for(f in n)Object.prototype.hasOwnProperty.call(n,f)&&(g=e(f,n),g&&k.push(d(f)+(h?": ":":")+g));return g=0===k.length?"{}":h?"{\n"+h+k.join(",\n"+h)+"\n"+m+"}":"{"+k.join(",")+"}",h=m,g}}"function"!=typeof j.prototype.toJSON&&(j.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+b(this.getUTCMonth()+1)+"-"+b(this.getUTCDate())+"T"+b(this.getUTCHours())+":"+b(this.getUTCMinutes())+":"+b(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=c,Number.prototype.toJSON=c,String.prototype.toJSON=c);var f,g,h,i,k,l;"function"!=typeof JSON.stringify&&(g=/[\\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,k={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(a,b,c){var d;if(h="",i="","number"==typeof c)for(d=0;d<c;d+=1)i+=" ";else"string"==typeof c&&(i=c);if(l=b,b&&"function"!=typeof b&&("object"!=typeof b||"number"!=typeof b.length))throw new Error("JSON.stringify");return e("",{"":a})}),"function"!=typeof JSON.parse&&(f=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,JSON.parse=function(b,c){function d(a,b){var e,f,g=a[b];if(g&&"object"==typeof g)for(e in g)Object.prototype.hasOwnProperty.call(g,e)&&(f=d(g,e),void 0!==f?g[e]=f:delete g[e]);return c.call(a,b,g)}var e;if(b=String(b),f.lastIndex=0,f.test(b)&&(b=b.replace(f,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(b.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return e=a.eval("("+b+")"),"function"==typeof c?d({"":e},""):e;throw new SyntaxError("JSON.parse")})}(),m("ustream-ums/vendor/json2",[],function(){return JSON}),m("ustream-ums/lib/emit",[],function(){var a="undefined";return function(b,c,d){var d=Array.prototype.slice.call(arguments,2);if(b&&b[c]&&b[c].length>0){var e,f,g=b[c].length;for(e=0;e<g;e++)f=b[c][e],typeof d!==a?f.apply(null,d):f.call(null)}}}),m("ustream-ums/lib/dom/addEventListener",[],function(){return function(b,d,e){if(b.attachEvent){var f=function(a){a.target=a.srcElement,a.currentTarget=b,e.handleEvent?e.handleEvent(a):e.call(b,a)};if("DOMContentLoaded"==d){var g=function(a){"complete"==c.readyState&&f(a)};if(c.attachEvent("onreadystatechange",g),"complete"==c.readyState){var h=new Event;h.srcElement=a,g(h)}}else b.attachEvent("on"+d,f)}else b.addEventListener(d,e);return b}}),m("ustream-ums/lib/dom/removeEventListener",[],function(){return function(a,b,c){a.detachEvent?"DOMContentLoaded"==b?a.detachEvent("onreadystatechange",eventListener.wrapper):a.detachEvent("on"+b,eventListener.wrapper):a.removeEventListener(b,c)}}),m("ustream-ums/ums/websocket",["ustream-ums/lib/emit","ustream-ums/lib/eventedlog","ustream-ums/lib/dom/addEventListener","ustream-ums/lib/dom/removeEventListener"],function(a,c,d,g){function h(b,h,p,q){var r,s=!!p&&p.ssl,t="";return q=q||"",i||s?t=o.replace("%host%",h).replace("%app%",q):(r=h.indexOf(":")>-1?"":":"+m[0],t=n.replace("%port%",r).replace("%host%",h).replace("%app%",q)),function(h){function i(){r&&(v(" clear connection object"),g(r,k.OPEN,n),g(r,k.ERROR,o),g(r,k.CLOSE,m),g(r,k.MESSAGE,p),t={},r.readyState<2&&r.close()),u=!1,r=null}function m(b){v(" closed",[l[""+b.code],b.message,b.wasClean]),a(t,k.CLOSE,b),i()}function n(){f(s),v(" opened"),u=!0,a(t,k.OPEN),a(t,k.READY)}function o(b){v(" error",b),u=!1,a(t,k.ERROR,b)}function p(b){a(t,k.MESSAGE,b)}function q(){v(" timeout"),a(t,k.TIMEOUT),i()}var r,s,t={},u=!1,v=c(b,"ums/websocket");return v("url",h),{event:k,opened:function(){return u},open:function(){v(" opening"),r=new WebSocket(h),d(r,k.OPEN,n),d(r,k.ERROR,o),d(r,k.CLOSE,m),d(r,k.MESSAGE,p),s=e(q,j)},send:function(a){v(" send",a);try{r.send(a)}catch(b){}},close:function(){v(" close"),r&&i()},on:function(a,b){t[a]||(t[a]=[]),t[a].push(b)}}}(t)}var i=/https/.test(b.protocol),j=5e3,k={OPEN:"open",ERROR:"error",CLOSE:"close",MESSAGE:"message",TIMEOUT:"timeout",READY:"ready"},l={1000:"CLOSE_NORMAL",1001:"CLOSE_GOING_AWAY",1002:"CLOSE_PROTOCOL_ERROR",1003:"CLOSE_UNSUPPORTED",1005:"CLOSE_NO_STATUS",1006:"CLOSE_ABNORMAL",1007:"CLOSE_INCONSISTENT_DATA_RECEIVED",1008:"CLOSE_POLICY_VIOLATE",1009:"CLOSE_TOO_LARGE",1010:"CLOSE_MISSING_EXTENSION",1011:"CLOSE_UNEXPECTED_CONDITION",1015:"CLOSE_FAILED_TLS_HANDSHAKE"},m=[1935,80],n="ws://%host%%port%/%app%",o="wss://%host%/%app%";return h.prefix="ws"+(i?"s":""),h}),m("ustream-ums/lib/polyfill/array/map",[],function(){var a=function(a,b){var c,d,e;if(null==this)throw new TypeError(" this is null or not defined");var f=Object(this),g=f.length>>>0;if("function"!=typeof a)throw new TypeError(a+" is not a function");for(arguments.length>1&&(c=b),d=new Array(g),e=0;e<g;){var h,i;e in f&&(h=f[e],i=a.call(c,h,e,f),d[e]=i),e++}return d},b=Array.prototype.map||a;return function(a,c,d){return b.call(a,c,d)}}),m("ustream-ums/lib/polyfill/array/filter",[],function(){var a=function(a,b){"use strict";if(void 0===this||null===this)throw new TypeError;var c=Object(this),d=c.length>>>0;if("function"!=typeof a)throw new TypeError;for(var e=[],b=arguments.length>=2?arguments[1]:void 0,f=0;f<d;f++)if(f in c){var g=c[f];a.call(b,g,f,c)&&e.push(g)}return e},b=Array.prototype.filter||a;return function(a,c,d){return b.call(a,c,d)}}),m("ustream-ums/vendor/jsonp",[],function(){function a(a){var b=c.createElement("script"),d=!1;b.src=a,b.async=!0,b.onload=b.onreadystatechange=function(){d||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(d=!0,b.onload=b.onreadystatechange=null,b&&b.parentNode&&b.parentNode.removeChild(b))},f||(f=c.getElementsByTagName("head")[0]),f.appendChild(b)}function b(a){return g(a)}function d(c,d,e,f){h=(c||"").indexOf("?")===-1?"?":"&",d=d||{};for(i in d)d.hasOwnProperty(i)&&(h+=b(i)+"="+b(d[i])+"&");var g="json"+ ++j;return k[g]=function(a){e(a);try{delete k[g]}catch(b){}k[g]=null},a(c+h+(f||l.callbackName||"callback")+"="+g),g}function e(a){l=a}var f,h,i,j=0,k=this,l={callbackName:"jsoncallback"};return{get:d,init:e}}),m("ustream-ums/lib/xhr",[],function(){function b(){var b;return a.XMLHttpRequest&&(b=new a.XMLHttpRequest,b="withCredentials"in b&&b),b}function c(){return!!a.XDomainRequest&&new a.XDomainRequest}function d(){var b;if(a.ActiveXObject)try{b=new a.ActiveXObject("Microsoft.XMLHTTP")}catch(c){alert(c.message),b=null}return b}return function(){return b()||c()||d()||null}}),m("ustream-ums/ums/longpoll",["ustream-ums/lib/eventedlog","ustream-ums/lib/polyfill/array/map","ustream-ums/lib/polyfill/array/filter","ustream-ums/lib/event","ustream-ums/lib/bind","ustream-ums/vendor/json2","ustream-ums/vendor/jsonp","ustream-ums/vendor/env","ustream-ums/lib/xhr"],function(a,c,d,e,f,h,i,k,l){function m(a,b,c){var d="";return d=o||b?u:t,d.replace("%host%",a).replace("%app%",c)}function n(b,n,o,t){var u=!!o&&o.ssl,v=!1;t=t||"";var w=m(n,u,t);
return function(n){function o(){return T+=1}function u(){return Y+=1,"req."+Y}function w(a){return g(a)}function x(a){var b=h.parse(a);"connect"===b.cmd&&(R.media=b.args[0].media,R.application=b.args[0].application,R.appId=b.args[0].appId,R.appVersion=b.args[0].appVersion,b.args[0].debug&&(R.debug=b.args[0].debug),Q=!1,y(b.args[0]))}function y(a){var b=[],d="",e={};if(!Q){if(W.connectionId?e.connectionId=W.connectionId:e=a,U.length>0){var f={},g=[];c(U,function(a){f[a.cmd]=a});for(var i in f)g.push(f[i]);U=g,b=c(U,function(a){return a.order}),e.cmds=h.stringify(U)}S=+new j,d=W.host?m(W.host,null,t):n,O("requestUrl",[d,e]),s?z(d,e,b):A(d,e,b),delete a.cmds}}function z(a,b,c){var d,e,f=[];for(e in b)f.push(w(e)+"="+w(b[e]));d=a+"?"+f.join("&");var g=l();g.open("GET",d,!0),g.queueId=u(),g.commandOrder=c,g.timeout=r,g.onload=B,g.ontimeout=F,g.onerror=J,k.ie&&!k.edgeIe||g.setRequestHeader("Content-type","application/x-www-form-urlencoded"),g.send(),X.push(g.queueId),O("sent over xhr",g.queueId)}function A(a,b,c){i.get(a,b,function(a){E(a,c)},"callback"),O(" sent over JSONP")}function B(a){var b,c=a&&a.target?a.target:this,d=c.responseText;O("response for",c.queueId),C(a.target);try{b=h.parse(d),O("commands",[c.queueId,c.commandOrder]),E(b,c.commandOrder)}catch(a){O("JSON parse error on state change",d)}}function C(a){var b=X.indexOf(a.queueId);b!==-1&&X.splice(b,1)}function D(){return 0!==X.length}function E(a,b){var c=a.length,e=!1,f=0;if(!Q){for(U=d(U,function(a){return b.indexOf(a.order)<0});f<c;f++)if("warning"===a[f].cmd)switch(O("warning response",a[f].args[0].message||""),a[f].args[0].code){case"INVALID_CONNECTIONID":H({code:1001});break;case"OVERRIDE":e=!0;break;default:e=!0}else K(a[f]);v&&0===U.length?L():e||D()||y(R)}}function F(a){O(" timeout",a),C(a.target),D()||H({code:1001})}function G(){O(" clear connection object"),Q=!0}function H(a){O(" closed"),P=!1,p(N,q.CLOSE,a),G()}function I(){O(" opened"),P=!0}function J(a){O(" error",a),C(a.target),p(N,q.ERROR),D()||(H({code:1001}),G())}function K(a){return O("onMessage",a),"tracking"===a.cmd?(W=a.args[0],O("tracking",W),y(R),P=!0,I(),void p(N,q.READY,{host:W.host,connectionId:W.connectionId})):void p(N,q.MESSAGE,a)}function L(){p(N,q.FADED,{queue:V,connectionId:W.connectionId,host:W.host})}function M(a){if(O(" send",a),!P)return void x(a);a=h.parse(a);var b={cmd:a.cmd,args:a.args,order:o()};v?V.push(b):(U.push(b),(a&&a.cmd&&"playing"===a.cmd||!D())&&y(R,b.order))}var N={},O=a(b,"ums/longpoll"),P=!1,Q=!0,R={},S=0,T=0,U=[],V=[],W={},X=[],Y=0;return O("url ",n),{event:q,opened:function(){return P},open:function(){p(N,q.OPEN)},send:M,close:function(){O(" close"),H({code:1e3})},fadeOut:function(){v=!0},on:f(e.on,null,N)}}(w)}var o=/https/.test(b.protocol),p=e.emit,q={OPEN:"open",ERROR:"error",CLOSE:"close",MESSAGE:"message",TIMEOUT:"timeout",READY:"ready",FADED:"faded",PING:"ping",PONG:"pong",ACCEPT:"accept",REJECT:"reject",CONNECT:"connect",MODULEINFO:"moduleinfo"},r=3e4,s=!0,t="http://%host%/%app%",u="https://%host%/%app%";return n.prefix="lp"+(o?"s":""),n}),m("ustream-ums/ums/protocolCheck",["ustream-ums/ums/websocket","ustream-ums/ums/longpoll","ustream-ums/lib/bind","ustream-ums/lib/event"],function(a,b,c,d){var e={WEBSOCKET:"websocket",LONGPOLL:"longpoll"},f={SUCCESS:"success",FAIL:"fail"},g=d.emit;return function(){function h(){g(r,f.SUCCESS)}function i(){l("Error")}function j(){l("Timeout")}function k(c,d){if(p=c,d===e.WEBSOCKET)q=a;else{if(d!==e.LONGPOLL)return void g(r,f.FAIL,{reason:"Protocol ("+d+") does not exist"});q=b}o=q(p,null,"connectioncheck"),o.on(o.event.OPEN,h),o.on(o.event.ERROR,i),o.on(o.event.TIMEOUT,j),o.open()}function l(a){g(r,f.FAIL,{reason:a,host:p})}function m(){o&&o.close(),o=null,q=null}function n(){r=null,m()}var o,p,q,r={};return{events:f,protocols:e,test:k,destroy:n,on:c(d.on,null,r)}}}),m("ustream-ums/ums/connection",["ustream-ums/vendor/env","ustream-ums/vendor/json2","ustream-ums/lib/eventedlog","ustream-ums/lib/event","ustream-ums/lib/bind","ustream-ums/lib/internals","ustream-ums/ums/protocolCheck","ustream-ums/ums/websocket","ustream-ums/ums/longpoll"],function(a,b,c,d,g,h,j,k,l){function m(a){return"live"}function n(a,b){var c,d=u;return a.flot?a.flot:(/([0-9]{1,3}\.){3}[0-9]{1,3}/.test(b)&&(d=b),c=d.replace("%rnd%",i.round(1e8*i.random())).replace("%mediaId%",a.media).replace("%mediaType%",a.application).replace("%protocolPrefix%",v.prefix).replace("%cluster%",b))}function o(a,b){return i.floor(i.random()*(b+1-a)+a)}function p(a,b){a.connection=b}var q="undefined",r=function(){},s=d.emit,t={OPEN:"open",PING:"ping",PONG:"pong",ACCEPT:"accept",REJECT:"reject",CONNECT:"connect",MODULEINFO:"moduleinfo",STATUS:"status",DU_RESPONSE:"datauploadresponse",CLOSE:"close"},u="r%rnd%-1-%mediaId%-%mediaType%-%protocolPrefix%-%cluster%.ums.ustream.tv",v=r,w=200;return function(r,u){function x(a,b){var c="|"+fa.join("|")+"|";c.indexOf("|"+a+"|")>-1&&(ga[a]=b)}function y(){var a,b,c;for(oa("resend commands after reconnect",ga),a=0;a<fa.length;++a)b=fa[a],ga.hasOwnProperty(b)&&(c=ga[b],C(b,c))}function z(a){var b;a&&($=a),u.flot&&($.flot=u.flot),V||(V=m($)),_&&_.opened&&_.opened()&&_.close(),b=W&&W.host?W.host:n($,V),p(na,{host:b,protocol:v.prefix}),_=v(r,b,null,"1/ustream"),_.on(_.event.MESSAGE,I),_.on(_.event.ERROR,J),_.on(_.event.CLOSE,S),_.on(_.event.OPEN,R),_.on(_.event.TIMEOUT,K),_.on(_.event.READY,Q),_.on(c.type,g(c,null,Z)),oa("open",b),_.open()}function A(){ma=!1,la=!1,ka=!1,_={},ea=[]}function B(){ia+=1,ja+=1,ia>5&&(ia=5);var a=i.pow(ha,ia),b=o(1,5);oa(r+" Trying to reconnect in "+(a+b)+" seconds"),e(z,1e3*(a+b))}function C(a,c){if(_&&_.send&&(v!==k||_.opened())){x(a,c),oa(r+" send");var d={cmd:a};typeof c!==q&&(d.args=c),$.debug&&(d.args.debug=!0),_.send(b.stringify(d))}else for(oa(r+" no instance, store to queue"),ea.push(arguments);ea.length>w;)oa("queue is full, removing old data"),ea.shift()}function D(){var a;for(oa("send stored data from queue ("+ea.length+" items)");ea.length;)a=ea.shift(),C.apply(null,a)}function E(){oa(r+" closing"),f(Y),_&&_.close&&(_.close(),_=null),A()}function F(){if(0!==ja){var a={error:[{type:"umsDisconnected",details:{retryCount:ja,longpollFallback:ka}}]};C("stat",a),ja=0}}function G(a){ma=!1,la=!0,a&&s(Z,a),D(),F()}function H(a){return a.length&&a[0].reject?a[0].reject:a}function I(a){if(_){var c=a.data?b.parse(a.data):a,d=c.cmd||c.functionName||c.type,e=c.args||c.parameters||c.data||[];switch(d=d.toLowerCase(),oa(r+" message",[d,e]),d){case t.PING:C(t.PONG,e);break;case t.ACCEPT:G(d);break;case t.REJECT:if(ma=!0,e=H(e),!0===U(e,r)){_.close(),A(),z();break}s(Z,d,e);break;case t.MODULEINFO:case t.STATUS:case t.DU_RESPONSE:la||G(),s(Z,d,e)}}}function J(){W=null}function K(){W=null,_.close(),v=l,z()}function L(a){W=a,_.close(),v=k,z()}function M(){oa("protocol was tested successfully"),O(),_.on(_.event.FADED,L),_.fadeOut()}function N(a){oa("protocol was tested but failed on host:"+a.host+", reason: "+a.reason),O(),ca=i.min(2*ca,da),Y=e(P,ca,a.host)}function O(){X&&(X.destroy(),X=null)}function P(b){f(Y),O(),a.ws&&v===l&&(X=j(),X.on(X.events.SUCCESS,M),X.on(X.events.FAIL,N),X.test(b,X.protocols.WEBSOCKET))}function Q(b){var c=$.flot;!c&&b&&b.host&&(c=b.host),y(),a.ws&&c&&P(c)}function R(){var a,b,c;if(ia=0,aa=0,v===l&&(u.longpoll=!0),s(Z,t.OPEN,{options:u}),W&&v===k)for(C("connect",[{upgradeFromConnectionId:W.connectionId}]),b=W.queue,a=0;a<b.length;a++)c=b[a],C(c.cmd,c.args);W=null,C(t.CONNECT,[$])}function S(a){var b=!1,c=!1;ma||(s(Z,t.CLOSE,{closeEvent:a}),a&&a.code>1008?c=!0:a&&a.code>1e3&&(v===k?aa>ba?c=!0:(b=!0,aa++):b=!0),b&&B(),v===k&&c&&(oa(r+" fallbacking to longpoll connectionInstance",null,!0),ka=!0,ja=2,v=l,A(),z()))}function T(a){V=a}function U(a,b){var c,d=!1;return a.map(function(a){if(a.cluster){var e=a.cluster;oa(b+" CLUSTER SWITCH from: "+c+" to: "+e.name,null,!0),c=e.name,e.umsIps&&(c=e.umsIps[0]),T(c),d=!0}}),d}var V,W,X,Y,Z={},$={},_={},aa=0,ba=2,ca=2e3,da=512e3,ea=[],fa=["playing"],ga={},ha=2,ia=0,ja=0,ka=!1,la=!1,ma=!1,na=h(r);u=u?u:{};var oa=c(r,"ums/connection",Z);return v=a.ws&&!u.longpoll?k:l,{event:t,send:C,open:z,close:E,on:g(d.on,null,Z),destroy:function(){Z=null,E()}}}}),m("ustream-ums/ums/client",["ustream-ums/lib/eventedlog","ustream-ums/lib/event","ustream-ums/lib/bind","ustream-ums/lib/merge","ustream-ums/ums/connection"],function(a,b,c,d,e){function f(a){var b=[a.app,a.media];return a.highlightId&&b.push(a.highlightId),b.join(".")}function g(g){function k(a){j(n,h.REJECT,a)}function l(a){j(n,h.UPDATE,a)}function m(a){j(n,h.DU_RESPONSE,a)}var n={},o=g.highlightId,p=f(g),q=a(p,"ums/client"),r=e(p,g),s=d(i,g.connectParams);return s.rsid=g.rsid,s.rpin=g.rpin,s.referrer=g.referrer,r.on(r.event.OPEN,c(j,null,n,h.OPEN)),r.on(r.event.REJECT,k),r.on(r.event.MODULEINFO,l),r.on(r.event.STATUS,c(j,null,n,h.STATUS)),r.on(r.event.DU_RESPONSE,m),r.on(r.event.CLOSE,c(j,null,n,h.CLOSE)),{instanceId:p,mediaId:p,event:h,send:r.send,on:function(a,c,d){a===h.LOG?q.onLog(c):b.on(n,a,c,d)},connect:function(){var a=g.hash,b=g.password;s.media=g.media+"",s.application=g.app,o&&(s.highlightId=o),g.sessionId&&(s.session=g.sessionId),a&&(s.hash=a),b&&(s.password=b),g.umsDebugMode&&(s.debug=!0),g.bdtools&&(s.sessionSource="bdtools"),q(p+" connect",s,!0),r.open(s)},close:function(){q(p+" closing",null,!0),r&&r.close()},destroy:function(){r&&r.destroy(),r=null}}}var h={OPEN:"open",REJECT:"ums_reject",UPDATE:"ums_update",STATUS:"ums_status",DU_RESPONSE:"datauploadresponse",CLOSE:"close",LOG:"log"},i={type:n[159],appId:11,appVersion:2},j=b.emit;return g}),m(n[75],["ustream-ums/lib/internals","ustream-ums/lib/merge","ustream-ums/lib/eventedlog","ustream-ums/conf/consts","ustream-ums/conf/rpin","ustream-ums/lib/event","ustream-ums/lib/bind","ustream-ums/ums/client"],function(a,b,c,d,e,f,g,h){function j(){return i.ceil(1e10*i.random()).toString(16)}function k(){return o=o||j(),o+":"+j()}function l(a){a.version=d.VERSION}function m(b){var d,f,g;return d=h({app:b.app,media:b.id,highlightId:b.hid,sessionId:b.sessionId,hash:b.hash,password:b.password,umsDebugMode:b.umsDebugMode,bdtools:b.bdtools,rsid:k(),rpin:e,referrer:b.referrer||"unknown",longpoll:b.longpoll,connectParams:b.connectParams||{},flot:b.flotAddress}),g=c(d.instanceId,"ums"),g("create new ",{instanceId:d.instanceId,configObj:b},!0),f=a(d.instanceId),l(f),{event:d.event,mediaId:d.mediaId,instanceId:d.instanceId,on:d.on,send:d.send,connect:d.connect,close:d.close,destroy:function(){delete p[d.instanceId],d.destroy()},internals:f}}function n(a){var b,c;return"string"==typeof a?(b=a,p[b]||null):(c=m(a),p[c.instanceId]||(p[c.instanceId]=c),p[c.instanceId])}var o,p={};return n}),m(n[74],[n[75],n[13]],function(a,b){var c=b(n[74]),e="stats";return function(b){function f(a){o.send(e,a)}function g(a){c("playing",a),o.send("playing",[a])}function h(a){c("buffering",a);var b=[{common:{bufempty:a}}];f(b)}function i(){c("adblocker");var a=d,b=[{error:[{type:"adblocker",details:{useragent:a.userAgent.toLowerCase(),platform:a.platform.toLowerCase()}}]}];f(b)}function j(a){c("mediaError");var b=d,e=[{error:[{type:"htmlMediaError",details:{error:a,useragent:b.userAgent.toLowerCase(),platform:b.platform.toLowerCase()}}]}];f(e)}function k(a,b){c("getStreamError");var e=d,g=[{error:[{type:"htmlGetStreamError",details:{url:a,status:b,useragent:e.userAgent.toLowerCase(),platform:e.platform.toLowerCase()}}]}];f(g)}function l(a,b){}function m(){c("apistats",!0);var a=[{common:{embedapi:!0}}];f(a)}function n(a){c("verizonInviteMethod",a);var b=[{common:{verizonInviteMethod:a}}];f(b)}c("setup with ",b);var o=a(b);return{playing:g,buffering:h,adBlocker:i,umsDisconnected:l,verizonInviteMethod:n,apiStats:m,mediaError:j,getStreamError:k}}}),m(n[67],[n[28],n[26],n[17],n[13],n[32],n[33],n[68],n[65],n[66],n[70],n[21],n[71],n[72],n[74],n[8]],function(a,b,c,g,h,i,j,k,l,m,o,p,q,r,s){function t(){if(!K&&!L){E("start load rulesets"),L=!0;var d=b.getByContent("meta"),e=(b.getByContent("broadcaster"),d.adFree||b.adFree);return e?(E("load - adfree "+(d.adFree?"broadcaster":n[159])+" - cancelling"),void v()):void j.getAdverts([c.id(),c.app(),d.countryCode,c.hid,D.locale,a,w()],u,v,5e3)}}function u(a){E("getAdverts success",a);var b;a.success&&a.ads&&(b=p(a.ads)),v(b)}function v(a){var d=a||!1,e=r(c.app()+"."+c.id());L=!1,K=!0,b.setByContent("ads",d),!q.hasSdk()&&(d.pre||d.mid||d.post)?m(q.getSdkUrl(),function(){q.sdkLoaded(),O&&(C(),O=!1)},function(){q.sdkError(),e.adBlocker(),b.setByContent("ads",!1),O&&(C(),O=!1)}):O&&(C(),O=!1)}function w(){for(var a=d,b=a.userAgent.toLowerCase(),c=!1,e=0,f=H.length;e<f;e++)c=c||new RegExp(""+H[e]).test(b);return c?"html5noclick":"html5"}function x(a){var c,d;f(S),c=a,E("run ad",c),k(!1),d=c.provider===I.d,d?y(c):(M&&b.isVid()&&(Q=T.currentTime),M=!1,o(F,G.RESETVIEWER),N&&(N=!1,b.autoplay=!1,c.paused=!0),A(q,c))}function y(a){R=1e3*+a.duration,E("delay started",a.duration),b.debug&&(R=1e4),l(!0),o(F,G.RESUMECONTENT,[Q]),M=!0,S=e(z,R)}function z(){E("delay finished"),R=0,C()}function A(a,c){var d=b.getByContent("ads"),e=d.info,f=a.create(c,e);f.onError(C),f.onStart(function(){b.autoplay=!0,k(!1)}),f.onFinish(C),f.onClickThrough(function(){N=!0}),b.autoplay?f.run():(P=f,h(T,"play",B))}function B(a){a.stopPropagation(),a.preventDefault(),a.target.playing||P&&(l(!1),b.autoplay=!0,P.run(),P=null,i(T,"play",B))}function C(){E("next ad item");var a=b.getByContent("ads"),c=!1;a&&(c=a.next(),c?x(c):(i(T,"play",B),l(!0),o(F,G.RESUMECONTENT,[Q,N])))}var D=ustream.vars,E=g("logic/advert"),F={},G={RESETVIEWER:"advert_reset_viewer",RESUMECONTENT:"advert_resume_content"},H=["ipod","iphone"],I={a:"adaptv",d:"delay"},J={pre:"pre",mid:"mid",post:"post"},K=!1,L=!1,M=!1,N=!1,O=!1,P=null,Q=0,R=0,S=0,T={};return function(){return{event:G,on:function(a,b){F[a]||(F[a]=[]),F[a].push(b)},pos:J,load:t,start:function(a){var c=b.getByContent("meta"),d=c.adFree||b.adFree;return E("start - adFree values (channel / user):",[c.adFree,b.adFree]),d?void E("start - adfree "+(c.adFree?"broadcaster":n[159])+" - cancelling"):(T=a,!K||L?void(O=!0):(E("starting"),void C()))},watch:function(a){},reset:function(){E("reset"),l(!0),K=!1,L=!1,M=!1,N=!1,O=!1,R=0,f(S)}}}()}),m(n[76],[n[26],n[28],n[13],n[27],n[21],n[32],n[34],n[19],n[8]],function(d,e,f,g,h,i,j,k,l){function m(a,b){var c=/^https?:\/\//;return a=a.replace(c,""),b=b.replace(c,""),a===b}function n(a){return/(m|www)\.?(dev)?\.ustream\.tv/gi.test(a)}function o(b){t("message event received ",[b.origin,b.data]);var d,e=b.origin,f=a.location,i=c.referrer||f.href;if(!i)return void t("error: no referrer ");if(e===j(i)||m(e,f.host)){if("TOGGLE_DEBUG"===b.data)return void g();try{d=JSON.parse(b.data)}catch(b){d={}}if("CorsFrame"===d.id&&d.sessionId&&h(v,u.COMMAND,{cmd:"setSession",args:[d.sessionId,d.userBenefits.adfreeview||d.isPremium]}),t("origin ok, data received ",d),"setSession"===d.cmd&&!n(e))return;d.cmd&&h(v,u.COMMAND,d)}}function p(d,f){var g,h=e,i=c.referrer||b.href;if(a===a.parent&&(h=b.href,i=b.href),"progress"!==d&&t("send ",[d,f]),"ready"===d&&(w=!0),h&&(g=j(i))){var k={event:{}};d.property?k=d:k.event[d]=f,a.parent.postMessage(JSON.stringify(k),g)}}var q="undefined",r=function(){},s=$("#CorsFrame"),t=function(){},u={COMMAND:"api_command"},v={},w=!1;return typeof a.postMessage===q?{event:u,send:r,on:function(){}}:(i(a,"message",o),l.ssl||d.sitemode||s.attr("src",s.data("src")),k.on(k.types.EVENT,"*",function(a,b){p(a,b)}),function(){return{event:u,send:p,on:function(a,b){v[a]||(v[a]=[]),v[a].push(b)}}}())}),m(n[78],[],function(){function b(){var b;return a.XMLHttpRequest&&(b=new a.XMLHttpRequest,b="withCredentials"in b&&b),b}function c(){return!!a.XDomainRequest&&new a.XDomainRequest}function d(){var b;if(a.ActiveXObject)try{b=new a.ActiveXObject("Microsoft.XMLHTTP")}catch(c){alert(c.message),b=null}return b}return function(){return b()||c()||d()||null}}),m(n[77],[n[13],n[21],n[78],n[65],n[23],n[8]],function(a,b,c,d,g,h){function j(){A=0,f(B),f(C),f(D),B=0,C=0,D=0,E=!1}function k(a){var c=a.target;if(2===c.readyState){if(r("UHLS polling - status ",c.status),200===c.status)return c.abort(),A=1,b(s,t.SUCCESS,c.streamUrl),p(),void(E=!1);if(202===c.status)return r("UHLS polling - retry in 2 seconds"),c.abort(),d(!0),p(),C=e(g(m,null,c.streamUrl),y),void(E=!1);if(204===c.status){if(!E)return r("UHLS polling - retry in 10 seconds"),c.abort(),d(!0),p(),D=e(g(m,null,c.streamUrl),x),void(E=!0);r("UHLS polling - going offline"),d(!1),b(s,t.ERROR,204),E=!1}404===c.status&&(b(s,t.ERROR,404),p(),j())}}function l(a){var c,f=a.target;return A>6?(d(!1),void b(s,t.ERROR,408)):(d(!0),A+=1,c=i.pow(u,A),r("UHLS timeout. Retrying in "+c+" secs"),p(),void(B=e(g(m,null,f.streamUrl),c*w)))}function m(a){return r("load",a),a?z&&typeof z.readyState!==q?void r("current request already sent, abort first"):(z=c(),z.streamUrl=a,z.timeout=v,z.onreadystatechange=k,z.ontimeout=l,z.onerror=l,a&&h.playstation&&(a=a.replace("/iphone/","/sony/")),z.open("GET",a,!0),z.setRequestHeader("Content-type","application/x-www-form-urlencoded"),z.send(),void d(!0)):void r("no url")}function o(){r("abort"),f(B),f(C),f(D),z&&z.abort&&z.abort(),p()}function p(){z=null}var q="undefined",r=a(n[77]),s={},t={SUCCESS:"mte_getstream_success",ERROR:"mte_getstream_error"},u=2,v=5e3,w=1e3,x=1e4,y=2e3,z=null,A=0,B=0,C=0,D=0,E=!1;return function(){return{event:t,load:m,abort:o,on:function(a,b){s[a]||(s[a]=[]),s[a].push(b)},setPollingInterval:function(a){y=a},setRetryTimeout:function(a){w=a},setOfflineTimeout:function(a){x=a},setRetryCount:function(a){A=a}}}()}),!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof a?a:this,function(a,b){function c(a){var b=a.length,c=Y.type(a);return"function"!==c&&!Y.isWindow(a)&&(!(1!==a.nodeType||!b)||("array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a))}function d(a,b,c){if(Y.isFunction(b))return Y.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return Y.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(ea.test(b))return Y.filter(b,a,c);b=Y.filter(b,a)}return Y.grep(a,function(a){return Y.inArray(a,b)>=0!==c})}function h(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}function k(a){var b=ma[a]={};return Y.each(a.match(la)||[],function(a,c){b[c]=!0}),b}function l(){ga.addEventListener?(ga.removeEventListener("DOMContentLoaded",n,!1),a.removeEventListener("load",n,!1)):(ga.detachEvent("onreadystatechange",n),a.detachEvent("onload",n))}function n(){(ga.addEventListener||"load"===event.type||"complete"===ga.readyState)&&(l(),Y.ready())}function o(a,b,c){if(void 0===c&&1===a.nodeType){var d="data-"+b.replace(ra,"-$1").toLowerCase();if(c=a.getAttribute(d),"string"==typeof c){try{c="true"===c||"false"!==c&&("null"===c?null:+c+""===c?+c:qa.test(c)?Y.parseJSON(c):c)}catch(e){}Y.data(a,b,c)}else c=void 0}return c}function p(a){var b;for(b in a)if(("data"!==b||!Y.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function q(a,b,c,d){if(Y.acceptData(a)){var e,f,g=Y.expando,h=a.nodeType,i=h?Y.cache:a,j=h?a[g]:a[g]&&g;if(j&&i[j]&&(d||i[j].data)||void 0!==c||"string"!=typeof b)return j||(j=h?a[g]=O.pop()||Y.guid++:g),i[j]||(i[j]=h?{}:{toJSON:Y.noop}),("object"==typeof b||"function"==typeof b)&&(d?i[j]=Y.extend(i[j],b):i[j].data=Y.extend(i[j].data,b)),f=i[j],d||(f.data||(f.data={}),f=f.data),void 0!==c&&(f[Y.camelCase(b)]=c),"string"==typeof b?(e=f[b],null==e&&(e=f[Y.camelCase(b)])):e=f,e}}function r(a,b,c){if(Y.acceptData(a)){var d,e,f=a.nodeType,g=f?Y.cache:a,h=f?a[Y.expando]:Y.expando;if(g[h]){if(b&&(d=c?g[h]:g[h].data)){Y.isArray(b)?b=b.concat(Y.map(b,Y.camelCase)):b in d?b=[b]:(b=Y.camelCase(b),b=b in d?[b]:b.split(" ")),e=b.length;for(;e--;)delete d[b[e]];if(c?!p(d):!Y.isEmptyObject(d))return}(c||(delete g[h].data,p(g[h])))&&(f?Y.cleanData([a],!0):W.deleteExpando||g!=g.window?delete g[h]:g[h]=null)}}}function s(){return!0}function t(){return!1}function u(){try{return ga.activeElement}catch(a){}}function v(a){var b=Ca.split("|"),c=a.createDocumentFragment();if(c.createElement)for(;b.length;)c.createElement(b.pop());return c}function w(a,b){var c,d,e=0,f=typeof a.getElementsByTagName!==pa?a.getElementsByTagName(b||"*"):typeof a.querySelectorAll!==pa?a.querySelectorAll(b||"*"):void 0;if(!f)for(f=[],c=a.childNodes||a;null!=(d=c[e]);e++)!b||Y.nodeName(d,b)?f.push(d):Y.merge(f,w(d,b));return void 0===b||b&&Y.nodeName(a,b)?Y.merge([a],f):f}function x(a){wa.test(a.type)&&(a.defaultChecked=a.checked)}function y(a,b){return Y.nodeName(a,"table")&&Y.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function z(a){return a.type=(null!==Y.find.attr(a,"type"))+"/"+a.type,a}function A(a){var b=Na.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function B(a,b){for(var c,d=0;null!=(c=a[d]);d++)Y._data(c,"globalEval",!b||Y._data(b[d],"globalEval"))}function C(a,b){if(1===b.nodeType&&Y.hasData(a)){var c,d,e,f=Y._data(a),g=Y._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;e>d;d++)Y.event.add(b,c,h[c][d])}g.data&&(g.data=Y.extend({},g.data))}}function D(a,b){var c,d,e;if(1===b.nodeType){if(c=b.nodeName.toLowerCase(),!W.noCloneEvent&&b[Y.expando]){e=Y._data(b);for(d in e.events)Y.removeEvent(b,d,e.handle);b.removeAttribute(Y.expando)}"script"===c&&b.text!==a.text?(z(b).text=a.text,A(b)):"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),W.html5Clone&&a.innerHTML&&!Y.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&wa.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.defaultSelected=b.selected=a.defaultSelected:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}}function E(b,c){var d,e=Y(c.createElement(b)).appendTo(c.body),f=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(e[0]))?d.display:Y.css(e[0],"display");return e.detach(),f}function F(a){var b=ga,c=Va[a];return c||(c=E(a,b),"none"!==c&&c||(Sa=(Sa||Y("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=(Sa[0].contentWindow||Sa[0].contentDocument).document,b.write(),b.close(),c=E(a,b),Sa.detach()),Va[a]=c),c}function G(a,b){return{get:function(){var c=a();if(null!=c)return c?void delete this.get:(this.get=b).apply(this,arguments)}}}function H(a,b){if(b in a)return b;for(var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=eb.length;e--;)if(b=eb[e]+c,b in a)return b;return d}function I(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=Y._data(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&ua(d)&&(f[g]=Y._data(d,"olddisplay",F(d.nodeName)))):(e=ua(d),(c&&"none"!==c||!e)&&Y._data(d,"olddisplay",e?c:Y.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function J(a,b,c){var d=ab.exec(b);return d?i.max(0,d[1]-(c||0))+(d[2]||"px"):b}function K(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=Y.css(a,c+ta[f],!0,e)),d?("content"===c&&(g-=Y.css(a,"padding"+ta[f],!0,e)),"margin"!==c&&(g-=Y.css(a,"border"+ta[f]+"Width",!0,e))):(g+=Y.css(a,"padding"+ta[f],!0,e),"padding"!==c&&(g+=Y.css(a,"border"+ta[f]+"Width",!0,e)));return g}function L(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=Ta(a),g=W.boxSizing&&"border-box"===Y.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=Ua(a,b,f),(0>e||null==e)&&(e=a.style[b]),Xa.test(e))return e;d=g&&(W.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+K(a,b,c||(g?"border":"content"),d,f)+"px"}function M(a,b,c,d){var e;if(Y.isArray(b))Y.each(b,function(b,e){c||qb.test(a)?d(a,e):M(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==Y.type(b))d(a,b);else for(e in b)M(a+"["+e+"]",b[e],c,d)}function N(a){return Y.isWindow(a)?a:9===a.nodeType&&(a.defaultView||a.parentWindow)}var O=[],P=O.slice,Q=O.concat,R=O.push,S=O.indexOf,T={},U=T.toString,V=T.hasOwnProperty,W={},X="1.11.1 -ajax,-ajax/jsonp,-ajax/load,-ajax/parseJSON,-ajax/parseXML,-ajax/script,-ajax/var/nonce,-ajax/var/rquery,-ajax/xhr,-manipulation/_evalUrl,-deprecated,-dimensions,-effects,-effects/Tween,-effects/animatedSelector,-effects/support,-event-alias,-wrap",Y=function(a,b){return new Y.fn.init(a,b)},Z=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,$=/^-ms-/,_=/-([\da-z])/gi,aa=function(a,b){return b.toUpperCase()};Y.fn=Y.prototype={jquery:X,constructor:Y,selector:"",length:0,toArray:function(){return P.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:P.call(this)},pushStack:function(a){var b=Y.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return Y.each(this,a,b)},map:function(a){return this.pushStack(Y.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(P.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:R,sort:O.sort,splice:O.splice},Y.extend=Y.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||Y.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(e=arguments[h]))for(d in e)a=g[d],c=e[d],g!==c&&(j&&c&&(Y.isPlainObject(c)||(b=Y.isArray(c)))?(b?(b=!1,f=a&&Y.isArray(a)?a:[]):f=a&&Y.isPlainObject(a)?a:{},g[d]=Y.extend(j,f,c)):void 0!==c&&(g[d]=c));return g},Y.extend({expando:"jQuery"+(X+i.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===Y.type(a)},isArray:Array.isArray||function(a){return"array"===Y.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!Y.isArray(a)&&a-parseFloat(a)>=0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},isPlainObject:function(a){var b;if(!a||"object"!==Y.type(a)||a.nodeType||Y.isWindow(a))return!1;try{if(a.constructor&&!V.call(a,"constructor")&&!V.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}if(W.ownLast)for(b in a)return V.call(a,b);for(b in a);return void 0===b||V.call(a,b)},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?T[U.call(a)]||"object":typeof a},globalEval:function(b){b&&Y.trim(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace($,"ms-").replace(_,aa)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,d){var e,f=0,g=a.length,h=c(a);if(d){if(h)for(;g>f&&(e=b.apply(a[f],d),e!==!1);f++);else for(f in a)if(e=b.apply(a[f],d),e===!1)break}else if(h)for(;g>f&&(e=b.call(a[f],f,a[f]),e!==!1);f++);else for(f in a)if(e=b.call(a[f],f,a[f]),e===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(Z,"")},makeArray:function(a,b){var d=b||[];return null!=a&&(c(Object(a))?Y.merge(d,"string"==typeof a?[a]:a):R.call(d,a)),d},inArray:function(a,b,c){var d;if(b){if(S)return S.call(b,a,c);for(d=b.length,c=c?0>c?i.max(0,d+c):c:0;d>c;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;)a[e++]=b[d++];if(c!==c)for(;void 0!==b[d];)a[e++]=b[d++];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,d){var e,f=0,g=a.length,h=c(a),i=[];if(h)for(;g>f;f++)e=b(a[f],f,d),null!=e&&i.push(e);else for(f in a)e=b(a[f],f,d),null!=e&&i.push(e);return Q.apply([],i)},guid:1,proxy:function(a,b){var c,d,e;return"string"==typeof b&&(e=a[b],b=a,a=e),Y.isFunction(a)?(c=P.call(arguments,2),d=function(){return a.apply(b||this,c.concat(P.call(arguments)))},d.guid=a.guid=a.guid||Y.guid++,d):void 0},now:function(){return+new j},support:W}),Y.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){T["[object "+b+"]"]=b.toLowerCase()});var ba=function(a){function b(a,b,c,d){var e,f,g,h,i,j,k,l,n,p;if((b?b.ownerDocument||b:Q)!==I&&H(b),b=b||I,c=c||[],!a||"string"!=typeof a)return c;if(1!==(h=b.nodeType)&&9!==h)return[];if(K&&!d){if(e=ua.exec(a))if(g=e[1]){if(9===h){if(f=b.getElementById(g),!f||!f.parentNode)return c;if(f.id===g)return c.push(f),c}else if(b.ownerDocument&&(f=b.ownerDocument.getElementById(g))&&O(b,f)&&f.id===g)return c.push(f),c}else{if(e[2])return ba.apply(c,b.getElementsByTagName(a)),c;if((g=e[3])&&x.getElementsByClassName&&b.getElementsByClassName)return ba.apply(c,b.getElementsByClassName(g)),c}if(x.qsa&&(!L||!L.test(a))){if(l=k=P,n=b,p=9===h&&a,1===h&&"object"!==b.nodeName.toLowerCase()){for(j=B(a),(k=b.getAttribute("id"))?l=k.replace(wa,"\\$&"):b.setAttribute("id",l),l="[id='"+l+"'] ",i=j.length;i--;)j[i]=l+o(j[i]);n=va.test(a)&&m(b.parentNode)||b,p=j.join(",")}if(p)try{return ba.apply(c,n.querySelectorAll(p)),c}catch(q){}finally{k||b.removeAttribute("id")}}}return D(a.replace(ka,"$1"),b,c,d)}function c(){function a(c,d){return b.push(c+" ")>y.cacheLength&&delete a[b.shift()],a[c+" "]=d}var b=[];return a}function d(a){return a[P]=!0,a}function e(a){var b=I.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function f(a,b){for(var c=a.split("|"),d=a.length;d--;)y.attrHandle[c[d]]=b}function g(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||Y)-(~a.sourceIndex||Y);if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function h(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function k(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function l(a){return d(function(b){return b=+b,d(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function m(a){return a&&typeof a.getElementsByTagName!==X&&a}function n(){}function o(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function p(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=S++;return b.first?function(b,c,f){for(;b=b[d];)if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[R,f];if(g){for(;b=b[d];)if((1===b.nodeType||e)&&a(b,c,g))return!0}else for(;b=b[d];)if(1===b.nodeType||e){if(i=b[P]||(b[P]={}),(h=i[d])&&h[0]===R&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function q(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function r(a,c,d){for(var e=0,f=c.length;f>e;e++)b(a,c[e],d);return d}function s(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function t(a,b,c,e,f,g){return e&&!e[P]&&(e=t(e)),f&&!f[P]&&(f=t(f,g)),d(function(d,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=d||r(b||"*",h.nodeType?[h]:h,[]),q=!a||!d&&b?p:s(p,m,a,h,i),t=c?f||(d?a:o||e)?[]:g:q;if(c&&c(q,t,h,i),e)for(j=s(t,n),e(j,[],h,i),k=j.length;k--;)(l=j[k])&&(t[n[k]]=!(q[n[k]]=l));if(d){if(f||a){if(f){for(j=[],k=t.length;k--;)(l=t[k])&&j.push(q[k]=l);f(null,t=[],j,i)}for(k=t.length;k--;)(l=t[k])&&(j=f?da.call(d,l):m[k])>-1&&(d[j]=!(g[j]=l))}}else t=s(t===g?t.splice(o,t.length):t),f?f(null,g,t,i):ba.apply(g,t)})}function u(a){for(var b,c,d,e=a.length,f=y.relative[a[0].type],g=f||y.relative[" "],h=f?1:0,i=p(function(a){return a===b},g,!0),j=p(function(a){return da.call(b,a)>-1},g,!0),k=[function(a,c,d){return!f&&(d||c!==E)||((b=c).nodeType?i(a,c,d):j(a,c,d))}];e>h;h++)if(c=y.relative[a[h].type])k=[p(q(k),c)];else{if(c=y.filter[a[h].type].apply(null,a[h].matches),c[P]){for(d=++h;e>d&&!y.relative[a[d].type];d++);return t(h>1&&q(k),h>1&&o(a.slice(0,h-1).concat({value:" "===a[h-2].type?"*":""})).replace(ka,"$1"),c,d>h&&u(a.slice(h,d)),e>d&&u(a=a.slice(d)),e>d&&o(a));
}k.push(c)}return q(k)}function v(a,c){var e=c.length>0,f=a.length>0,g=function(d,g,h,j,k){var l,m,n,o=0,p="0",q=d&&[],r=[],t=E,u=d||f&&y.find.TAG("*",k),v=R+=null==t?1:i.random()||.1,w=u.length;for(k&&(E=g!==I&&g);p!==w&&null!=(l=u[p]);p++){if(f&&l){for(m=0;n=a[m++];)if(n(l,g,h)){j.push(l);break}k&&(R=v)}e&&((l=!n&&l)&&o--,d&&q.push(l))}if(o+=p,e&&p!==o){for(m=0;n=c[m++];)n(q,r,g,h);if(d){if(o>0)for(;p--;)q[p]||r[p]||(r[p]=_.call(j));r=s(r)}ba.apply(j,r),k&&!d&&r.length>0&&o+c.length>1&&b.uniqueSort(j)}return k&&(R=v,E=t),q};return e?d(g):g}var w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P="sizzle"+-new j,Q=a.document,R=0,S=0,T=c(),U=c(),V=c(),W=function(a,b){return a===b&&(G=!0),0},X="undefined",Y=1<<31,Z={}.hasOwnProperty,$=[],_=$.pop,aa=$.push,ba=$.push,ca=$.slice,da=$.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},ea="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",fa="[\\x20\\t\\r\\n\\f]",ga="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ha=ga.replace("w","w#"),ia="\\["+fa+"*("+ga+")(?:"+fa+"*([*^$|!~]?=)"+fa+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ha+"))|)"+fa+"*\\]",ja=":("+ga+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ia+")*)|.*)\\)|)",ka=new RegExp("^"+fa+"+|((?:^|[^\\\\])(?:\\\\.)*)"+fa+"+$","g"),la=new RegExp("^"+fa+"*,"+fa+"*"),ma=new RegExp("^"+fa+"*([>+~]|"+fa+")"+fa+"*"),na=new RegExp("="+fa+"*([^\\]'\"]*?)"+fa+"*\\]","g"),oa=new RegExp(ja),pa=new RegExp("^"+ha+"$"),qa={ID:new RegExp("^#("+ga+")"),CLASS:new RegExp("^\\.("+ga+")"),TAG:new RegExp("^("+ga.replace("w","w*")+")"),ATTR:new RegExp("^"+ia),PSEUDO:new RegExp("^"+ja),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+fa+"*(even|odd|(([+-]|)(\\d*)n|)"+fa+"*(?:([+-]|)"+fa+"*(\\d+)|))"+fa+"*\\)|)","i"),bool:new RegExp("^(?:"+ea+")$","i"),needsContext:new RegExp("^"+fa+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+fa+"*((?:-\\d)?\\d*)"+fa+"*\\)|)(?=[^-]|$)","i")},ra=/^(?:input|select|textarea|button)$/i,sa=/^h\d$/i,ta=/^[^{]+\{\s*\[native \w/,ua=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,va=/[+~]/,wa=/'|\\/g,xa=new RegExp("\\\\([\\da-f]{1,6}"+fa+"?|("+fa+")|.)","ig"),ya=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)};try{ba.apply($=ca.call(Q.childNodes),Q.childNodes),$[Q.childNodes.length].nodeType}catch(za){ba={apply:$.length?function(a,b){aa.apply(a,ca.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}x=b.support={},A=b.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return!!b&&"HTML"!==b.nodeName},H=b.setDocument=function(a){var b,c=a?a.ownerDocument||a:Q,d=c.defaultView;return c!==I&&9===c.nodeType&&c.documentElement?(I=c,J=c.documentElement,K=!A(c),d&&d!==d.top&&(d.addEventListener?d.addEventListener("unload",function(){H()},!1):d.attachEvent&&d.attachEvent("onunload",function(){H()})),x.attributes=e(function(a){return a.className="i",!a.getAttribute("className")}),x.getElementsByTagName=e(function(a){return a.appendChild(c.createComment("")),!a.getElementsByTagName("*").length}),x.getElementsByClassName=ta.test(c.getElementsByClassName)&&e(function(a){return a.innerHTML="<div class='a'></div><div class='a i'></div>",a.firstChild.className="i",2===a.getElementsByClassName("i").length}),x.getById=e(function(a){return J.appendChild(a).id=P,!c.getElementsByName||!c.getElementsByName(P).length}),x.getById?(y.find.ID=function(a,b){if(typeof b.getElementById!==X&&K){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},y.filter.ID=function(a){var b=a.replace(xa,ya);return function(a){return a.getAttribute("id")===b}}):(delete y.find.ID,y.filter.ID=function(a){var b=a.replace(xa,ya);return function(a){var c=typeof a.getAttributeNode!==X&&a.getAttributeNode("id");return c&&c.value===b}}),y.find.TAG=x.getElementsByTagName?function(a,b){return typeof b.getElementsByTagName!==X?b.getElementsByTagName(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},y.find.CLASS=x.getElementsByClassName&&function(a,b){return typeof b.getElementsByClassName!==X&&K?b.getElementsByClassName(a):void 0},M=[],L=[],(x.qsa=ta.test(c.querySelectorAll))&&(e(function(a){a.innerHTML="<select msallowclip=''><option selected=''></option></select>",a.querySelectorAll("[msallowclip^='']").length&&L.push("[*^$]="+fa+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||L.push("\\["+fa+"*(?:value|"+ea+")"),a.querySelectorAll(":checked").length||L.push(":checked")}),e(function(a){var b=c.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&L.push("name"+fa+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||L.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),L.push(",.*:")})),(x.matchesSelector=ta.test(N=J.matches||J.webkitMatchesSelector||J.mozMatchesSelector||J.oMatchesSelector||J.msMatchesSelector))&&e(function(a){x.disconnectedMatch=N.call(a,"div"),N.call(a,"[s!='']:x"),M.push("!=",ja)}),L=L.length&&new RegExp(L.join("|")),M=M.length&&new RegExp(M.join("|")),b=ta.test(J.compareDocumentPosition),O=b||ta.test(J.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},W=b?function(a,b){if(a===b)return G=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!x.sortDetached&&b.compareDocumentPosition(a)===d?a===c||a.ownerDocument===Q&&O(Q,a)?-1:b===c||b.ownerDocument===Q&&O(Q,b)?1:F?da.call(F,a)-da.call(F,b):0:4&d?-1:1)}:function(a,b){if(a===b)return G=!0,0;var d,e=0,f=a.parentNode,h=b.parentNode,i=[a],j=[b];if(!f||!h)return a===c?-1:b===c?1:f?-1:h?1:F?da.call(F,a)-da.call(F,b):0;if(f===h)return g(a,b);for(d=a;d=d.parentNode;)i.unshift(d);for(d=b;d=d.parentNode;)j.unshift(d);for(;i[e]===j[e];)e++;return e?g(i[e],j[e]):i[e]===Q?-1:j[e]===Q?1:0},c):I},b.matches=function(a,c){return b(a,null,null,c)},b.matchesSelector=function(a,c){if((a.ownerDocument||a)!==I&&H(a),c=c.replace(na,"='$1']"),!(!x.matchesSelector||!K||M&&M.test(c)||L&&L.test(c)))try{var d=N.call(a,c);if(d||x.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return b(c,I,null,[a]).length>0},b.contains=function(a,b){return(a.ownerDocument||a)!==I&&H(a),O(a,b)},b.attr=function(a,b){(a.ownerDocument||a)!==I&&H(a);var c=y.attrHandle[b.toLowerCase()],d=c&&Z.call(y.attrHandle,b.toLowerCase())?c(a,b,!K):void 0;return void 0!==d?d:x.attributes||!K?a.getAttribute(b):(d=a.getAttributeNode(b))&&d.specified?d.value:null},b.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},b.uniqueSort=function(a){var b,c=[],d=0,e=0;if(G=!x.detectDuplicates,F=!x.sortStable&&a.slice(0),a.sort(W),G){for(;b=a[e++];)b===a[e]&&(d=c.push(e));for(;d--;)a.splice(c[d],1)}return F=null,a},z=b.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(1===e||9===e||11===e){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=z(a)}else if(3===e||4===e)return a.nodeValue}else for(;b=a[d++];)c+=z(b);return c},y=b.selectors={cacheLength:50,createPseudo:d,match:qa,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(xa,ya),a[3]=(a[3]||a[4]||a[5]||"").replace(xa,ya),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||b.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&b.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return qa.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&oa.test(c)&&(b=B(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(xa,ya).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=T[a+" "];return b||(b=new RegExp("(^|"+fa+")"+a+"("+fa+"|$)"))&&T(a,function(a){return b.test("string"==typeof a.className&&a.className||typeof a.getAttribute!==X&&a.getAttribute("class")||"")})},ATTR:function(a,c,d){return function(e){var f=b.attr(e,a);return null==f?"!="===c:!c||(f+="","="===c?f===d:"!="===c?f!==d:"^="===c?d&&0===f.indexOf(d):"*="===c?d&&f.indexOf(d)>-1:"$="===c?d&&f.slice(-d.length)===d:"~="===c?(" "+f+" ").indexOf(d)>-1:"|="===c&&(f===d||f.slice(0,d.length+1)===d+"-"))}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){for(;p;){for(l=b;l=l[p];)if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(k=q[P]||(q[P]={}),j=k[a]||[],n=j[0]===R&&j[1],m=j[0]===R&&j[2],l=n&&q.childNodes[n];l=++n&&l&&l[p]||(m=n=0)||o.pop();)if(1===l.nodeType&&++m&&l===b){k[a]=[R,n,m];break}}else if(s&&(j=(b[P]||(b[P]={}))[a])&&j[0]===R)m=j[1];else for(;(l=++n&&l&&l[p]||(m=n=0)||o.pop())&&((h?l.nodeName.toLowerCase()!==r:1!==l.nodeType)||!++m||(s&&((l[P]||(l[P]={}))[a]=[R,m]),l!==b)););return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,c){var e,f=y.pseudos[a]||y.setFilters[a.toLowerCase()]||b.error("unsupported pseudo: "+a);return f[P]?f(c):f.length>1?(e=[a,a,"",c],y.setFilters.hasOwnProperty(a.toLowerCase())?d(function(a,b){for(var d,e=f(a,c),g=e.length;g--;)d=da.call(a,e[g]),a[d]=!(b[d]=e[g])}):function(a){return f(a,0,e)}):f}},pseudos:{not:d(function(a){var b=[],c=[],e=C(a.replace(ka,"$1"));return e[P]?d(function(a,b,c,d){for(var f,g=e(a,null,d,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,d,f){return b[0]=a,e(b,null,f,c),!c.pop()}}),has:d(function(a){return function(c){return b(a,c).length>0}}),contains:d(function(a){return function(b){return(b.textContent||b.innerText||z(b)).indexOf(a)>-1}}),lang:d(function(a){return pa.test(a||"")||b.error("unsupported lang: "+a),a=a.replace(xa,ya).toLowerCase(),function(b){var c;do if(c=K?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===J},focus:function(a){return a===I.activeElement&&(!I.hasFocus||I.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!y.pseudos.empty(a)},header:function(a){return sa.test(a.nodeName)},input:function(a){return ra.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:l(function(){return[0]}),last:l(function(a,b){return[b-1]}),eq:l(function(a,b,c){return[0>c?c+b:c]}),even:l(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:l(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:l(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:l(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},y.pseudos.nth=y.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})y.pseudos[w]=h(w);for(w in{submit:!0,reset:!0})y.pseudos[w]=k(w);return n.prototype=y.filters=y.pseudos,y.setFilters=new n,B=b.tokenize=function(a,c){var d,e,f,g,h,i,j,k=U[a+" "];if(k)return c?0:k.slice(0);for(h=a,i=[],j=y.preFilter;h;){(!d||(e=la.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),d=!1,(e=ma.exec(h))&&(d=e.shift(),f.push({value:d,type:e[0].replace(ka," ")}),h=h.slice(d.length));for(g in y.filter)!(e=qa[g].exec(h))||j[g]&&!(e=j[g](e))||(d=e.shift(),f.push({value:d,type:g,matches:e}),h=h.slice(d.length));if(!d)break}return c?h.length:h?b.error(a):U(a,i).slice(0)},C=b.compile=function(a,b){var c,d=[],e=[],f=V[a+" "];if(!f){for(b||(b=B(a)),c=b.length;c--;)f=u(b[c]),f[P]?d.push(f):e.push(f);f=V(a,v(e,d)),f.selector=a}return f},D=b.select=function(a,b,c,d){var e,f,g,h,i,j="function"==typeof a&&a,k=!d&&B(a=j.selector||a);if(c=c||[],1===k.length){if(f=k[0]=k[0].slice(0),f.length>2&&"ID"===(g=f[0]).type&&x.getById&&9===b.nodeType&&K&&y.relative[f[1].type]){if(b=(y.find.ID(g.matches[0].replace(xa,ya),b)||[])[0],!b)return c;j&&(b=b.parentNode),a=a.slice(f.shift().value.length)}for(e=qa.needsContext.test(a)?0:f.length;e--&&(g=f[e],!y.relative[h=g.type]);)if((i=y.find[h])&&(d=i(g.matches[0].replace(xa,ya),va.test(f[0].type)&&m(b.parentNode)||b))){if(f.splice(e,1),a=d.length&&o(f),!a)return ba.apply(c,d),c;break}}return(j||C(a,k))(d,b,!K,c,va.test(a)&&m(b.parentNode)||b),c},x.sortStable=P.split("").sort(W).join("")===P,x.detectDuplicates=!!G,H(),x.sortDetached=e(function(a){return 1&a.compareDocumentPosition(I.createElement("div"))}),e(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||f("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),x.attributes&&e(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||f("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),e(function(a){return null==a.getAttribute("disabled")})||f(ea,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),b}(a);Y.find=ba,Y.expr=ba.selectors,Y.expr[":"]=Y.expr.pseudos,Y.unique=ba.uniqueSort,Y.text=ba.getText,Y.isXMLDoc=ba.isXML,Y.contains=ba.contains;var ca=Y.expr.match.needsContext,da=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ea=/^.[^:#\[\.,]*$/;Y.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?Y.find.matchesSelector(d,a)?[d]:[]:Y.find.matches(a,Y.grep(b,function(a){return 1===a.nodeType}))},Y.fn.extend({find:function(a){var b,c=[],d=this,e=d.length;if("string"!=typeof a)return this.pushStack(Y(a).filter(function(){for(b=0;e>b;b++)if(Y.contains(d[b],this))return!0}));for(b=0;e>b;b++)Y.find(a,d[b],c);return c=this.pushStack(e>1?Y.unique(c):c),c.selector=this.selector?this.selector+" "+a:a,c},filter:function(a){return this.pushStack(d(this,a||[],!1))},not:function(a){return this.pushStack(d(this,a||[],!0))},is:function(a){return!!d(this,"string"==typeof a&&ca.test(a)?Y(a):a||[],!1).length}});var fa,ga=a.document,ha=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ia=Y.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(c="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:ha.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||fa).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof Y?b[0]:b,Y.merge(this,Y.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:ga,!0)),da.test(c[1])&&Y.isPlainObject(b))for(c in b)Y.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}if(d=ga.getElementById(c[2]),d&&d.parentNode){if(d.id!==c[2])return fa.find(a);this.length=1,this[0]=d}return this.context=ga,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):Y.isFunction(a)?"undefined"!=typeof fa.ready?fa.ready(a):a(Y):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),Y.makeArray(a,this))};ia.prototype=Y.fn,fa=Y(ga);var ja=/^(?:parents|prev(?:Until|All))/,ka={children:!0,contents:!0,next:!0,prev:!0};Y.extend({dir:function(a,b,c){for(var d=[],e=a[b];e&&9!==e.nodeType&&(void 0===c||1!==e.nodeType||!Y(e).is(c));)1===e.nodeType&&d.push(e),e=e[b];return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),Y.fn.extend({has:function(a){var b,c=Y(a,this),d=c.length;return this.filter(function(){for(b=0;d>b;b++)if(Y.contains(this,c[b]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=ca.test(a)||"string"!=typeof a?Y(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&Y.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?Y.unique(f):f)},index:function(a){return a?"string"==typeof a?Y.inArray(this[0],Y(a)):Y.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(Y.unique(Y.merge(this.get(),Y(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),Y.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return Y.dir(a,"parentNode")},parentsUntil:function(a,b,c){return Y.dir(a,"parentNode",c)},next:function(a){return h(a,"nextSibling")},prev:function(a){return h(a,"previousSibling")},nextAll:function(a){return Y.dir(a,"nextSibling")},prevAll:function(a){return Y.dir(a,"previousSibling")},nextUntil:function(a,b,c){return Y.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return Y.dir(a,"previousSibling",c)},siblings:function(a){return Y.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return Y.sibling(a.firstChild)},contents:function(a){return Y.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:Y.merge([],a.childNodes)}},function(a,b){Y.fn[a]=function(c,d){var e=Y.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=Y.filter(d,e)),this.length>1&&(ka[a]||(e=Y.unique(e)),ja.test(a)&&(e=e.reverse())),this.pushStack(e)}});var la=/\S+/g,ma={};Y.Callbacks=function(a){a="string"==typeof a?ma[a]||k(a):Y.extend({},a);var b,c,d,e,f,g,h=[],i=!a.once&&[],j=function(k){for(c=a.memory&&k,d=!0,f=g||0,g=0,e=h.length,b=!0;h&&e>f;f++)if(h[f].apply(k[0],k[1])===!1&&a.stopOnFalse){c=!1;break}b=!1,h&&(i?i.length&&j(i.shift()):c?h=[]:l.disable())},l={add:function(){if(h){var d=h.length;!function b(c){Y.each(c,function(c,d){var e=Y.type(d);"function"===e?a.unique&&l.has(d)||h.push(d):d&&d.length&&"string"!==e&&b(d)})}(arguments),b?e=h.length:c&&(g=d,j(c))}return this},remove:function(){return h&&Y.each(arguments,function(a,c){for(var d;(d=Y.inArray(c,h,d))>-1;)h.splice(d,1),b&&(e>=d&&e--,f>=d&&f--)}),this},has:function(a){return a?Y.inArray(a,h)>-1:!(!h||!h.length)},empty:function(){return h=[],e=0,this},disable:function(){return h=i=c=void 0,this},disabled:function(){return!h},lock:function(){return i=void 0,c||l.disable(),this},locked:function(){return!i},fireWith:function(a,c){return!h||d&&!i||(c=c||[],c=[a,c.slice?c.slice():c],b?i.push(c):j(c)),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!d}};return l},Y.extend({Deferred:function(a){var b=[["resolve","done",Y.Callbacks("once memory"),"resolved"],["reject","fail",Y.Callbacks("once memory"),"rejected"],["notify","progress",Y.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return Y.Deferred(function(c){Y.each(b,function(b,f){var g=Y.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&Y.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?Y.extend(a,d):d}},e={};return d.pipe=d.then,Y.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b,c,d,e=0,f=P.call(arguments),g=f.length,h=1!==g||a&&Y.isFunction(a.promise)?g:0,i=1===h?a:Y.Deferred(),j=function(a,c,d){return function(e){c[a]=this,d[a]=arguments.length>1?P.call(arguments):e,d===b?i.notifyWith(c,d):--h||i.resolveWith(c,d)}};if(g>1)for(b=new Array(g),c=new Array(g),d=new Array(g);g>e;e++)f[e]&&Y.isFunction(f[e].promise)?f[e].promise().done(j(e,d,f)).fail(i.reject).progress(j(e,c,b)):--h;return h||i.resolveWith(d,f),i.promise()}});var na;Y.fn.ready=function(a){return Y.ready.promise().done(a),this},Y.extend({isReady:!1,readyWait:1,holdReady:function(a){a?Y.readyWait++:Y.ready(!0)},ready:function(a){if(a===!0?!--Y.readyWait:!Y.isReady){if(!ga.body)return e(Y.ready);Y.isReady=!0,a!==!0&&--Y.readyWait>0||(na.resolveWith(ga,[Y]),Y.fn.triggerHandler&&(Y(ga).triggerHandler("ready"),Y(ga).off("ready")))}}}),Y.ready.promise=function(b){if(!na)if(na=Y.Deferred(),"complete"===ga.readyState)e(Y.ready);else if(ga.addEventListener)ga.addEventListener("DOMContentLoaded",n,!1),a.addEventListener("load",n,!1);else{ga.attachEvent("onreadystatechange",n),a.attachEvent("onload",n);var c=!1;try{c=null==a.frameElement&&ga.documentElement}catch(d){}c&&c.doScroll&&!function a(){if(!Y.isReady){try{c.doScroll("left")}catch(b){return e(a,50)}l(),Y.ready()}}()}return na.promise(b)};var oa,pa="undefined";for(oa in Y(W))break;W.ownLast="0"!==oa,W.inlineBlockNeedsLayout=!1,Y(function(){var a,b,c,d;c=ga.getElementsByTagName("body")[0],c&&c.style&&(b=ga.createElement("div"),d=ga.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),typeof b.style.zoom!==pa&&(b.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",W.inlineBlockNeedsLayout=a=3===b.offsetWidth,a&&(c.style.zoom=1)),c.removeChild(d))}),function(){var a=ga.createElement("div");if(null==W.deleteExpando){W.deleteExpando=!0;try{delete a.test}catch(b){W.deleteExpando=!1}}a=null}(),Y.acceptData=function(a){var b=Y.noData[(a.nodeName+" ").toLowerCase()],c=+a.nodeType||1;return(1===c||9===c)&&(!b||b!==!0&&a.getAttribute("classid")===b)};var qa=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ra=/([A-Z])/g;Y.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(a){return a=a.nodeType?Y.cache[a[Y.expando]]:a[Y.expando],!!a&&!p(a)},data:function(a,b,c){return q(a,b,c)},removeData:function(a,b){return r(a,b)},_data:function(a,b,c){return q(a,b,c,!0)},_removeData:function(a,b){return r(a,b,!0)}}),Y.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=Y.data(f),1===f.nodeType&&!Y._data(f,"parsedAttrs"))){for(c=g.length;c--;)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=Y.camelCase(d.slice(5)),o(f,d,e[d])));Y._data(f,"parsedAttrs",!0)}return e}return"object"==typeof a?this.each(function(){Y.data(this,a)}):arguments.length>1?this.each(function(){Y.data(this,a,b)}):f?o(f,a,Y.data(f,a)):void 0},removeData:function(a){return this.each(function(){Y.removeData(this,a)})}}),Y.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=Y._data(a,b),c&&(!d||Y.isArray(c)?d=Y._data(a,b,Y.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=Y.queue(a,b),d=c.length,e=c.shift(),f=Y._queueHooks(a,b),g=function(){Y.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return Y._data(a,c)||Y._data(a,c,{empty:Y.Callbacks("once memory").add(function(){Y._removeData(a,b+"queue"),Y._removeData(a,c)})})}}),Y.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?Y.queue(this[0],a):void 0===b?this:this.each(function(){var c=Y.queue(this,a,b);Y._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&Y.dequeue(this,a)})},dequeue:function(a){return this.each(function(){Y.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=Y.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};for("string"!=typeof a&&(b=a,a=void 0),a=a||"fx";g--;)c=Y._data(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var sa=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ta=["Top","Right","Bottom","Left"],ua=function(a,b){return a=b||a,"none"===Y.css(a,"display")||!Y.contains(a.ownerDocument,a)},va=Y.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===Y.type(c)){e=!0;for(h in c)Y.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,Y.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(Y(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},wa=/^(?:checkbox|radio)$/i;!function(){var a=ga.createElement("input"),b=ga.createElement("div"),c=ga.createDocumentFragment();if(b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",W.leadingWhitespace=3===b.firstChild.nodeType,W.tbody=!b.getElementsByTagName("tbody").length,W.htmlSerialize=!!b.getElementsByTagName("link").length,W.html5Clone="<:nav></:nav>"!==ga.createElement("nav").cloneNode(!0).outerHTML,a.type="checkbox",a.checked=!0,c.appendChild(a),W.appendChecked=a.checked,b.innerHTML="<textarea>x</textarea>",W.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue,c.appendChild(b),b.innerHTML="<input type='radio' checked='checked' name='t'/>",W.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,W.noCloneEvent=!0,b.attachEvent&&(b.attachEvent("onclick",function(){W.noCloneEvent=!1}),b.cloneNode(!0).click()),null==W.deleteExpando){W.deleteExpando=!0;try{delete b.test}catch(d){W.deleteExpando=!1}}}(),function(){var b,c,d=ga.createElement("div");for(b in{submit:!0,change:!0,focusin:!0})c="on"+b,(W[b+"Bubbles"]=c in a)||(d.setAttribute(c,"t"),W[b+"Bubbles"]=d.attributes[c].expando===!1);d=null}();var xa=/^(?:input|select|textarea)$/i,ya=/^key/,za=/^(?:mouse|pointer|contextmenu)|click/,Aa=/^(?:focusinfocus|focusoutblur)$/,Ba=/^([^.]*)(?:\.(.+)|)$/;Y.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=Y._data(a);if(q){for(c.handler&&(i=c,c=i.handler,e=i.selector),c.guid||(c.guid=Y.guid++),(g=q.events)||(g=q.events={}),(k=q.handle)||(k=q.handle=function(a){return typeof Y===pa||a&&Y.event.triggered===a.type?void 0:Y.event.dispatch.apply(k.elem,arguments)},k.elem=a),b=(b||"").match(la)||[""],h=b.length;h--;)f=Ba.exec(b[h])||[],n=p=f[1],o=(f[2]||"").split(".").sort(),n&&(j=Y.event.special[n]||{},n=(e?j.delegateType:j.bindType)||n,j=Y.event.special[n]||{},l=Y.extend({type:n,origType:p,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&Y.expr.match.needsContext.test(e),namespace:o.join(".")},i),(m=g[n])||(m=g[n]=[],m.delegateCount=0,j.setup&&j.setup.call(a,d,o,k)!==!1||(a.addEventListener?a.addEventListener(n,k,!1):a.attachEvent&&a.attachEvent("on"+n,k))),j.add&&(j.add.call(a,l),l.handler.guid||(l.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,l):m.push(l),Y.event.global[n]=!0);a=null}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=Y.hasData(a)&&Y._data(a);if(q&&(k=q.events)){for(b=(b||"").match(la)||[""],j=b.length;j--;)if(h=Ba.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){for(l=Y.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=k[n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=f=m.length;f--;)g=m[f],!e&&p!==g.origType||c&&c.guid!==g.guid||h&&!h.test(g.namespace)||d&&d!==g.selector&&("**"!==d||!g.selector)||(m.splice(f,1),g.selector&&m.delegateCount--,l.remove&&l.remove.call(a,g));i&&!m.length&&(l.teardown&&l.teardown.call(a,o,q.handle)!==!1||Y.removeEvent(a,n,q.handle),delete k[n])}else for(n in k)Y.event.remove(a,n+b[j],c,d,!0);Y.isEmptyObject(k)&&(delete q.handle,Y._removeData(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,j,k,l,m=[d||ga],n=V.call(b,"type")?b.type:b,o=V.call(b,"namespace")?b.namespace.split("."):[];if(h=k=d=d||ga,3!==d.nodeType&&8!==d.nodeType&&!Aa.test(n+Y.event.triggered)&&(n.indexOf(".")>=0&&(o=n.split("."),n=o.shift(),o.sort()),g=n.indexOf(":")<0&&"on"+n,b=b[Y.expando]?b:new Y.Event(n,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=o.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:Y.makeArray(c,[b]),j=Y.event.special[n]||{},e||!j.trigger||j.trigger.apply(d,c)!==!1)){if(!e&&!j.noBubble&&!Y.isWindow(d)){for(i=j.delegateType||n,Aa.test(i+n)||(h=h.parentNode);h;h=h.parentNode)m.push(h),k=h;k===(d.ownerDocument||ga)&&m.push(k.defaultView||k.parentWindow||a)}for(l=0;(h=m[l++])&&!b.isPropagationStopped();)b.type=l>1?i:j.bindType||n,f=(Y._data(h,"events")||{})[b.type]&&Y._data(h,"handle"),f&&f.apply(h,c),f=g&&h[g],f&&f.apply&&Y.acceptData(h)&&(b.result=f.apply(h,c),b.result===!1&&b.preventDefault());if(b.type=n,!e&&!b.isDefaultPrevented()&&(!j._default||j._default.apply(m.pop(),c)===!1)&&Y.acceptData(d)&&g&&d[n]&&!Y.isWindow(d)){k=d[g],k&&(d[g]=null),Y.event.triggered=n;try{d[n]()}catch(p){}Y.event.triggered=void 0,k&&(d[g]=k)}return b.result}},dispatch:function(a){a=Y.event.fix(a);var b,c,d,e,f,g=[],h=P.call(arguments),i=(Y._data(this,"events")||{})[a.type]||[],j=Y.event.special[a.type]||{};if(h[0]=a,a.delegateTarget=this,!j.preDispatch||j.preDispatch.call(this,a)!==!1){for(g=Y.event.handlers.call(this,a,i),b=0;(e=g[b++])&&!a.isPropagationStopped();)for(a.currentTarget=e.elem,f=0;(d=e.handlers[f++])&&!a.isImmediatePropagationStopped();)(!a.namespace_re||a.namespace_re.test(d.namespace))&&(a.handleObj=d,a.data=d.data,c=((Y.event.special[d.origType]||{}).handle||d.handler).apply(e.elem,h),void 0!==c&&(a.result=c)===!1&&(a.preventDefault(),a.stopPropagation()));return j.postDispatch&&j.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!=this;i=i.parentNode||this)if(1===i.nodeType&&(i.disabled!==!0||"click"!==a.type)){for(e=[],f=0;h>f;f++)d=b[f],c=d.selector+" ",void 0===e[c]&&(e[c]=d.needsContext?Y(c,this).index(i)>=0:Y.find(c,this,null,[i]).length),e[c]&&e.push(d);e.length&&g.push({elem:i,handlers:e})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},fix:function(a){if(a[Y.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];for(g||(this.fixHooks[e]=g=za.test(e)?this.mouseHooks:ya.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new Y.Event(f),b=d.length;b--;)c=d[b],a[c]=f[c];return a.target||(a.target=f.srcElement||ga),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,g.filter?g.filter(a,f):a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button,g=b.fromElement;return null==a.pageX&&null!=b.clientX&&(d=a.target.ownerDocument||ga,e=d.documentElement,c=d.body,a.pageX=b.clientX+(e&&e.scrollLeft||c&&c.scrollLeft||0)-(e&&e.clientLeft||c&&c.clientLeft||0),a.pageY=b.clientY+(e&&e.scrollTop||c&&c.scrollTop||0)-(e&&e.clientTop||c&&c.clientTop||0)),
!a.relatedTarget&&g&&(a.relatedTarget=g===a.target?b.toElement:g),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==u()&&this.focus)try{return this.focus(),!1}catch(a){}},delegateType:"focusin"},blur:{trigger:function(){return this===u()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return Y.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(a){return Y.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=Y.extend(new Y.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?Y.event.trigger(e,null,b):Y.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},Y.removeEvent=ga.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d="on"+b;a.detachEvent&&(typeof a[d]===pa&&(a[d]=null),a.detachEvent(d,c))},Y.Event=function(a,b){return this instanceof Y.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?s:t):this.type=a,b&&Y.extend(this,b),this.timeStamp=a&&a.timeStamp||Y.now(),void(this[Y.expando]=!0)):new Y.Event(a,b)},Y.Event.prototype={isDefaultPrevented:t,isPropagationStopped:t,isImmediatePropagationStopped:t,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=s,a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=s,a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=s,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},Y.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){Y.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!Y.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),W.submitBubbles||(Y.event.special.submit={setup:function(){return!Y.nodeName(this,"form")&&void Y.event.add(this,"click._submit keypress._submit",function(a){var b=a.target,c=Y.nodeName(b,"input")||Y.nodeName(b,"button")?b.form:void 0;c&&!Y._data(c,"submitBubbles")&&(Y.event.add(c,"submit._submit",function(a){a._submit_bubble=!0}),Y._data(c,"submitBubbles",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&Y.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){return!Y.nodeName(this,"form")&&void Y.event.remove(this,"._submit")}}),W.changeBubbles||(Y.event.special.change={setup:function(){return xa.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(Y.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),Y.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),Y.event.simulate("change",this,a,!0)})),!1):void Y.event.add(this,"beforeactivate._change",function(a){var b=a.target;xa.test(b.nodeName)&&!Y._data(b,"changeBubbles")&&(Y.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||Y.event.simulate("change",this.parentNode,a,!0)}),Y._data(b,"changeBubbles",!0))})},handle:function(a){var b=a.target;return this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type?a.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return Y.event.remove(this,"._change"),!xa.test(this.nodeName)}}),W.focusinBubbles||Y.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){Y.event.simulate(b,a.target,Y.event.fix(a),!0)};Y.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=Y._data(d,b);e||d.addEventListener(a,c,!0),Y._data(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=Y._data(d,b)-1;e?Y._data(d,b,e):(d.removeEventListener(a,c,!0),Y._removeData(d,b))}}}),Y.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(f in a)this.on(f,b,c,a[f],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=t;else if(!d)return this;return 1===e&&(g=d,d=function(a){return Y().off(a),g.apply(this,arguments)},d.guid=g.guid||(g.guid=Y.guid++)),this.each(function(){Y.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,Y(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=t),this.each(function(){Y.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){Y.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?Y.event.trigger(a,b,c,!0):void 0}});var Ca="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Da=/ jQuery\d+="(?:null|\d+)"/g,Ea=new RegExp("<(?:"+Ca+")[\\s/>]","i"),Fa=/^\s+/,Ga=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ha=/<([\w:]+)/,Ia=/<tbody/i,Ja=/<|&#?\w+;/,Ka=/<(?:script|style|link)/i,La=/checked\s*(?:[^=]|=\s*.checked.)/i,Ma=/^$|\/(?:java|ecma)script/i,Na=/^true\/(.*)/,Oa=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Pa={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:W.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Qa=v(ga),Ra=Qa.appendChild(ga.createElement("div"));Pa.optgroup=Pa.option,Pa.tbody=Pa.tfoot=Pa.colgroup=Pa.caption=Pa.thead,Pa.th=Pa.td,Y.extend({clone:function(a,b,c){var d,e,f,g,h,i=Y.contains(a.ownerDocument,a);if(W.html5Clone||Y.isXMLDoc(a)||!Ea.test("<"+a.nodeName+">")?f=a.cloneNode(!0):(Ra.innerHTML=a.outerHTML,Ra.removeChild(f=Ra.firstChild)),!(W.noCloneEvent&&W.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||Y.isXMLDoc(a)))for(d=w(f),h=w(a),g=0;null!=(e=h[g]);++g)d[g]&&D(e,d[g]);if(b)if(c)for(h=h||w(a),d=d||w(f),g=0;null!=(e=h[g]);g++)C(e,d[g]);else C(a,f);return d=w(f,"script"),d.length>0&&B(d,!i&&w(a,"script")),d=h=e=null,f},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k,l=a.length,m=v(b),n=[],o=0;l>o;o++)if(f=a[o],f||0===f)if("object"===Y.type(f))Y.merge(n,f.nodeType?[f]:f);else if(Ja.test(f)){for(h=h||m.appendChild(b.createElement("div")),i=(Ha.exec(f)||["",""])[1].toLowerCase(),k=Pa[i]||Pa._default,h.innerHTML=k[1]+f.replace(Ga,"<$1></$2>")+k[2],e=k[0];e--;)h=h.lastChild;if(!W.leadingWhitespace&&Fa.test(f)&&n.push(b.createTextNode(Fa.exec(f)[0])),!W.tbody)for(f="table"!==i||Ia.test(f)?"<table>"!==k[1]||Ia.test(f)?0:h:h.firstChild,e=f&&f.childNodes.length;e--;)Y.nodeName(j=f.childNodes[e],"tbody")&&!j.childNodes.length&&f.removeChild(j);for(Y.merge(n,h.childNodes),h.textContent="";h.firstChild;)h.removeChild(h.firstChild);h=m.lastChild}else n.push(b.createTextNode(f));for(h&&m.removeChild(h),W.appendChecked||Y.grep(w(n,"input"),x),o=0;f=n[o++];)if((!d||-1===Y.inArray(f,d))&&(g=Y.contains(f.ownerDocument,f),h=w(m.appendChild(f),"script"),g&&B(h),c))for(e=0;f=h[e++];)Ma.test(f.type||"")&&c.push(f);return h=null,m},cleanData:function(a,b){for(var c,d,e,f,g=0,h=Y.expando,i=Y.cache,j=W.deleteExpando,k=Y.event.special;null!=(c=a[g]);g++)if((b||Y.acceptData(c))&&(e=c[h],f=e&&i[e])){if(f.events)for(d in f.events)k[d]?Y.event.remove(c,d):Y.removeEvent(c,d,f.handle);i[e]&&(delete i[e],j?delete c[h]:typeof c.removeAttribute!==pa?c.removeAttribute(h):c[h]=null,O.push(e))}}}),Y.fn.extend({text:function(a){return va(this,function(a){return void 0===a?Y.text(this):this.empty().append((this[0]&&this[0].ownerDocument||ga).createTextNode(a))},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=y(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=y(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?Y.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||Y.cleanData(w(c)),c.parentNode&&(b&&Y.contains(c.ownerDocument,c)&&B(w(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){for(1===a.nodeType&&Y.cleanData(w(a,!1));a.firstChild;)a.removeChild(a.firstChild);a.options&&Y.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){return a=null!=a&&a,b=null==b?a:b,this.map(function(){return Y.clone(this,a,b)})},html:function(a){return va(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a)return 1===b.nodeType?b.innerHTML.replace(Da,""):void 0;if(!("string"!=typeof a||Ka.test(a)||!W.htmlSerialize&&Ea.test(a)||!W.leadingWhitespace&&Fa.test(a)||Pa[(Ha.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(Ga,"<$1></$2>");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(Y.cleanData(w(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,Y.cleanData(w(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=Q.apply([],a);var c,d,e,f,g,h,i=0,j=this.length,k=this,l=j-1,m=a[0],n=Y.isFunction(m);if(n||j>1&&"string"==typeof m&&!W.checkClone&&La.test(m))return this.each(function(c){var d=k.eq(c);n&&(a[0]=m.call(this,c,d.html())),d.domManip(a,b)});if(j&&(h=Y.buildFragment(a,this[0].ownerDocument,!1,this),c=h.firstChild,1===h.childNodes.length&&(h=c),c)){for(f=Y.map(w(h,"script"),z),e=f.length;j>i;i++)d=h,i!==l&&(d=Y.clone(d,!0,!0),e&&Y.merge(f,w(d,"script"))),b.call(this[i],d,i);if(e)for(g=f[f.length-1].ownerDocument,Y.map(f,A),i=0;e>i;i++)d=f[i],Ma.test(d.type||"")&&!Y._data(d,"globalEval")&&Y.contains(g,d)&&(d.src?Y._evalUrl&&Y._evalUrl(d.src):Y.globalEval((d.text||d.textContent||d.innerHTML||"").replace(Oa,"")));h=c=null}return this}}),Y.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){Y.fn[a]=function(a){for(var c,d=0,e=[],f=Y(a),g=f.length-1;g>=d;d++)c=d===g?this:this.clone(!0),Y(f[d])[b](c),R.apply(e,c.get());return this.pushStack(e)}});var Sa,Ta,Ua,Va={},Wa=/^margin/,Xa=new RegExp("^("+sa+")(?!px)[a-z%]+$","i"),Ya=/^(top|right|bottom|left)$/;a.getComputedStyle?(Ta=function(a){return a.ownerDocument.defaultView.getComputedStyle(a,null)},Ua=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Ta(a),g=c?c.getPropertyValue(b)||c[b]:void 0,c&&(""!==g||Y.contains(a.ownerDocument,a)||(g=Y.style(a,b)),Xa.test(g)&&Wa.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0===g?g:g+""}):ga.documentElement.currentStyle&&(Ta=function(a){return a.currentStyle},Ua=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Ta(a),g=c?c[b]:void 0,null==g&&h&&h[b]&&(g=h[b]),Xa.test(g)&&!Ya.test(b)&&(d=h.left,e=a.runtimeStyle,f=e&&e.left,f&&(e.left=a.currentStyle.left),h.left="fontSize"===b?"1em":g,g=h.pixelLeft+"px",h.left=d,f&&(e.left=f)),void 0===g?g:g+""||"auto"}),!function(){function b(){var b,c,d,e;c=ga.getElementsByTagName("body")[0],c&&c.style&&(b=ga.createElement("div"),d=ga.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),b.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",f=g=!1,i=!0,a.getComputedStyle&&(f="1%"!==(a.getComputedStyle(b,null)||{}).top,g="4px"===(a.getComputedStyle(b,null)||{width:"4px"}).width,e=b.appendChild(ga.createElement("div")),e.style.cssText=b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",e.style.marginRight=e.style.width="0",b.style.width="1px",i=!parseFloat((a.getComputedStyle(e,null)||{}).marginRight)),b.innerHTML="<table><tr><td></td><td>t</td></tr></table>",e=b.getElementsByTagName("td"),e[0].style.cssText="margin:0;border:0;padding:0;display:none",h=0===e[0].offsetHeight,h&&(e[0].style.display="",e[1].style.display="none",h=0===e[0].offsetHeight),c.removeChild(d))}var c,d,e,f,g,h,i;c=ga.createElement("div"),c.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",e=c.getElementsByTagName("a")[0],(d=e&&e.style)&&(d.cssText="float:left;opacity:.5",W.opacity="0.5"===d.opacity,W.cssFloat=!!d.cssFloat,c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",W.clearCloneStyle="content-box"===c.style.backgroundClip,W.boxSizing=""===d.boxSizing||""===d.MozBoxSizing||""===d.WebkitBoxSizing,Y.extend(W,{reliableHiddenOffsets:function(){return null==h&&b(),h},boxSizingReliable:function(){return null==g&&b(),g},pixelPosition:function(){return null==f&&b(),f},reliableMarginRight:function(){return null==i&&b(),i}}))}(),Y.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var Za=/alpha\([^)]*\)/i,$a=/opacity\s*=\s*([^)]*)/,_a=/^(none|table(?!-c[ea]).+)/,ab=new RegExp("^("+sa+")(.*)$","i"),bb=new RegExp("^([+-])=("+sa+")","i"),cb={position:"absolute",visibility:"hidden",display:"block"},db={letterSpacing:"0",fontWeight:"400"},eb=["Webkit","O","Moz","ms"];Y.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Ua(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:W.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=Y.camelCase(b),i=a.style;if(b=Y.cssProps[h]||(Y.cssProps[h]=H(i,h)),g=Y.cssHooks[b]||Y.cssHooks[h],void 0===c)return g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b];if(f=typeof c,"string"===f&&(e=bb.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(Y.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||Y.cssNumber[h]||(c+="px"),W.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),!(g&&"set"in g&&void 0===(c=g.set(a,c,d)))))try{i[b]=c}catch(j){}}},css:function(a,b,c,d){var e,f,g,h=Y.camelCase(b);return b=Y.cssProps[h]||(Y.cssProps[h]=H(a.style,h)),g=Y.cssHooks[b]||Y.cssHooks[h],g&&"get"in g&&(f=g.get(a,!0,c)),void 0===f&&(f=Ua(a,b,d)),"normal"===f&&b in db&&(f=db[b]),""===c||c?(e=parseFloat(f),c===!0||Y.isNumeric(e)?e||0:f):f}}),Y.each(["height","width"],function(a,b){Y.cssHooks[b]={get:function(a,c,d){return c?_a.test(Y.css(a,"display"))&&0===a.offsetWidth?Y.swap(a,cb,function(){return L(a,b,d)}):L(a,b,d):void 0},set:function(a,c,d){var e=d&&Ta(a);return J(a,c,d?K(a,b,d,W.boxSizing&&"border-box"===Y.css(a,"boxSizing",!1,e),e):0)}}}),W.opacity||(Y.cssHooks.opacity={get:function(a,b){return $a.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=Y.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,(b>=1||""===b)&&""===Y.trim(f.replace(Za,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||d&&!d.filter)||(c.filter=Za.test(f)?f.replace(Za,e):f+" "+e)}}),Y.cssHooks.marginRight=G(W.reliableMarginRight,function(a,b){return b?Y.swap(a,{display:"inline-block"},Ua,[a,"marginRight"]):void 0}),Y.each({margin:"",padding:"",border:"Width"},function(a,b){Y.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+ta[d]+b]=f[d]||f[d-2]||f[0];return e}},Wa.test(a)||(Y.cssHooks[a+b].set=J)}),Y.fn.extend({css:function(a,b){return va(this,function(a,b,c){var d,e,f={},g=0;if(Y.isArray(b)){for(d=Ta(a),e=b.length;e>g;g++)f[b[g]]=Y.css(a,b[g],!1,d);return f}return void 0!==c?Y.style(a,b,c):Y.css(a,b)},a,b,arguments.length>1)},show:function(){return I(this,!0)},hide:function(){return I(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){ua(this)?Y(this).show():Y(this).hide()})}}),Y.fn.delay=function(a,b){return a=Y.fx?Y.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=e(b,a);c.stop=function(){f(d)}})},function(){var a,b,c,d,e;b=ga.createElement("div"),b.setAttribute("className","t"),b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",d=b.getElementsByTagName("a")[0],c=ga.createElement("select"),e=c.appendChild(ga.createElement("option")),a=b.getElementsByTagName("input")[0],d.style.cssText="top:1px",W.getSetAttribute="t"!==b.className,W.style=/top/.test(d.getAttribute("style")),W.hrefNormalized="/a"===d.getAttribute("href"),W.checkOn=!!a.value,W.optSelected=e.selected,W.enctype=!!ga.createElement("form").enctype,c.disabled=!0,W.optDisabled=!e.disabled,a=ga.createElement("input"),a.setAttribute("value",""),W.input=""===a.getAttribute("value"),a.value="t",a.setAttribute("type","radio"),W.radioValue="t"===a.value}();var fb=/\r/g;Y.fn.extend({val:function(a){var b,c,d,e=this[0];return arguments.length?(d=Y.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,Y(this).val()):a,null==e?e="":"number"==typeof e?e+="":Y.isArray(e)&&(e=Y.map(e,function(a){return null==a?"":a+""})),b=Y.valHooks[this.type]||Y.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))})):e?(b=Y.valHooks[e.type]||Y.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(fb,""):null==c?"":c)):void 0}}),Y.extend({valHooks:{option:{get:function(a){var b=Y.find.attr(a,"value");return null!=b?b:Y.trim(Y.text(a))}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(W.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&Y.nodeName(c.parentNode,"optgroup"))){if(b=Y(c).val(),f)return b;g.push(b)}return g},set:function(a,b){for(var c,d,e=a.options,f=Y.makeArray(b),g=e.length;g--;)if(d=e[g],Y.inArray(Y.valHooks.option.get(d),f)>=0)try{d.selected=c=!0}catch(h){d.scrollHeight}else d.selected=!1;return c||(a.selectedIndex=-1),e}}}}),Y.each(["radio","checkbox"],function(){Y.valHooks[this]={set:function(a,b){return Y.isArray(b)?a.checked=Y.inArray(Y(a).val(),b)>=0:void 0}},W.checkOn||(Y.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var gb,hb,ib=Y.expr.attrHandle,jb=/^(?:checked|selected)$/i,kb=W.getSetAttribute,lb=W.input;Y.fn.extend({attr:function(a,b){return va(this,Y.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){Y.removeAttr(this,a)})}}),Y.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f)return typeof a.getAttribute===pa?Y.prop(a,b,c):(1===f&&Y.isXMLDoc(a)||(b=b.toLowerCase(),d=Y.attrHooks[b]||(Y.expr.match.bool.test(b)?hb:gb)),void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=Y.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void Y.removeAttr(a,b))},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(la);if(f&&1===a.nodeType)for(;c=f[e++];)d=Y.propFix[c]||c,Y.expr.match.bool.test(c)?lb&&kb||!jb.test(c)?a[d]=!1:a[Y.camelCase("default-"+c)]=a[d]=!1:Y.attr(a,c,""),a.removeAttribute(kb?c:d)},attrHooks:{type:{set:function(a,b){if(!W.radioValue&&"radio"===b&&Y.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),hb={set:function(a,b,c){return b===!1?Y.removeAttr(a,c):lb&&kb||!jb.test(c)?a.setAttribute(!kb&&Y.propFix[c]||c,c):a[Y.camelCase("default-"+c)]=a[c]=!0,c}},Y.each(Y.expr.match.bool.source.match(/\w+/g),function(a,b){var c=ib[b]||Y.find.attr;ib[b]=lb&&kb||!jb.test(b)?function(a,b,d){var e,f;return d||(f=ib[b],ib[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,ib[b]=f),e}:function(a,b,c){return c?void 0:a[Y.camelCase("default-"+b)]?b.toLowerCase():null}}),lb&&kb||(Y.attrHooks.value={set:function(a,b,c){return Y.nodeName(a,"input")?void(a.defaultValue=b):gb&&gb.set(a,b,c)}}),kb||(gb={set:function(a,b,c){var d=a.getAttributeNode(c);return d||a.setAttributeNode(d=a.ownerDocument.createAttribute(c)),d.value=b+="","value"===c||b===a.getAttribute(c)?b:void 0}},ib.id=ib.name=ib.coords=function(a,b,c){var d;return c?void 0:(d=a.getAttributeNode(b))&&""!==d.value?d.value:null},Y.valHooks.button={get:function(a,b){var c=a.getAttributeNode(b);return c&&c.specified?c.value:void 0},set:gb.set},Y.attrHooks.contenteditable={set:function(a,b,c){gb.set(a,""!==b&&b,c)}},Y.each(["width","height"],function(a,b){Y.attrHooks[b]={set:function(a,c){return""===c?(a.setAttribute(b,"auto"),c):void 0}}})),W.style||(Y.attrHooks.style={get:function(a){return a.style.cssText||void 0},set:function(a,b){return a.style.cssText=b+""}});var mb=/^(?:input|select|textarea|button|object)$/i,nb=/^(?:a|area)$/i;Y.fn.extend({prop:function(a,b){return va(this,Y.prop,a,b,arguments.length>1)},removeProp:function(a){return a=Y.propFix[a]||a,this.each(function(){try{this[a]=void 0,delete this[a]}catch(b){}})}}),Y.extend({propFix:{for:"htmlFor",class:"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return f=1!==g||!Y.isXMLDoc(a),f&&(b=Y.propFix[b]||b,e=Y.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=Y.find.attr(a,"tabindex");return b?parseInt(b,10):mb.test(a.nodeName)||nb.test(a.nodeName)&&a.href?0:-1}}}}),W.hrefNormalized||Y.each(["href","src"],function(a,b){Y.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}}),W.optSelected||(Y.propHooks.selected={get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}}),Y.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){Y.propFix[this.toLowerCase()]=this}),W.enctype||(Y.propFix.enctype="encoding");var ob=/[\t\r\n\f]/g;Y.fn.extend({addClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j="string"==typeof a&&a;if(Y.isFunction(a))return this.each(function(b){Y(this).addClass(a.call(this,b,this.className))});if(j)for(b=(a||"").match(la)||[];i>h;h++)if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ob," "):" ")){for(f=0;e=b[f++];)d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=Y.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j=0===arguments.length||"string"==typeof a&&a;if(Y.isFunction(a))return this.each(function(b){Y(this).removeClass(a.call(this,b,this.className))});if(j)for(b=(a||"").match(la)||[];i>h;h++)if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ob," "):"")){for(f=0;e=b[f++];)for(;d.indexOf(" "+e+" ")>=0;)d=d.replace(" "+e+" "," ");g=a?Y.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(Y.isFunction(a)?function(c){Y(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c)for(var b,d=0,e=Y(this),f=a.match(la)||[];b=f[d++];)e.hasClass(b)?e.removeClass(b):e.addClass(b);else(c===pa||"boolean"===c)&&(this.className&&Y._data(this,"__className__",this.className),this.className=this.className||a===!1?"":Y._data(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(ob," ").indexOf(b)>=0)return!0;return!1}}),Y.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){Y.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),Y.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}}),Y.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0||!W.reliableHiddenOffsets()&&"none"===(a.style&&a.style.display||Y.css(a,"display"))},Y.expr.filters.visible=function(a){return!Y.expr.filters.hidden(a)};var pb=/%20/g,qb=/\[\]$/,rb=/\r?\n/g,sb=/^(?:submit|button|image|reset|file)$/i,tb=/^(?:input|select|textarea|keygen)/i;Y.param=function(a,b){var c,d=[],e=function(a,b){b=Y.isFunction(b)?b():null==b?"":b,d[d.length]=g(a)+"="+g(b)};if(void 0===b&&(b=Y.ajaxSettings&&Y.ajaxSettings.traditional),Y.isArray(a)||a.jquery&&!Y.isPlainObject(a))Y.each(a,function(){e(this.name,this.value)});else for(c in a)M(c,a[c],b,e);return d.join("&").replace(pb,"+")},Y.fn.extend({serialize:function(){return Y.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=Y.prop(this,"elements");return a?Y.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!Y(this).is(":disabled")&&tb.test(this.nodeName)&&!sb.test(a)&&(this.checked||!wa.test(a))}).map(function(a,b){var c=Y(this).val();return null==c?null:Y.isArray(c)?Y.map(c,function(a){return{name:b.name,value:a.replace(rb,"\r\n")}}):{name:b.name,value:c.replace(rb,"\r\n")}}).get()}}),Y.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||ga;var d=da.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=Y.buildFragment([a],b,e),e&&e.length&&Y(e).remove(),Y.merge([],d.childNodes))};var ub=a.document.documentElement;Y.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=Y.css(a,"position"),l=Y(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=Y.css(a,"top"),i=Y.css(a,"left"),j=("absolute"===k||"fixed"===k)&&Y.inArray("auto",[f,i])>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),Y.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},Y.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){Y.offset.setOffset(this,a,b)});var b,c,d={top:0,left:0},e=this[0],f=e&&e.ownerDocument;return f?(b=f.documentElement,Y.contains(b,e)?(typeof e.getBoundingClientRect!==pa&&(d=e.getBoundingClientRect()),c=N(f),{top:d.top+(c.pageYOffset||b.scrollTop)-(b.clientTop||0),left:d.left+(c.pageXOffset||b.scrollLeft)-(b.clientLeft||0)}):d):void 0},position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];return"fixed"===Y.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),Y.nodeName(a[0],"html")||(c=a.offset()),c.top+=Y.css(a[0],"borderTopWidth",!0),c.left+=Y.css(a[0],"borderLeftWidth",!0)),{top:b.top-c.top-Y.css(d,"marginTop",!0),left:b.left-c.left-Y.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||ub;a&&!Y.nodeName(a,"html")&&"static"===Y.css(a,"position");)a=a.offsetParent;return a||ub})}}),Y.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c=/Y/.test(b);Y.fn[a]=function(d){return va(this,function(a,d,e){var f=N(a);return void 0===e?f?b in f?f[b]:f.document.documentElement[d]:a[d]:void(f?f.scrollTo(c?Y(f).scrollLeft():e,c?e:Y(f).scrollTop()):a[d]=e)},a,d,arguments.length,null)}}),Y.each(["top","left"],function(a,b){Y.cssHooks[b]=G(W.pixelPosition,function(a,c){return c?(c=Ua(a,b),Xa.test(c)?Y(a).position()[b]+"px":c):void 0})}),"function"==typeof m&&m.amd&&m("jquery",[],function(){return Y});var vb=a.jQuery,wb=a.$;return Y.noConflict=function(b){return a.$===Y&&(a.$=wb),b&&a.jQuery===Y&&(a.jQuery=vb),Y},typeof b===pa&&!a.jQuery&&(a.jQuery=a.$=Y),Y}),m(n[81],function(){}),m(n[80],[n[25],n[13],n[65],n[20],n[23],n[29],n[81]],function(a,b,c,d,e,f){function g(){k("unset "),p&&p.destroy&&p.destroy(),p={},o.innerHTML="",a.isEnabled()&&(o.className=""),l.removeClass("screen-shown")}function h(b){var d,e=b.additionalClass?b.additionalClass:"";g(),k("set ",b),b.html?(d=b.html,o.innerHTML=q.replace("%content%",typeof d===j?d():d).replace("%additionalClass%",e)):o.innerHTML=q.replace("%content%",r).replace("%title%",b.title).replace("%text%",b.text).replace("%additionalClass%",e),a.isEnabled()&&(o.className="shown"),b.setup&&b.setup(i),p=b,c(!1),l.addClass("screen-shown")}function i(a){c(!0),k("retry called ",a),s(m,n.RETRY,a)}var j="function",k=b("screen"),l=$("#PlayerOne"),m={},n={RETRY:"retry"},o=f(a.isEnabled()?"ScreensContainer":"ViewerContainer"),p={},q='<div class="screen-container %additionalClass%"><div class="screen-content">%content%</div></div>',r="<p>%text%</p>",s=d.emit;return function(){return{event:n,set:h,unset:g,on:e(d.on,null,m)}}()}),m(n[84],[],function(){function a(a){var c=[];return b(c,a),c}function b(a,c,d){for(var e in c)d&&(c[e].parent=d),a.push(c[e]),c[e].components&&b(a,c[e].components,c[e])}function c(a){var b=[];return d(b,a),b}function d(a,b){for(var c in b)b[c].components&&d(a,b[c].components),a.push(b[c])}function e(a,b,c){c.call(this,a[b]),a[b].parentId&&e(a,a[b].parentId,c)}return{getPreOrderForComponents:a,getPostOrderForComponents:c,hoistUpFunction:e}}),m(n[85],[n[48]],function(a){return[{id:"thumbnail",type:"thumbnail"},{id:"StatusAnimation",type:"statusAnimation"},{id:"SlideShow",type:"slideshow"},{id:"AdHolder",type:"adHolder"},{id:"AudioOnly",type:"audioOnly"},{id:"middleOverlay",type:"container",components:[{id:"middleContainer",type:"container",modifier:"text-center",components:[{id:"MiddlePlay",type:"play"},{id:"MiddleVolume",type:"volume",modifier:"horizontal"},{id:"MiddleCC",type:"cc"},{id:"MiddleShare",type:"share",modifier:"horizontal"},{id:"MiddleFullScreen",type:"fullscreen"}]}]},{id:"playScreen",type:"playScreen"},{id:"messageContainer",type:"messageScreen"},{id:"CustomLogo",type:"customlogo"},{id:"premium",type:"premium"},{id:"statsOverlay",type:"statsOverlay"},{id:"topContainer",type:"container",components:[{id:"topPanelLeft",type:"container",modifier:"half-width",components:[{id:"Title",type:"title"}]},{id:"topPanelRight",type:"container",modifier:"half-width text-right",components:[{id:"Logo",type:"logo"},{id:"LiveBadge",type:"badge"}]}]},{id:"bottomContainer",type:"container",modifier:"panel",components:[{id:"SeekBar",type:"seekbar"},{id:"controlsContainer",type:"container",components:[{id:"controlPanelLeft",type:"container",modifier:"fleft",components:[{id:"Play",type:"play"},{id:"Volume",type:"volume"}]},{id:"controlPanelRight",type:"container",modifier:"fright text-right",components:[{id:"CC",type:"cc",title:a.getText("ui.closedCaption")},{id:"Share",type:"share",title:a.getText("ui.share")
},{id:"Flag",type:"flag",title:a.getText("ui.flag.tooltip")},{id:"Quality",type:"quality",title:a.getText("ui.quality")},{id:"Theater",type:"theater"},{id:"Popout",type:"popout",title:a.getText("ui.popout")},{id:"FullScreen",type:"fullscreen"}]}]}]}]}),m(n[87],[n[7]],function(a){return function(b,c){for(var d in c)b=a(b,new RegExp("#"+d+"#","gi"),c[d]);return b}}),m(n[86],[n[87]],function(a){function b(a,b){a.inheritedCss&&(b.css(a.inheritedCss.all),"container"===a.type?b.css(a.inheritedCss.container):b.css(a.inheritedCss.component)),a.css&&b.css(a.css)}function c(c,d){for(var e in d)c[e]=d[e];var f=$("<div>");return f.attr("id",c.id).addClass(c.type+" component "+(c.modifier||"")),c.title&&f.attr("title",c.title),c.template&&f.html(a(c.template,c.data||{})),b(c,f),c.parent&&c.parent.append(f),f}return{create:c}}),m(n[88],[],function(){function a(a,b){return"string"==typeof a&&a.indexOf("%")!==-1?parseInt(a,10)/100*b:a}function b(a){a.origin.y||c(a),a.origin.x||d(a)}function c(a){switch(a.vertical){case"center":a.origin.y="50%";break;case"bottom":a.origin.y="100%";break;default:a.origin.y=0}}function d(a){switch(a.horizontal){case"center":a.origin.x="50%";break;case"right":a.origin.x="100%";break;default:a.origin.x=0}}function e(b,c,d){if(b.vertical){switch(b.vertical){case"center":d.top="50%";break;case"bottom":d.bottom=0;break;default:d.top=0}d["margin-top"]=-1*a(b.origin.y,c)+"px"}}function f(b,c,d){if(b.horizontal){switch(b.horizontal){case"center":d.left="50%";break;case"right":d.right=0;break;default:d.left=0}return d["margin-left"]=-1*a(b.origin.x,c)+"px",d}}return function(a,c){if(!a)throw"no element specified for component positioning.";if(c){c.origin||(c.origin={});var d={position:"absolute"},g=a[0].clientWidth||a[0].offsetWidth,h=a[0].clientHeight||a[0].offsetHeight;b(c),f(c,g,d),e(c,h,d),a.css(d)}}}),m(n[83],[n[13],n[29],n[12],n[18],n[19],n[84],n[85],n[86],n[88]],function(a,b,c,d,e,f,g,h,i){function j(a){return a.inheritedCss&&a.parent&&(a.inheritedCss=d(a.parent.childCss,a.parent.inheritedCss)),a}function k(a){for(var b=$("<div>"),c=0;c<a.length;c++){var d,e,f=a[c],g=u[f.id];if(x("initiating component:",f.id),d=f.parent?b.find("#"+f.parent.id):b,f=j(f),e=m(g,f,d),u[f.id]={component:e,config:f},!e)throw'no component initiated for "'+f.id+'"'}t.append(b.children())}function m(a,b,c){var d;return d=a.getElement?a.getElement(b,c):h.create(b,{parent:c,template:!!a.getTemplate&&a.getTemplate()}),a.init(d),d}function n(){for(var a=f.getPostOrderForComponents(v),b=0;b<a.length;b++)i(u[a[b].id].component,a[b].position)}function o(a){f.hoistUpFunction(u,a,function(a){i(a.component,a.config.position)})}function p(a){return c(a,function(a){return w+a.type})}function q(a){u[a]&&(u[a].component.remove(),r(a),delete u[a])}function r(a){for(var b in u)u[b].config.parent.id===a&&q(b)}function s(){t.html("");for(var a in u)q(a);u={}}var t,u,v,w="ui/components/",x=a("components");return{init:function(a){t=a,e.on(e.types.UI,"ready",n),e.on(e.types.UI,"position",o),e.on(e.types.UI,"remove",q),v=g,s();var b=f.getPreOrderForComponents(v);l(p(b),function(){e.send(e.types.UI,"loaded");for(var a in arguments)u[b[a].id]=arguments[a]();x("loaded component modules",u),k(b),e.send(e.types.UI,"ready")})},getComponents:function(){return u}}}),m(n[90],[],function(){var a=ustream.vars;return function(){return{title:a.labelOffline.lead,text:a.labelOffline.text}}()}),m(n[91],[n[7]],function(a){var b=ustream.vars,c=(n[91],'<h2>%title%</h2><p>%text%<br /><a href="%link%" target="_blank" id="ViewInApp">%button%</a></p>'),d=c;return function(){var c=b.labelNoFlash;return c.link="http://get.adobe.com/flashplayer/",d=a(d,/%title%/g,c.lead),d=a(d,/%text%/g,c.text),d=a(d,/%button%/g,c.button),d=a(d,/%link%/g,c.link),{html:d}}()}),m(n[89],[n[19],n[80]],function(a,b){function c(a,c){var d;d=typeof c!==g?{data:c}:c,b.set(a(d))}function d(a,d){if(f=a,"agelock"===a)return void l([n[9]],function(a){var c=a(d);c.validate()||b.set(c)});if("offline"===a)return void l([n[90]],function(a){"offline"===f&&b.set(a)});if("getflash"===a)return void l([n[91]],function(a){b.set(a)});try{l(["logic/lock/"+a],function(a){c(a,d)})}catch(e){l([n[36]],function(a){c(a,d)})}}function e(){"offline"===f&&(f=!1,b.unset())}var f,g="object";return{init:function(){var c,g=!1;a.on(a.types.SCREEN,"*",d),a.on(a.types.EVENT,"meta",function(a){g=a}),a.on(a.types.EVENT,"contentUpdate",function(){g=!1,f=!1,b.unset()}),a.on(a.types.EVENT,"live",function(b){g&&(b||c?(c=!1,e()):a.send(a.types.SCREEN,"offline"))}),a.on(a.types.EVENT,"createSlideShow",function(){c=!0,e()}),a.on(a.types.EVENT,"content",function(a){"recorded"===a[0]&&(c=!0,e())})}}}),m(n[94],[],function(){return{AD_EVENT:"ustreamAdEvent",PARSE_DONE:"ustreamAdsParseDone",AD_ERROR:"ustreamProviderError",AD_STARTED:"ustreamAdStarted",AD_FINISHED:"ustreamAdFinished",AD_CHANGED:"ustreamAdChanged",ADHOLDER_SHOW:"ustreamAdHolderShow",ADHOLDER_HIDE:"ustreamAdHolderHide",ADHOLDER_VIDEO:"ustreamAdHolderVideo",types:{VIDEO_FINISHED:"adEvent.type.videoFinished",VIDEO_STARTED:"adEvent.type.videoStarted",PREROLL_DONE:"adEvent.type.prerollDone",COMPANION:"adEvent.type.companion",AD_RESIZE:"adEvent.type.adResize"}}}),m(n[95],[],function(){return{SHARE:"share",LOADING:"loading",BROADCASTER:"broadcaster",META:"meta",LOGO:"logo",THUMBNAIL:"thumbnail",VIEWERS_UPDATE:"viewersUpdate",ALL_TIME_TOTAL_UPDATE:"allTimeTotalUpdate"}}),m(n[93],[n[26],n[17],n[16],n[19],n[94],n[95]],function(a,b,c,d,e,f){function g(a){a!==H&&(H=a,c.set("mte_viewer_recorded_lastposition",JSON.stringify({id:b.getMid(),value:a}),{expires:14}))}function h(){var a,d=c.get("mte_viewer_recorded_lastposition");"string"==typeof d&&(a=JSON.parse(d),a.id===b.id()&&(G=a.value))}function i(){return F?(F[1]-F[0])*I:I}function j(b){var c=a.getByContent("startAt");I=b,I&&(c?m(c/i()):G?(m(G),G=!1):F&&m(0)),d.send(d.types.UI,"duration",i())}function k(a){F&&(a=(a-F[0])/(F[1]-F[0]),a>1&&(d.send(d.types.COMMAND,"pause"),d.send(d.types.COMMAND,"seek",[F[0]*I]),a=0)),g(a),d.send(d.types.UI,"progress",a)}function l(a){F=a,j(I)}function m(a){var b;b="object"==typeof a&&a.hasOwnProperty("to")?a.to:"number"==typeof a?a:0,F&&(b=F[0]+(F[1]-F[0])*b),d.send(d.types.COMMAND,"seek",[b*I])}function n(){F=null,I=0,!a.autoplay&&J.pictures&&J.pictures.length&&(a.autoplay=!0,d.send(d.types.COMMAND,"play")),d.send(d.types.EVENT,"destroySlideShow"),d.send(d.types.UI,"showControls"),J={},K=null}function o(a){K=a,d.send(d.types.EVENT,"live",a)}function p(a){d.send(d.types.EVENT,f.ALL_TIME_TOTAL_UPDATE,a)}function q(a){d.send(d.types.EVENT,f.VIEWERS_UPDATE,a)}function r(a){d.send(d.types.EVENT,f.THUMBNAIL,a)}function s(a){d.send(d.types.EVENT,f.LOGO,a)}function t(a){d.send(d.types.EVENT,f.BROADCASTER,a)}function u(a){d.send(d.types.UI,f.LOADING,a)}function v(a,b){d.send(d.types.SCREEN,a,b)}function w(a){d.send(d.types.EVENT,f.SHARE,a)}function x(a){d.send(d.types.EVENT,"title",a)}function y(a){d.send(d.types.EVENT,"createSlideShow",a)}function z(){d.send(d.types.EVENT,"destroySlideShow"),a.autoplay&&d.send(d.types.COMMAND,"play"),d.send(d.types.UI,"showControls")}function A(a){d.send(d.types.UI,a?"show":"hide")}function B(a){d.send(d.types.EVENT,"videoAdPlaying",a)}function C(a){d.send(d.types.EVENT,"playing",a)}function D(){d.send(d.types.EVENT,"prerollDone")}function E(a){var b=!1;switch(a){case"show":b=e.ADHOLDER_SHOW;break;case"hide":b=e.ADHOLDER_HIDE;break;case"video":b=e.ADHOLDER_VIDEO}b&&d.send(d.types.EVENT,b)}var F,G,H,I=0,J={},K=null;return{init:function(){h()},setDuration:j,setProgress:k,setHighlight:l,setSeek:m,setContent:n,setLive:o,setThumbnail:r,setLogo:s,setBroadcaster:t,setLoading:u,setScreen:v,setShare:w,setTitle:x,allTimeTotalUpdate:p,viewersUpdate:q,startSlideShow:y,stopSlideShow:z,setUiVisibility:A,setPMPromoVisibility:B,setPlayingStatus:C,setPrerollDone:D,setAdHolderStyle:E}}),m(n[92],[n[19],n[93]],function(a,b){function c(a){b.setHighlight(a)}function d(a){b.setSeek(a)}function e(a){b.setProgress(a)}function f(a){b.setDuration(a)}function g(){b.setContent()}return{init:function(){a.on(a.types.EVENT,"duration",f),a.on(a.types.EVENT,"progress",e),a.on(a.types.EVENT,"highlight",c),a.on(a.types.EVENT,"contentUpdate",g),a.on(a.types.UI,"setSeek",d)}}}),m(n[97],[],function(){return'<object width="100%" height="100%"><param name="allowScriptAccess" value="always"><param name="movie" value="'+ustream.vars.staticUrl+'embed2/img/clipboard.swf"><embed src="'+ustream.vars.staticUrl+'embed2/img/clipboard.swf" allowscriptaccess="always" width="100%" height="100%"> </embed></object>'}),m(n[96],[n[19],n[26],n[17],n[48],n[23],n[16],n[13],n[27],n[97],n[95]],function(b,d,g,h,j,k,l,m,n,o){function p(){var a=M.info.on;M.info.on=!a,b.send(b.types.EVENT,"showInfo",M.info.on),y()}function q(){P=!P,s()}function r(){Q=!Q,s()}function s(){k.set(N,P),k.set(O,Q),M.debug.on=P,M.atlasLog.on=Q,m({debug:P,atlasDebug:Q}),y()}function t(){var b=a.open(g.getUrl(),"_blank");b.focus()}function u(){k.set("showHiddenContextMenuItems",!1),d.showHiddenContextMenuItems=!1,y()}function v(a){R("action: "+a),b.send(b.types.EVENT,a)}function w(a){var b=G.parent().offset(),d=a.pageX?a.pageX:a.clientX+c.body.scrollLeft+c.documentElement.scrollLeft,e=parseInt(G.css("width").replace("px","")),f=b.left+F[0].clientWidth-e-5,g=b.left+5,h=i.min(f,i.max(g,d-5))-b.left,j=a.pageY?a.pageY:a.clientY+c.body.scrollTop+c.documentElement.scrollTop,k=parseInt(G.css("height").replace("px","")),l=b.top+F[0].clientHeight-k-5,m=b.top+5,n=i.min(l,i.max(m,j-5))-b.top;G.css({left:h+"px",top:n+"px"}),G.addClass("active")}function x(a){var b=M[a];return b.label?b.label:b.labelOn&&b.labelOff?b.on?b.labelOff:b.labelOn:a}function y(){var a,b="";G.empty(),H=!1;for(a in M)(!M[a].hidden||M[a].hidden&&d.showHiddenContextMenuItems&&!M[a].unavailable)&&(b+='<div class="contextMenuItem" data-id="'+a+'">'+x(a)+"</div>",H=!0);G.append(b),G.find("div").on("mouseover",function(a){switch($(a.target).attr("data-id")){case"username":J=K;break;case"copycidvid":J=g.id()}})}function z(a){L+=String.fromCharCode(a.keyCode),"IDKFA"===L&&(k.set("showHiddenContextMenuItems",!0),d.showHiddenContextMenuItems=!0,y()),f(I),I=e(function(){L=""},1e3)}function A(a){var b,c=$(a.target);G.removeClass("active"),G.css({height:"auto"}),c.closest(".contextMenu").length&&(b=c.attr("data-id"),"function"==typeof M[b].action&&M[b].action.apply(null,M[b].args))}function B(c){g.id();a.getSelection().toString().length>0||!H||d.cmenu===!1&&d.showHiddenContextMenuItems===!1||(a.ustream.copyToClipboard=function(){return e(function(){G.removeClass("active"),b.send(b.types.UI,"showMessage",'"'+J+'" copied to clipboard.')},0),J},c.preventDefault(),w(c))}function C(a){K=a.userName,a.broadcaster&&a.broadcaster.benefits&&a.broadcaster.benefits.indexOf("fullbranding")>-1&&(M.ustream.hidden=!0,M.ustream.unavailable=!0),y()}function D(a){var b=a.benefits&&a.benefits.indexOf("fullbranding")>-1;M.ustream.hidden=b,M.ustream.unavailable=b}function E(e){F=e,d.htmlplayback&&(R("init contextmenu"),G=$("<div>").addClass("contextMenu"),F.on("contextmenu",B),F.on("keydown",z),b.on(b.types.EVENT,o.META,C),b.on(b.types.EVENT,o.BROADCASTER,D),$(c).on("click",A),$(a).on("blur",A),y(),s(),F.append(G))}var F,G,H,I,J,K,L="",M={ustream:{hidden:!1,label:h.getText("ui.contextMenu.ustream"),action:t},username:{hidden:!0,label:'<a class="copybtn">'+n+h.getText("ui.contextMenu.copyusername")+"</a>",action:null},copycidvid:{hidden:!0,label:'<a class="copybtn">'+n+h.getText("ui.contextMenu.copycidvid")+"</a>",action:null},logSending:{hidden:!0,label:h.getText("ui.contextMenu.sendLog"),action:j(v,null,"sendLog")},debug:{hidden:!0,on:k.get("jsDebugConsoleLogOn"),labelOn:h.getText("ui.contextMenu.debugOn"),labelOff:h.getText("ui.contextMenu.debugOff"),action:q},atlasLog:{hidden:!0,on:k.get("atlasConsoleLogOn"),labelOn:"Turn on Atlas log level 0",labelOff:"Turn off Atlas log level 0",action:r},provider:{hidden:!0,label:h.getText("ui.contextMenu.changeProvider"),action:j(v,null,"changeProvider")},stageVideo:{hidden:!0,unavailable:!0,on:!0,labelOn:h.getText("ui.contextMenu.stageVideoOn"),labelOff:h.getText("ui.contextMenu.stageVideoOff"),action:j(v,null,"switchStageVideo")},info:{hidden:!0,on:!1,labelOn:h.getText("ui.contextMenu.infoOn"),labelOff:h.getText("ui.contextMenu.infoOff"),action:p},hide:{hidden:!0,label:h.getText("ui.contextMenu.hideSpecialItems"),action:u}},N="jsDebugConsoleLogOn",O="atlasConsoleLogOn",P=k.get(N),Q=k.get(O),R=l("ui/contextMenu");return{init:E}}),m(n[98],[n[13],n[7],n[73],n[31],n[29],n[30],n[19]],function(a,b,c,d,e,f,g){function h(a){var b,c;return a.url?(b=f("a"),b.className="watermark align-"+a.align,b.style.margin=a.margin+"px",a.clickUrl&&(b.href=a.clickUrl),b.target="_blank",c=f("img"),c.src=a.url,d(b,c)):(b=f("span"),b.id="UstreamLogo",b.className="watermark ustream align-"+a.align,b.style.margin=a.margin+"px"),d(r,b),function(b){function c(){d.parentNode&&d.parentNode.removeChild(d)}var d=b,e=d.tagName.toLowerCase(),f=d;return"a"===e&&(f=d.getElementsByTagName("img")[0],f.addEventListener("load",function(a){j(f)})),{type:e,watermark:f,url:a.url,margin:a.margin,align:a.align,remove:c}}(b)}function j(a){var b,d,e,f,g,h=c(),j=i.min,k=i.floor,l=a.className;a.originalWidth||(a.originalWidth=a.width,a.originalHeight=a.height),b=a.originalWidth,d=a.originalHeight,e=j(1,j(h[1]/7*2/d,h[0]/7*2/b)),f=k(b*e),g=k(d*e),a.style.width=f+"px",a.style.height=g+"px",(l.indexOf("align-1")>-1||l.indexOf("align-7")>-1)&&(a.style["margin-left"]=k(f/2)*-1+"px"),(l.indexOf("align-3")>-1||l.indexOf("align-5")>-1)&&(a.style["margin-top"]=k(g/2)*-1+"px")}function k(){q.forEach(function(a){"a"===a.type&&j(a.watermark)})}function l(a){p("update",a),m();var b,c=[];return a.data.forEach(function(a){b=h(a),c.push(b.align),q.push(b)}),o(c),q}function m(){q.forEach(function(a){return a.remove(),null}),q=[]}function o(a){var b=a.join("").indexOf("22")>-1;b&&q.forEach(function(a){"span"===a.type&&(a.align="0",a.watermark.className=a.watermark.className.replace("align-2",""),a.watermark.className+="align-0")})}var p=a(n[98]),q=[],r=e("EmbedViewer");return g.on(g.types.EVENT,"resize",k),function(){return{update:l,remove:m}}()}),m(n[82],[n[17],n[26],n[35],n[48],n[32],n[19],n[80],n[83],n[89],n[92],n[93],n[96],n[97],n[81],n[8]],function(b,c,d,g,h,i,k,m,o,p,q,r,s,t,u){function v(){ga||(ba.removeClass("slideshow"),ba.removeClass("ui-hidden"),z())}function w(){K(),ba.addClass("ui-hidden")}function x(){c.controls&&ba.removeClass(da)}function y(){ba.addClass(da)}function z(){U=!1,A(),D()}function A(a){var c=(new j).getTime();return U&&c-U>2e3?void(U=!1):(U=(new j).getTime(),aa.hasClass("hovered")||ba.hasClass("autoplay-false")||!b.isContentPlayable()||(aa.addClass("hovered"),Z=!0,I(),i.send(i.types.COMMAND,"cursor",[!0])),f(W),void(a&&!$(a.target).closest("#bottomContainer").length&&F()))}function B(a){aa.toggleClass(ea,a),aa.removeClass(fa)}function C(a){var b=ca&&a;aa.toggleClass(fa,b),aa.removeClass(ea)}function D(){F()}function E(a){ca=a,ca?F():(U=void 0,A(),B(!1))}function F(){f(W),W=e(G,2e3)}function G(){!_&&$(".play.component").hasClass("playing")&&(e(H,200),ba.hasClass("fullscreen-mode")&&!u.ff&&i.send(i.types.COMMAND,"cursor",[!1]))}function H(){aa.removeClass("hovered"),Z=!1,I(),K()}function I(){var a=$("#bottomContainer");a.length&&(Z?i.send(i.types.COMMAND,"adOffset",[a[0].offsetHeight]):i.send(i.types.COMMAND,"adOffset",[0]))}function J(){return X?(i.send(i.types.UI,"mouseDblClick"),f(X),void(X=!1)):(X=e(function(){i.send(i.types.UI,"mouseClick"),X=!1},200),K(),void G())}function K(){i.send(i.types.UI,"closePopovers")}function L(a){_=a}function M(){i.on(i.types.EVENT,"logSendingStarted",function(){i.send(i.types.UI,"showPermanentMessage",g.getText("ui.sendingLog"))}),i.on(i.types.EVENT,"logSendingComplete",function(b){i.send(i.types.UI,"showPermanentMessage",'Log sent successfully <br><br> <a class="bttn">'+s+g.getText("ui.copyId")+"</a>"),a.ustream.copyToClipboard=function(){return e(function(){i.send(i.types.UI,"showMessage",g.getText("ui.idCopied"))},0),b}})}function N(){i.on(i.types.UI,"show",v),i.on(i.types.UI,"hide",w),i.on(i.types.UI,"showControls",x),i.on(i.types.UI,"hideControls",y),i.on(i.types.UI,"dragging",L),i.on(i.types.UI,"mouseStop",D),i.on(i.types.UI,"mouseMove",A),aa.on("mousemove",A),ba.on("mousemove",function(){ba.find("#ViewerContainer")&&(Y?f(Y):i.send(i.types.UI,"mouseMove"),Y=e(function(){f(Y),Y=0,i.send(i.types.UI,"mouseStop")},500))}),i.on(i.types.UI,"hover",z),i.on(i.types.EVENT,"playing",E),i.on(i.types.EVENT,"createSlideShow",function(){ba.addClass("slideshow"),H(),B(!1)}),i.on(i.types.EVENT,"currentOffairSlide",function(a){"image"===a.itemType&&H()}),ba.on("mouseleave",function(){K(),V&&V.is(":visible")?G():F()}),ba.find("#ViewerContainer").on("click",J),ba.on("keydown",function(a){a&&a.target&&("TEXTAREA"===a.target.nodeName||"INPUT"===a.target.nodeName||"OBJECT"===a.target.nodeName)||(a.preventDefault(),a.stopPropagation(),Q()||i.send(i.types.UI,"keyDown",a))}),ba.on("keyup",function(a){a&&a.target&&("TEXTAREA"===a.target.nodeName||"INPUT"===a.target.nodeName||"OBJECT"===a.target.nodeName)||(a.preventDefault(),a.stopPropagation(),Q()||i.send(i.types.UI,"keyUp",a))}),i.on(i.types.EVENT,"contentUpdate",function(){v()}),i.on(i.types.UI,"loading",B),i.on(i.types.EVENT,"buffering",C),i.on(i.types.UI,"chromeThrottle",function(a){ga=a,ba.toggleClass("ui-hidden",a)}),i.on(i.types.EVENT,"videoAdPlaying",function(a){ba.toggleClass("advert-shown",a),c.htmlplayback||ba.toggleClass("advert-shown-premium",a),ba.toggleClass("ui-hidden",a)}),i.on(i.types.EVENT,"popoutClick",function(){var d=c.getByContent("meta"),e=b.getUrl(!0),f=d.adFree||c.adFree?411:500;a.open(e,"ChannelVideoPopup","width=730,height="+f+",scrollbars=no,resizable=no"),i.send(i.types.COMMAND,"pause")}),h(a,"resize",function(){i.send(i.types.EVENT,"resize"),P()})}function O(){ba.addClass("ui-enabled"),c.sitemode&&ba.addClass("site-mode"),c.viewingexperience&&ba.addClass("viewingexperience"),c.controls||y(),d&&ba.addClass("html-mode"),c.htmlplayback&&ba.addClass("html-playback"),P()}function P(){ba.removeClass("size-small size-medium size-big"),ba[0].clientWidth<=240?ba.addClass("size-small"):ba[0].clientWidth<=360?ba.addClass("size-medium"):ba[0].clientWidth<=480&&ba.addClass("size-big")}function Q(){return $(".overlay-container.shown").length>0}function R(){return $(".popover-container.opened").length>0}function S(){V=$("#middleContainer"),$("#middleOverlay").on("click",function(a){var b=$(a.target);b.closest("#middleContainer").length&&"middleContainer"!==b.attr("id")||i.send(i.types.EVENT,"overlayClick",{})})}var T,U,V,W,X,Y,Z,_,aa=$("#ComponentsContainer"),ba=$("#PlayerOne"),ca=!1,da="ui-controls-hidden",ea="loading",fa="buffering",ga=!1;return{screen:k,components:m,getBody:function(){return ba},fullscreenMode:function(){return ba.hasClass("fullscreen-mode")},init:function(){O(),N(),M(),i.on(i.types.EVENT,"fullscreenChange",I),i.on(i.types.EVENT,"meta",I),i.on(i.types.UI,"ready",S),i.on(i.types.EVENT,"ready",v),i.on(i.types.UI,"onPopoverOpen",function(){V&&V.addClass("popover-opened")}),i.on(i.types.UI,"closePopovers",function(){V&&V.removeClass("popover-opened")}),i.on(i.types.UI,"onPopoverClose",function(){V&&V.removeClass("popover-opened")}),m.init(aa),o.init(),q.init(),p.init(),r.init(ba)},setScreen:function(a){l("ui/screen/"+a,function(a){k.set(a),i.send(i.types.COMMAND,"stop")})},unsetScreen:function(){k.unset()},updateBrand:function(a){T?T.update(a):l([n[98]],function(b){T=b,T.update(a)})},isPopoverShown:R,isOverlayShown:Q}}),m(n[79],[n[17],n[26],n[13],n[78],n[11],n[12],n[16],n[22],n[80],n[82],n[8]],function(a,b,c,d,e,f,g,i,j,k,m){function o(){var a=!1,c=t;if(c&&c.type){if(s("hashlock is present "),b.getByContent("hashObj")&&!ustream.vars.isViewerRegistrationEnabled)return s("cached hashlock found"),!1;"advanced"===t.type&&t.url.indexOf("hashlock/webinar")>-1&&m.ssl&&(t.url=t.url.replace("http:","https:")),l(["ui/screen/hashlock"+c.type],function(a){a.prepare(),j.set(a)}),a=!0}return a}function p(){if(t){var c,e,f,g,i,j,k=t,l=k.type&&"advanced"===k.type&&k.watchedUrl,n=ustream.vars.isViewerRegistrationEnabled;if(!b.getByContent("watched")&&(n||a.isCid()&&l)){for(b.setByContent("watched",!0),c=h(k.watchedUrl),c.indexOf("hashlock/webinar")>-1&&m.ssl&&(c=c.replace("http:","https:")),e=b.getByContent("hash"),e=JSON.parse(e),s("hashObj",e),j=d(),g=0,i=e.length;g<i;g++)if(e[g].hash){f=e[g].hash;break}s("hash",f),c=c.replace("@@channelId@@",a.id()).replace("@@contentType@@",a.isCid()?"channel":"recorded").replace("@@contentId@@",a.id()).replace("@@hash@@",f),j.open("GET",c),j.send()}}}function q(){g.set(g.getHashStorageName(),null),b.update()}var r=ustream.vars,s=c(n[79]),t=r.hashLockData;return{check:o,report:p,clear:q}}),m(n[100],[],function(){function a(b){var c,d,e,f=b.attributes;if(f)for(c=f.length-1;c>=0;c-=1)e=f[c].name,"function"==typeof b[e]&&(b[e]=null);if(f=b.childNodes)for(d=f.length,c=0;c<d;c+=1)a(b.childNodes[c])}return function(b){a(b)}}),m(n[101],[],function(){return function(a){a&&a.parentNode&&a.parentNode.removeChild(a)}}),m(n[103],[n[13]],function(b){function c(a,b,c,e){a&&(b||(b="click"),d(" category: "+a+" action: "+b+" label: "+c+" value: "+e),_gaq.push(["_trackEvent",a,b,c,e]))}var d=b(n[103]);return a.ustream||(a.ustream={}),a.ustream.track=c,a.ustream.track.ga=c,c}),m(n[102],[n[26],n[13],n[20],n[65],n[103],n[32],n[33],n[76],n[74],n[19],n[8]],function(a,b,c,d,e,g,h,i,k,l,m){function o(a){return!!a&&a.mediaId.indexOf("channel")>-1}function p(){N("triggering STREAMOFF"),Q(O,P.STREAMOFF)}function q(a,b){a!==V&&(N("networkState changed from "+T[V]+" to "+T[a]),V=a,b.willGoOffline&&3===a&&p())}function r(a,b){a!==U&&(N("readyState changed from "+S[U]+" to "+S[a]),(U<=a&&a<4||U>a&&a<4)&&K(!0),0==U&&1==a&&d(!1),4===a&&(K(!1),d(!1)),b.willGoOffline&&a<3&&p(),U=a)}function s(a){var b,c=a.buffered.length>0&&a.played.length>0;if(!a.paused&&o(a)){if(N("bufferData ",c,!1,!0),c&&0===a.buffered.end(0)&&0===a.buffered.start(0)||c&&a.buffered.end(0)===1/0&&0===a.buffered.start(0)||m.android&&4==m.android[0]&&m.android[1]<=3)return d(!1),void K(!1);c&&(b=a.remainingBuffer,a.remainingBuffer=a.buffered.end(0)-a.played.end(0)),c&&a.remainingBuffer>0?(N.graph("buffer",a.remainingBuffer),!$&&b&&b===a.remainingBuffer?(_+=1,_>10&&(N("possible error: we seem to be playing, but the buffer stalled"),$=!0,a.willGoOffline?p():Q(O,P.er,{code:2,message:R[2]}),a.pause()),d(!0),K(!0)):b&&b!==a.remainingBuffer&&($=!1,_=0,d(!1),K(!1))):m.android&&(4==m.android[0]&&4==m.android[1]||5==m.android[0])||m.playstation?(d(!1),K(!1)):(N("remainingBuffer zero, or has no buffer"),d(!0),K(!0))}}function t(a){var b=a.type,c=a.target;switch(N("mediaEvent ",b,!1,!0),r(c.readyState,c),q(c.networkState,c),s(c),b){case P.er:A(a);break;case P.ti:y(a);break;case P.pl:case P.pg:z(a);break;case P.lo:B(a);break;case P.cp:C(a);break;case P.ct:D(a);break;case P.pa:E(a);break;case P.en:F(a);break;case P.wa:G(a);break;case P.st:H(a);break;case P.se:u(a);break;case P.sd:v(a)}}function u(a){ea==-1&&(ea=M),N("seeking from "+ea+" to "+a.target.currentTime)}function v(a){ea==-1&&(ea=M),N("seeked from "+ea+" to "+a.target.currentTime),l.send(l.types.EVENT,"mediaSeek",{seekFrom:ea,seekTo:a.target.currentTime,mediaId:a.target.mediaId}),ea=-1}function w(a){if(!a.ustreamEvents){I(),W=k(a.mediaId),N("setup ");var b;for(b in P)g(a,P[b],t);a.ustreamEvents=!0}}function x(a){if(a){W&&W.buffering(!1),W=null,N("teardown "),U=0,V=0,X=0,aa=!1,ba=!1,da=!1,$=!1,_=0,I();var b;for(b in P)h(a,P[b],t);a.ustreamEvents=!1}}function y(a){M=a&&a.target?a.target.currentTime:0,a.target&&a.target.currentTime>0&&!ba&&z(),aa||(aa=!0),I();var b=+new j-X;X=+new j,b<1e3&&da&&(da=!1,l.send(l.types.EVENT,"metaready",!0))}function z(){ba=!0,d(!1),J(!0)}function A(a){var b=a.target,c=0,d="";J(!1),ba=!1,b.error&&b.error.code&&(c=b.error.code,d=R[b.error.code],W&&W.mediaError(d),Q(O,P.er,{code:c,message:d}))}function B(a){l.send(l.types.EVENT,"quality",!1),l.send(l.types.EVENT,"mediaSeek",{seekFrom:0,seekTo:0,mediaId:a.target.mediaId})}function C(){Q(O,P.cp),ca||(l.send(l.types.EVENT,"ready",!0),ca=!0)}function D(){da=!0}function E(a){J(!1),ba=!1,d(!1),K(!1),Q(O,P.pa),a.target.willGoOffline&&p()}function F(){J(!1),ba=!1,l.send(l.types.EVENT,"finished",!0),Q(O,P.en)}function G(a){J(!1),ba=!1,d(!0),a.target.willGoOffline&&p()}function H(){}function I(){f(Z),Z=0,Y=!1}function J(b){W&&W.playing(b),a.playing=b,Q(O,P.PLAYING,b),l.send(l.types.EVENT,"playing",b)}function K(a){L!==a&&(L=a,W&&W.buffering(a))}var L,M,N=b(n[102]),O={},P={ab:"abort",cl:"click",cp:"canplay",ct:"canplaythrough",du:"durationchange",en:"ended",er:"error",et:"emptied",lo:"loadedmetadata",ld:"loadeddata",lt:"loadstart",pl:"play",pg:"playing",pa:"pause",pr:"progress",ra:"ratechange",se:"seeking",sd:"seeked",st:"stalled",su:"suspend",ti:"timeupdate",vo:"volumechange",wa:"waiting",qtmu:"qt_timedmetadataupdated",PLAYING:"playing",STREAMOFF:"streamoff"},Q=c.emit,R=["","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED"],S=["HAVE_NOTHING","HAVE_METADATA","HAVE_CURRENT_DATA","HAVE_FUTURE_DATA","HAVE_ENOUGH_DATA"],T=["NETWORK_EMPTY","NETWORK_IDLE","NETWORK_LOADING","NETWORK_NO_SOURCE"],U=0,V=0,W=null,X=0,Y=!1,Z=0,$=!1,_=0,aa=!1,ba=!1,ca=!1,da=!1,ea=-1;return function(){return{event:P,setup:w,remove:x,on:function(a,b){O[a]||(O[a]=[]),O[a].push(b)}}}()}),m(n[104],[n[75]],function(a){function b(a,b,i){d||(d=i,g=a),j!=-1&&f(j),h=b,j=e(c,1e3)}function c(){var b=a(d);b.send(i,[g,h]),d=null}var d,g,h,i="seek",j=-1;return{seek:b}}),m(n[99],[n[26],n[13],n[65],n[100],n[30],n[101],n[31],n[29],n[63],n[20],n[76],n[102],n[104],n[67],n[19],n[8]],function(b,d,e,f,g,h,i,k,l,m,o,p,q,r,s,t){function u(a,b,c){m.on(N,a,b,c)}function v(a,b,c){m.off(N,a,b,c)}function w(a,c,d){var f=g("source"),h=g("video");return K=d,h.originalContent=a,h.mediaId=d,h.id="UViewer",b.autoplay&&h.setAttribute("autoplay",!0),b.playsinline&&h.setAttribute("webkit-playsinline",!0),h.setAttribute("controls",!0),h.setAttribute("preload","none"),h.setAttribute("x-webkit-airplay","allow"),h.instanceId=(+new j).toString(32),h.setAttribute("x-ustream-instance",h.instanceId),i(h,f),i(Q,h),x(h,a,c,d),p.setup(h),e(!1),M("created"),h}function x(a,c,d,f){if(!a)return w(c,d,f);a.playing&&a.pause();var g=l("source",a)[0],h="src",i=b.getByContent("meta");return g.removeAttribute(h),a.removeAttribute(h),g.setAttribute(h,c),a.setAttribute(h,c),y(a,i.title),d&&a.setAttribute("poster",d),a.originalContent=c,e(!1),M("set source",c),a}function y(b,d){b&&b.setAttribute&&(t.android&&"4"==t.android[0]||(d+=" - Ustream.tv",M("set title",d),b.setAttribute("title",d),c.title=a.title=d))}function z(a,b){a&&a.setAttribute&&(t.android&&"4"==t.android[0]||(M("set poster",b),a.setAttribute("poster",b)))}function A(a){if(!a)return a;M("clear"),H(a);var b=l("source",a)[0];return h(b),b=null,p.remove(a),a.src="",a.load(),f(a),h(a),a=null,null}function B(a,c){M("media error ",a.message);var d=b.getByContent("streamUrl"),e=b.getByContent("thumbnail");if(c&&!c.willGoOffline&&4===a.code&&t.android&&4===t.android[0]&&t.chrome){var f=c.webkitDisplayingFullscreen;return M(""+a+" , fullscreen was: "+f),c=A(c),c=w(d,e,K)}return P(N,O.ERROR,a),c=A(c)}function C(){P(N,O.ENDED)}function D(a,c){P(N,O.PLAYING,c),c&&!b.controls&&a&&!a.firstplay&&(a.firstplay=!0,a.removeAttribute("controls"))}function E(a){var c=b.getByContent("startAt");c&&(M("fast forward to",c),c=+c,a&&a.currentTime<c&&(a.currentTime=c))}function F(a,b,c){M("resume after advert ",b),a.setAttribute("controls",!0),p.setup(a),c&&a.pause()}function G(a){M("reinit");var c=b.getByContent("streamUrl"),d=b.getByContent("thumbnail"),e=a.mediaId;return H(a),a=A(a),a=w(c,d,e)}function H(a){a&&(a.paused||a.pause(),c.exitFullscreen?c.exitFullscreen():c.webkitExitFullscreen&&c.webkitExitFullscreen(),a.exitFullscreen?a.exitFullscreen():a.webkitExitFullscreen&&a.webkitExitFullscreen())}function I(a){return a.mediaId.indexOf("channel")>-1}function J(a){a.mediaId&&a.mediaId.indexOf("recorded")!=-1&&q.seek(a.seekFrom,a.seekTo,a.mediaId)}var K,L="object",M=d(n[99]),N={},O={ERROR:"error",PLAYING:"playing",ENDED:"ended",STREAMOFF:"streamoffline"},P=m.emit,Q=c.querySelector("#EmbedViewer .viewer");return function(){var a,c;return p.on(p.event.er,function(b){H(a),a=B(b,a)}),p.on(p.event.en,C),p.on(p.event.cp,function(){E(a)}),p.on(p.event.PLAYING,function(b){D(a,b)}),p.on(p.event.STREAMOFF,function(){P(N,O.STREAMOFF)}),p.on(p.event.pa,function(){var b,c;a&&I(a)&&t.ios&&t.ios.length>1&&(b=Number(t.ios[0]),c=Number(t.ios[1]),(b<9||9===b&&c<3)&&(a=G(a)))}),r.on(r.event.RESETVIEWER,function(){p.remove(a)}),r.on(r.event.RESUMECONTENT,function(b){var c=b[0],d=b[1];F(a,c,d)}),o.on(o.event.COMMAND,function(b){M("api command ",b),!a||["create","clear","src","on"].indexOf(b.cmd)>-1||c[b.cmd]&&c[b.cmd].apply(c,b.args)}),s.on(s.types.COMMAND,"*",function(b,d){!a||["create","clear","src","on"].indexOf(b)>-1||c[b]&&c[b].apply(c,d)}),s.on(s.types.EVENT,"mediaSeek",J),c={event:O,prepareToOffline:function(){a&&(a.willGoOffline=!0,a.paused&&P(N,O.STREAMOFF))},create:function(b,c,d){M("create method "),a?(a.mediaId=d,a=x(a,b,c)):a=w(b,c,d),a.willGoOffline=!1,s.send(s.types.EVENT,"ready",!0),r.start(a)},src:function(b,c,d){M("src method ",arguments),a?(a.mediaId=d,a=x(a,b,c,d)):a=w(b,c,d),a.willGoOffline=!1,s.send(s.types.EVENT,"ready",!0),r.start(a)},poster:function(b){z(a,b)},title:function(b){y(a,b)},clear:function(){a&&a.pause(),a=A(a)},on:u,off:v,play:function(){a&&a.play()},pause:function(){a&&a.pause()},stop:function(){a&&a.pause()},load:function(){a&&(a.pause(),a=A(a))},seek:function(b){typeof b===L&&null!==b&&(b=b[0]),a&&(a.currentTime=+b)},volume:function(b){b=+b||0,b>100&&(b=100),b<0&&(b=0),b<1&&b>0||(b/=100),a&&(a.volume=b)},quality:function(){},duration:function(){var c=b.getByContent("meta"),d=c?c.videoLength:0,e=a&&a.duration||d||0;return o.send({property:{duration:e}}),s.send("property.duration",e),e},progress:function(){var b=a&&a.currentTime||0;return o.send({property:{progress:b}}),s.send("property.progress",b),b},mediatitle:function(){var a=b.getByContent("meta").title||"";return o.send({property:{mediatitle:a}}),a}}}()}),m(n[106],[n[26],n[28],n[75],n[62],n[22],n[13],n[20],n[23],n[99]],function(a,b,c,d,e,f,g,h,i){var j=ustream.vars,k=f(n[106]),l={NEXT:"offairvideos_next",STOP:"offairvideos_stop"},m=g.emit,o="mte_use_longpoll";return function(f){return k("create ",f),function(f){function n(f,g){var h;return A=!1,v&&v.destroy(),w&&w.destroy(),g<0?g=0:g+=1,h=+f[g],h?(k("loading offair video id ",h),v=c({app:"recorded",id:h,sessionId:j.sessionId,hash:a.getByContent("hash"),password:a.getByContent("channelPassword"),referrer:b,flotAddress:a.flot,umsDebugMode:a.umsDebugMode,bdtools:a.bdtools,longpoll:"1"===e.get(o)}),w=d(v),w.on(w.event.REJECT,s),w.on(w.event.UPDATE,p),v.on(v.event.OPEN,t),v.connect(),m(y,l.NEXT,h)):(k("no more offair videos"),g=-1),g}function p(b){if("stream"===b.type&&!A){if(k("got video data",b),b.stream.length<1)return k("no mp4 available in response"),void r();i.create(b.stream[0],!1,v.mediaId),A=!0}if("meta"===b.type&&b.cut){var c=b.cut;a.setByContent("startAt",b.videoLength*c[0]),a.setByContent("endAt",b.videoLength*c[1])}"thumbnail"===b.type&&(k("got video data",b),i.poster(b.liveThumbnail))}function q(){m(y,l.STOP),u()}function r(){z=n(x,z),z<0&&(f=[],m(y,l.STOP),u())}function s(){k("video playback error"),m(y,l.STOP),u()}function t(a){e.set(o,a.longpoll?"1":"0",{expires:30})}function u(){k("clean up"),a.setByContent("startAt",!1),a.setByContent("endAt",!1),y={},i&&(i.stop(),i.clear(),i.off(null,null,"offairvideos")),A=!1,v&&v.destroy()}var v,w,x=f,y={},z=-1,A=!1;return i.on(i.event.ERROR,q,"offairvideos"),i.on(i.event.ENDED,r,"offairvideos"),{event:l,play:r,destroy:u,on:h(g.on,null,y)}}(f)}}),m(n[105],[n[19],n[13],n[20],n[93]],function(a,b,c,d){function e(){return s||r}function f(){s=!1,m&&(m.destroy(),m=null),d.stopSlideShow()}function g(a){
s||r||(o("start ",a),f(),a&&a.videos?(s=!0,l([n[106]],function(b){m=b(a.videos),m.on(m.event.STOP,i),m.on(m.event.NEXT,h),m.play()})):a&&a.pictures&&a.pictures.length?(s=!0,d.startSlideShow(a.pictures)):i())}function h(a){t(p,q.NEXT,a)}function i(){r||(t(p,q.STOP),j())}function j(){r=!0,o("stop "),f()}function k(){r=!1,s=!1}var m,o=b(n[105]),p={},q={NEXT:"offaircontent_next",STOP:"offaircontent_stop"},r=!1,s=!1,t=c.emit;return function(){return{event:q,available:e,start:g,stop:j,reset:k,on:function(a,b){p[a]||(p[a]=[]),p[a].push(b)}}}()}),m(n[61],[n[8],n[17],n[26],n[28],n[62],n[63],n[64],n[22],n[65],n[13],n[19],n[67],n[76],n[77],n[79],n[74],n[82],n[25],n[75],n[99],n[90]],function(a,c,d,g,h,i,j,k,m,o,p,q,r,s,t,u,v,w,x,y,z){function A(a){pa("reject",a),p.send(p.types.SCREEN,a.type,a),y.clear(),"cluster"!==a.type&&(X(a),s.abort(),wa=!0,ya=!1,ea())}function B(){(ia||typeof ia===ma)&&(pa("setOffline"),p.send(p.types.EVENT,"live",!1),p.send(p.types.EVENT,"ready",!0),ia=!1,ya=!1,xa=!1)}function C(){if(ia!==!1){var a,b=!1;y.clear(),ga&&(b=ga.available()),a=!(za||!va&&b),pa("onStreamOffline",a),a&&X(z),za&&O(),S(),B()}}function D(){ia||(ua=!1,f(ja),wa=!1,ia=!0,va=!0,p.send(p.types.EVENT,"live",!0))}function E(a){switch(a.type){case n[159]:L(a.type,a);break;case"broadcaster":N(a.type,a);break;case"stream":J(a);break;case"logo":K(a);break;case"thumbnail":M(a.type,a);break;case"meta":P(a.type,a)}}function F(a){o(a.slice(1))}function G(a,b){D(),d.setByContent("streamUrl",a.stream[0]),b&&(v&&v.screen.unset(),ga&&ga.stop(),s.load(a.stream[0]),ya=!0),za&&O(),Q()}function H(){if(s.abort(),ia){if(a.android&&"4.4.2"===a.android.join(".")&&a.chrome&&a.nav.userAgent.toLowerCase().indexOf("sm-n900")>-1)return void b.reload(!0);ua=!0,y.prepareToOffline(),ja=e(C,2e4)}else C();Q()}function I(a,b){if(d.setByContent("streamUrl",a.stream[0]),!ya){if(za)return void O();b&&(a.stream.length>0?R(a.stream[0]):(X(n[160]),ea())),Q()}}function J(a){if(!xa){var b=a.stream.length,d=!za&&!ya;c.isCid()?b>0?G(a,d):H():c.isVid()&&I(a,d)}}function K(a){w.isEnabled()?p.send(p.types.EVENT,"logo",a.data):v.updateBrand(a)}function L(a,b){d.setByContent(a,b),sa=!0,Q()}function M(a,b){d.setByContent("thumbnail",b.liveThumbnail),ta=!0,y.poster(b.liveThumbnail),p.send(p.types.EVENT,"thumbnail",b),za?O():Q()}function N(a,b){d.setByContent(a,b),ra=!0,Q()}function O(){l([n[50]],function(a){var b=d.getByContent("thumbnail"),e=c.getUrl();a.setData(b,e),X(a)})}function P(a,b){var e,f;if(d.setByContent(a,b),qa=!0,y.title(b.title),p.send(p.types.EVENT,"meta",b),!d.getByContent("verizonInviteMethod")&&"Verizon"===b.brand&&d.m){var g=u(c.app()+"."+c.ids()[0]);g.verizonInviteMethod(d.m),d.setByContent("verizonInviteMethod",!0)}c.isVid()&&b.cut&&(f=b.cut,d.setByContent("startAt",b.videoLength*f[0]),d.setByContent("endAt",b.videoLength*f[1])),c.isHid()&&(e=b.highlight,e&&(d.setByContent("startAt",b.videoLength*e[0]),d.setByContent("endAt",b.videoLength*e[1]))),b.title&&p.send(p.types.EVENT,"title",b.title),p.send(p.types.EVENT,"content",[c.app()].concat(c.ids())),Q()}function Q(){var a=c.isCid();return(za=j())?(pa("init embed redirection"),S(),y.clear(),ga&&ga.stop(),void O()):(!za&&qa&&ra&&q.load(),void(!a||typeof ia===ma||ia||va||wa||xa||za||Y()))}function R(a){pa("got stream",a),ya=!0,xa?(y.src(a,d.getByContent("thumbnail"),Ba.instanceId),xa=!1,y.play()):(v&&v.screen.unset(),y.create(a,d.getByContent("thumbnail"),Ba.instanceId)),y.volume(d.volume)}function S(){pa("aborting getStream"),s&&s.abort(),y&&y.clear()}function T(a){if(pa("ERROR: no streams available ",a),pa("flag_reported_offline ",ua),pa("flag_live ",ia),ua||!ia)return X(z),void B();var b=d.getByContent("streamUrl"),e=u(c.app()+"."+c.ids()[0]);e.getStreamError(b,a),X(n[160]),ea(),B()}function U(a){a&&t.report()}function V(b){if(!xa&&ia){var c,e;if(!(4!==b.code||a.android||a.ios||a.blackberry||a.playstation))return xa=!0,void W();if(2===b.code||3===b.code||4===b.code)return c=d.getByContent("media.errorcount")||0,c+=1,d.setByContent("media.errorcount",c),e=d.getByContent("streamUrl"),s.load(e),void m(!0);xa=!0,W()}}function W(){X(n[160]),ea(),B()}function X(a){typeof a===la?v.screen.set(a):l([a],X)}function Y(){var a=d[c.id()];za||a&&a.meta&&a.meta.offairContent&&a.meta.offairContent.length<1||(ga?ga.available()||a&&a.meta&&(y.clear(),v&&v.screen.unset(),ga.start(a.meta.offairContent)):l([n[105]],function(a){ga=a,ga.on(ga.event.STOP,function(){pa("offair stopped"),X(z)}),ga.on(ga.event.NEXT,function(a){ha=a}),Y()}))}function Z(){m(!0),fa(),y.clear(),v&&v.screen.unset(),s&&s.abort(),ga&&ga.reset(),q.reset(),d.setByContent("streamUrl",!1),ia=void 0,va=!1,xa=!1,ya=!1,wa=!1,za=!1,qa=!1,ra=!1,sa=!1,ta=!1,ca(),Ba.connect()}function $(a,b,e,f){var g=[];g=arguments[2]&&"boolean"!=typeof arguments[2]?[b,arguments[2]]:[b],(Aa||c.getType()!==a||c.id()!==b||g[1]&&(!g[1]||g[1]!==c.ids()[1]))&&(Aa=!1,c.update(a,g),d.update(),Z())}function _(a){ba(a.args[0]),a.args[1]&&(pa("adFree set from api call",a.args[1]),d.adFree=a.args[1])}function aa(a){var b,e,f;switch(pa("api command ",a),a.cmd){case"viewers":b=d.getByContent(n[159])||{},r.send({property:{viewers:b.viewers||0}});break;case"allTimeTotalViewers":b=d.getByContent(n[159])||{},r.send({property:{allTimeTotalViewers:b.allTimeTotal||0}});break;case"load":$.apply(null,a.args);break;case"setSession":_(a);break;case"content":r.send({property:{content:[c.app()].concat(c.ids())}});break;case"playingContent":f=c.getType()!==na||c.live()?[c.app()].concat(c.ids()):ha?[oa,ha]:[],r.send({property:{playingContent:f}});break;case"playing":r.send({property:{playing:d.playing}});break;case"apihandshake":e=u(c.app()+"."+c.ids()[0]),e.apiStats();break;case"clearHash":t.clear.apply(null,a.args),ea(),Z()}}function ba(a){pa("set session ",a),ka.sessionId=a,ea(),Z()}function ca(){Ba=x({app:c.app(),id:c.ids()[0],hid:c.ids()[1],sessionId:ka.sessionId,hash:d.getByContent("hash"),password:d.getByContent("channelPassword"),referrer:g,flotAddress:!!d.flot&&decodeURI(d.flot),umsDebugMode:d.umsDebugMode,bdtools:d.bdtools,longpoll:"1"===k.get(Da)}),Ca=h(Ba),Ca.on(Ca.event.REJECT,A),Ca.on(Ca.event.UPDATE,E),Ba.on(Ba.event.LOG,F),Ba.on(Ba.event.OPEN,da)}function da(a){k.set(Da,a.longpoll?"1":"0",{expires:30})}function ea(){Ba&&Ba.close&&Ba.close()}function fa(){Ba&&Ba.destroy&&Ba.destroy(),Ca&&Ca.destroy&&Ca.destroy()}var ga,ha,ia,ja,ka=ustream.vars,la="object",ma="undefined",na="channel",oa="recorded",pa=o("viewer/htmlviewer"),qa=!1,ra=!1,sa=!1,ta=!1,ua=!1,va=!1,wa=!1,xa=!1,ya=!1,za=!1,Aa=!0,Ba={},Ca={},Da="mte_use_longpoll";return y.on(y.event.ERROR,V),y.on(y.event.STREAMOFF,C),y.on(y.event.PLAYING,U),s.on(s.event.SUCCESS,R),s.on(s.event.ERROR,T),function(){return pa("initialize "),i("body")[0].className+=" player-one",d.refTest?(pa("running HLS reference test... "),void R("https://devimages.apple.com.edgekey.net/streaming/examples/bipbop_4x3/bipbop_4x3_variant.m3u8")):(ca(),r.on(r.event.COMMAND,aa),v.screen.on(v.screen.event.RETRY,Z),t.check()?p.send(p.types.EVENT,"ready",!0):Ba.connect(),{setSession:ba,foo:"fordprefect"})}()}),m(n[108],[],function(){function b(b,c,h,i){h=h||g;var j=a.open(b,c,h);return f.push(j),i&&typeof i===e&&d(j,i),j}function c(){var a,b;for(a=0,b=f.length;a<b;a+=1)f[a].close();f=[]}function d(a,b){if(a)var c=setInterval(function(){a.closed&&(clearInterval(c),b.call(null))},500)}var e="function",f=[],g="width=720,height=480,scrollbars=no,resizable=no";return{open:b,closeAll:c}}),m(n[109],[n[26],n[17],n[13]],function(a,b,c){function d(a){var b=i.floor(1e5*i.random()+1)/1e5*100;return l("draw: "+b+" vs "+a),b<a}function e(a){return"|"+a.replace(/\s*/g,"").replace(/,/g,"|")+"|"}function f(a){return b.isCid()&&q.indexOf("|"+b.id()+"|")>-1?(l("disabling: cid is on exception list"),0):a}function g(a){return b.isCid()&&r.indexOf("|"+b.id()+"|")>-1?(l("enabling: cid is on inclusion list"),+m.cidpercent||a):a}function h(b){return a.qosplayer?(l("enabling: forced via url parameter"),100):b}function j(){var a=o?p:0;return a=f(a),a=g(a),a=h(a),d(a)}var k=ustream.vars,l=c(n[109]),m=k.qos_player||{},o=m&&"1"===m.enabled||!1,p=m&&+m.percent||0,q=m.exceptionCids||"",r=m.cid||"";return q=e(q),r=e(r),j}),m(n[110],[n[13],n[100],n[101],n[76],n[19]],function(a,b,c,d,e){function f(a){return Array.prototype.slice.call(a)}function g(a,b,c,d,g,i,j,k,l,n){p("pipe",[b,c,d,g]);var q,r,s,t=f(arguments).slice(2),u=t.length;if("ready"!==b&&!a.ready)return a.queue||(a.queue=[]),void a.queue.push(arguments);if(typeof a.ref[b]!==m)throw e.send(e.types.EVENT,"flashCallError",b),new Error("Flash function missing: "+b);typeof t[t.length-1]===m?(n=t.pop(),al-=1):n=o;try{if(0===u)q=a.ref[b]();else if(1===u)q=a.ref[b](c);else if(2===u)q=a.ref[b](c,d);else if(3===u)q=a.ref[b](c,d,g);else if(4===u)q=a.ref[b](c,d,g,i);else if(5===u)q=a.ref[b](c,d,g,i,j);else if(6===u)q=a.ref[b](c,d,g,i,j,k);else{if(7!==u)throw new Error("pipe: too many parameters!");q=a.ref[b](c,d,g,i,j,k,l)}}catch(v){throw new Error("pipe: "+b)}return"ready"===b&&(a.ready=!0,r=0,s=setInterval(function(){h(a.queue),20===r&&clearInterval(s),r+=1},100)),n(q),q}function h(a){if(a){for(;a.length;)g.apply(this,a.shift());a=null}}function i(a,b,c){var d=f(arguments).slice(3);return g.apply(null,[a,"callMethod",b,c].concat(d))}function j(a,b,c){return g(a,"getProperty",b,c)}function k(a,b,c,d){g(a,"setProperty",b,c,d)}var l="undefined",m="function",o=function(){},p=a(n[110]);return function(){return function(){function a(a){k(r,"logic","sessionId",a),q=!0}function h(){p("removeSession flag"),q=!1}function m(a){g.apply(this,[r,"updateViewerStyle",a])}function n(a){g.apply(this,[r,"setTitleVisibility",a])}function o(a){p("api command ",a),"apihandshake"===a.cmd&&k(r,"logic.media.statistics.common","embedApi",!0)}var q=!1,r={ref:{},queue:[],ready:!1};return d.on(d.event.COMMAND,o),{showOptIn:function(){g.apply(this,[r,"showOptIn"])},init:function(a){r.ref=a},ready:function(){p("ready"),g(r,"ready"),e.send(e.types.EVENT,"ready",!0)},callMethod:function(a,b){var c=f(arguments).slice(2);return i.apply(this,[r,a,b].concat(c))},addListener:function(a,b,c){if(typeof this[c]===l)throw"Cannot register callback handler!";g(r,"addListener",a,b,c)},get:function(a,b){return j(r,a,b)},set:function(a,b,c){k(r,a,b,c)},resize:function(a,b){e.send(e.types.EVENT,"size",[a,b])},hasSession:function(){return q},setStyle:m,setTitleVisibility:n,setSession:a,removeSession:h,destroy:function(){b(r.ref),c(r.ref),r=null},showHighlightUI:function(){r.ref.showHighlightUI()},hideHighlightUI:function(){r.ref.hideHighlightUI()},startPointSeek:function(a){r.ref.startPointSeek(a)},endPointSeek:function(a){r.ref.endPointSeek(a)},startPreview:function(){r.ref.startPreview()},stopPreview:function(){r.ref.stopPreview()},onStartPointSeek:function(a){e.send(e.types.EVENT,"highlightStartSeek",{point:"from",percent:a})},onEndPointSeek:function(a){e.send(e.types.EVENT,"highlightEndSeek",{point:"to",percent:a})}}}()}}),m(n[111],[n[26],n[8]],function(a,b){return function(c){return b.ie?c="opaque":"opaque"!==c||!a.sitemode||b.ff&&b.win||(c="direct"),c}}),m(n[107],[n[13],n[29],n[101],n[21],n[8],n[7],n[23],n[108],n[26],n[17],n[28],n[109],n[110],n[16],n[76],n[79],n[82],n[25],n[80],n[19],n[22],n[111]],function(b,c,e,f,h,i,k,m,o,p,q,r,s,t,u,v,w,x,y,z,A,B){function C(){ustream||(a.ustream={}),ustream.flash||(a.ustream.flash={}),ka=a.ustream.flash.viewer={}}function D(){var a,b=sa,d=H(),e=J();a=B(o.wmode),b=i(b,/%wmode%/g,a),b=i(b,/%swfUrl%/g,d),b=i(b,/%flashId%/g,la),b=i(b,/%flashName%/g,na),b=i(b,/%flashVars%/g,e),ia("swf html",b),C(),ua=!1,_=ka[na]=s(),ta.innerHTML=b,aa=_.ready,_.ready=E,_.init(c(la)),F()}function E(){var a=d;[a.userAgent.toLowerCase(),"%%%",a.platform.toLowerCase()].join("");aa(),o.seamless&&_.set("logic","seamlessSwitch",!0)}function F(){var a,b=function(a,b,c,d){_[c]=d,_.addListener(a,b,c)},c=p.isCid();a=c?ea:fa,b(ea,"online","ol",k(z.send,this,z.types.EVENT,"live",!0)),b(ea,"offline","oo",k(z.send,null,z.types.EVENT,"live",!1)),b(ea,"destroy","oD",O),b(fa,"finish","ov",k(z.send,null,z.types.EVENT,"finished",!0)),b(a,"play","plr",W),b(a,"pause","pse",X),b(a,"rejected","rjc",function(a){z.send(z.types.EVENT,"mediaReject",!0),a&&a.hashLock&&a.hashLock.type&&"advanced"===a.hashLock.type&&(t.set(t.getHashStorageName(),null),o.update(),_.destroy(),_=null,y.unset(),l([n[43]],function(b){b.prepare(a.hashLock),y.set(b)}))}),b("viewermodulemanager","createQos","qt",function(){b("qos","adaptiveAvailability","aqt",L),b("qos","streamIndexChange","siC",L)}),b("meta","update","metaUp",M),b(n[159],"popout","oP",R),b(n[159],"toggleTheaterMode","oTh",S),b(fa,"meta","oMmr",T),b(fa,"seekStart","oSkt",U),b(a,"syncMeta","oSyn",P),b("recorded","moduleInfo","oModInf",Q),b(va,"createChannel","oCrC",V),b(va,"createRecorded","oCrR",V),b(n[159],"optInTry","optTry",Y),b("viewermodulemanager","createClosedCaption","oCc",function(){var a,b=[6540154,10414700],c=_.get("logic.media.modules","meta");b.indexOf(p.id())===-1&&(a={playerVersion:3,contentType:p.getType(),mediaId:p.id()},c&&c.data&&(a.userName=c.data.userName),mixpanel&&(mixpanel.track("ClosedCaption",a),ia("mixpanel",a)))})}function G(){ia("reinit"),y.unset(),D()}function H(){var a=ma[h.ssl?"https":"v3"],b=p.isCid()?p.id():0;return 15183109!==b&&15623131!==b||(a=ma.v3),o.flashdev&&(a="http://"+o.flashdev+"-branches-www.dev.ustream.tv/flash/viewer.swf"),o.stageevents&&(a+=(a.indexOf("?")>-1?"&":"?")+"stageevents=true"),r()&&(a=ma[h.ssl?"httpsQos":"qos"]),ia("swfUrl ",a),a}function I(a,b,c,d){return typeof d!==ca&&d&&a.push(b+"="+c),a}function J(){ia(o.getByContent("hash")),ia(typeof o.getByContent("hash")),ia(o.getByContent("hashObj")),ia(typeof o.getByContent("hashObj"));var a,b,c=[],d=o.getByContent("hash");return c=pa.concat([]),c=I(c,"controls",o.controls,!o.controls),c=I(c,"quality",o.quality,!!o.quality),c=I(c,"campaign",o.campaign,!!o.campaign),c=I(c,"brandid",o.brandid,!!o.brandid),c=I(c,"showtitle",o.showtitle,!o.showtitle),c=I(c,"hash",g(d),!!d),c=I(c,"lite","true",!!o.lite),c=I(c,"abs","1",o.abs),typeof o.volume!==ca&&(b=+o.volume,b>100?b=1:b<0?b=0:b/=100,c.push("volume="+b)),c=I(c,"sessionid",ba.sessionId,!!ba.sessionId),c=I(c,"adfree","1",!!o.adFree),a=o.getByContent("channelPassword"),a&&(c=I(c,"password",a,!!a)),c=I(c,"style",o.style,!!o.style),c.push("ts="+ +new j),p.isVid()?(c.push("vid="+p.id()),c.push("loc="+p.id()),c.push("hasticket=false")):c.push("cid="+p.id()),p.isHid()&&c.push("hid="+p.ids()[1]),ia("flashvars ",c),c.join("&amp;")}function K(a,b){ia("set session ",a),ba.sessionId=a,_.setSession(a),"undefined"!=typeof b&&_.set("logic","adFree",b)}function L(){var a=_.get(wa+".modules","qos"),b=a.availableQualities.length,c=[];if(ia("onAdaptiveAvailability"),p.isCid()&&!(b<=1)){for(;b--;)c.push({id:b,height:a.availableQualities[b].height,label:a.availableQualities[b].description||a.availableQualities[b].height+"p",active:a.currentStreamIndex==b,selected:a.desiredStreamIndex!==-1&&a.currentStreamIndex==b});c.reverse(),c.push({id:-1,label:"Auto",active:!1,selected:a.desiredStreamIndex===-1}),o.setByContent("qualities",c),z.send(z.types.EVENT,"quality",c)}}function M(){N(),z.send(z.types.EVENT,"meta",_.get("logic.media.modules","meta")),z.send(z.types.EVENT,"title",_.get("logic.media.modules.meta.data","title"))}function N(){ua||(z.send(z.types.EVENT,"mediaAccept",!0),ua=!0)}function O(){z.send(z.types.EVENT,"destroy",!0),_.removeSession()}function P(a){z.send(z.types.EVENT,"syncedmeta",a)}function Q(a){void 0!==a.presentation&&z.send(z.types.EVENT,"presentation",a.presentation)}function R(){var b="";p.isCid()?b="/channel/"+p.id()+"/pop-out":(b="/recorded/"+p.id(),p.isHid()&&(b+="/highlight/"+p.ids()[1]),b+="/pop-out"),a.open(b,"ChannelVideoPopup","width=730,height=500,scrollbars=no,resizable=no"),_.callMethod(wa,"pause")}function S(){z.send(z.types.EVENT,"theaterMode","")}function T(){z.send(z.types.EVENT,"metaready",!0)}function U(){var a=_.get(wa,"progress");z.send(z.types.EVENT,"seekstart",a)}function V(){var a=_.get("logic.channel","id"),b="channel";a||(a=_.get("logic.recorded","id"),b="recorded"),z.send(z.types.EVENT,"content",[b,a])}function W(){o.playing=!0,z.send(z.types.EVENT,"playing",!0),v.report()}function X(){o.playing=!1,z.send(z.types.EVENT,"playing",!1)}function Y(b){b&&(A.set("mte_html_ui_enabled",1,{expires:30}),a.location.reload())}function Z(a,b){ja[a]||(ja[a]=[]),ja[a].push(b)}function $(){var a=!1;return(!1===h.swf||h.swf[0]<10||10===h.swf[0]&&h.swf[1]<3)&&(l([n[91]],function(a){y.set(a)}),a=!0),a}var _,aa,ba=ustream.vars,ca="undefined",da="object",ea="channel",fa="recorded",ga="video",ha="highlight",ia=b("swfviewer"),ja={},ka={},la="utv"+p.id(),ma={v3:ba.viewerSwf,v2:ba.viewerOldSwf,http:"http://www.ustream.tv/flash/viewer.swf",https:ba.httpsViewerSwf,qos:ba.viewerQosSwf,httpsQos:ba.httpsViewerQosSwf,rsl:ba.rslSwf},na=la,oa=o.autoplay||o.sitemode?"true":"false",pa=["autoplay="+oa,"locale="+o.locale,"referrer="+g(q),"autoResize=false","enablejsapi=true"],qa=h.ie&&h.win&&!h.edgeIe,ra=!h.ie||h.edgeIe,sa="<object "+(ra?'type="application/x-shockwave-flash" ':"")+(qa?'classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"':"")+(ra?'data="%swfUrl%" ':"")+'width="100%" height="100%" id="%flashId%" name="%flashName%"><param name="flashvars" value="%flashVars%"/><param name="allowfullscreen" value="true"/><param name="allowscriptaccess" value="always"/><param name="bgcolor" value="000000"/><param name="wmode" value="%wmode%"/>'+(qa?'<param name="movie" value="%swfUrl%">':"")+"</object>",ta=c("ViewerContainer"),ua=!1,va="logic",wa=va+".media",xa=wa+".modules.meta.data",ya=va+".channel",za=va+"."+fa;return o.sv&&pa.push("sv=6"),e(c("Loading")),function(){var a,b;if(!$())return y.on(y.event.RETRY,G),ia("initialize "),u.on(u.event.COMMAND,function(c){ia("api command",c),a[c.cmd]&&a[c.cmd].apply(a,c.args),"content"===c.cmd&&u.send({property:{content:[p.app()].concat(p.ids())}}),"playingContent"===c.cmd&&(p.getType()!==ea||p.live()?b=[p.app()].concat(p.ids()):(b=_.get(za,"id"),b=b?[fa,+b]:[]),u.send({property:{playingContent:b}}))}),z.on(z.types.COMMAND,"*",function(b,c){a[b]&&a[b].apply(a,c)}),v.check()||D(),a={instance:_,on:Z,setSession:K,pause:function(){_&&_.callMethod(wa,"pause")},stop:function(){_&&(_.callMethod(wa,"pause"),_.callMethod(wa,"seek",0))},play:function(){_&&_.callMethod(wa,"play")},load:function(a,b,c,d){var e,f=c||o.playing,g="destroy",h="createChannel",i="createRecorded",j=p.isCid(),k=null;return p.update(a,arguments[2]&&"boolean"==typeof arguments[2]?[b]:[b,arguments[2]]),o.update(),_?(ia("load",arguments),ua=!1,k=o.getByContent("channelPassword")?o.getByContent("channelPassword"):null,_||D(),a===ea&&(j||_.callMethod(wa,g),_.callMethod(va,h,b,f,k,d||null)),a!==ga&&a!==fa||(j&&_.callMethod(ya,g),_.callMethod(va,i,b,f,k)),void(a===ha&&arguments[2]&&(e=arguments[2],j&&_.callMethod(ya,g),_.callMethod(va,i,b,f,k,{highlightId:e})))):void G()},seek:function(a){if(_){var b,c=0,d=_.get(wa,"duration");typeof a===da&&null!==a&&(a=a[0]),c=+a,b=c/d,_.callMethod(wa,"seek",b)}},volume:function(a){_&&(a=+a||0,a>100&&(a=100),a<0&&(a=0),a<1&&a>0||(a/=100),_.set(va,"volume",a))},quality:function(a){_&&_.set(wa+".modules.qos","desiredStreamIndex",a)},style:function(a){_&&_.setStyle(a)},setTitleVisibility:function(a){_&&_.setTitleVisibility(a)},duration:function(){if(_){var a=_.get(wa,"duration");return u.send({property:{duration:a}}),a}},viewers:function(){_&&u.send({property:{viewers:_.get(wa+".modules.viewers","data")}})},allTimeTotalViewers:function(){_&&u.send({property:{allTimeTotalViewers:_.get(wa+".modules.allTimeTotal","data")}})},progress:function(){if(_){var a=_.get(wa,"duration"),b=_.get(wa,"progress");return u.send({property:{progress:a*b}}),b}},mediatitle:function(){if(_){var a=_.get(xa,"title");u.send({property:{mediatitle:a}})}},playing:function(){u.send({property:{playing:o.playing}})},setViewMode:function(a){_.set("logic","viewMode",a),_.set(n[159],"theaterMode","theater"===a)},clearHash:function(){v.clear.apply(null,arguments),G()},showHighlightUI:function(){_.showHighlightUI()},hideHighlightUI:function(){_.hideHighlightUI()},startPointSeek:function(a){_.startPointSeek(a)},endPointSeek:function(a){_.endPointSeek(a)},startPreview:function(){_.startPreview()},stopPreview:function(){_.stopPreview()}}}()}),m(n[114],[n[13],n[20],n[21]],function(a,b,c){function d(a,b){return a+"."+b}var e=a("facade"),f={},g={COMMAND:"command",EVENT:"event",DATA:"data",REPORT:"report"},h={STREAM_UPDATE:"streamUpdate",THUMBNAIL_UPDATE:"thumbnailUpdate",BROADCASTER_UPDATE:"broadcasterUpdate",META_UPDATE:"metaUpdate",VIEWERS_UPDATE:"viewersUpdate",ALLVIEWERS_UPDATE:"allViewersUpdate",ALLTIMETOTAL_UPDATE:"allTimeTotalUpdate",SHARE_UPDATE:"shareUpdate",LOGO_UPDATE:"logoUpdate",CLIENT_RATE_LIMIT_UPDATE:"clientRateLimitUpdate",CHAT_UPDATE:"chatUpdate",AGELOCK_UPDATE:"ageLockUpdate",ADVERT_UPDATE:"advertUpdate",LIVE:"live",PLAY:"play",PAUSE:"pause",VOLUME:"volume",PLAYING:"playing",SEEK:"seek",PROGRESS:"progress",CREATE_SLIDESHOW:"createSlideShow",DESTROY_SLIDESHOW:"destroySlideShow",CREATE_OFFAIR_VIDEO:"createOffairVideo",DESTROY_OFFAIR_VIDEO:"destroyOffairVideo",NEXT_OFFAIR_VIDEO:"nextOffairVideo",VIDEO_FINISHED:"videoFinished",CC_DETECTED:"ccDetected",TOGGLE_CC:"toggleCC",URL_RESOLVE_COMPLETE:"urlResolveComplete",URL_RESOLVE_FAILURE:"urlResolveFailure",PLAYBACK_DATA:"playbackData",ATLAS_METADATA:"atlasMetadata",RECORDED_READY:"recordedReady",SEND_REPORT:"sendReport",UMS_CONNECT_START:"umsConnectStart",UMS_CONNECTED:"umsConnected",UMS_REJECT:"umsReject",MODULE_INFO:"moduleInfo",REPORT_BANDWIDTH:"reportBandwidth",REPORT_BUFFER_EMPTY:"reportBufferEmpty",REPORT_BUFFER_FULL:"reportBufferFull",REPORT_DROPPED_FRAMES:"reportDroppedFrames",REPORT_ERROR:"reportError",REPORT_AD_RESPONDED:"reportAdResponded",REPORT_ECDN_TESTS:"reportEcdnTests",REPORT_PROVIDER:"reportProvider"};return{types:g,events:h,send:function(a,b,g){var h=d(a,b);"progress"!==b&&e(a+" "+b,g),c(f,h,g),c(f,a+".*",b,g)},on:function(a,b,c){var e=d(a,b);f[e]||(f[e]=[]),f[e].push(c)}}}),m(n[113],[n[13],n[114]],function(a,b){function c(a){g("createMedia: "+a),h[a]={}}function d(a,c){if(a&&h[a]&&c&&c instanceof Object){for(var d in c)i.indexOf(d)===-1&&(c[d].mid=a,h[a][d]=c[d],b.send(b.types.DATA,d+"Update",c[d]),b.send(b.types.REPORT,b.events.MODULE_INFO,{mid:a,send:d}));for(var e=0;e<i.length;++e)c[i[e]]&&(g(i[e],c[i[e]]),c[i[e]].mid=a,h[a][i[e]]=c[i[e]],b.send(b.types.DATA,i[e]+"Update",c[i[e]]),b.send(b.types.REPORT,b.events.MODULE_INFO,{mid:a,send:i[e]}))}}function e(a,b){return g("getModuleData("+a+"):"+b),a&&h[a]&&h[a][b]?h[a][b]:null}function f(a){g("destroyMedia:",a),delete h[a]}var g=a(n[113]),h={},i=["broadcaster","meta","stream","tcdn","poll","qos","share"];return{init:function(){h={}},create:c,update:d,get:e,destroy:f}}),m(n[115],[n[17],n[13],n[19],n[76],n[114]],function(a,b,c,d,e){function f(a){t=a,c.send(c.types.EVENT,"playing",a)}function g(a){u=a}function h(a){v=a}function i(a){w=a}function j(a){x=a}function k(){c.send(c.types.EVENT,"finished",!0)}function l(a){y=a}function m(a,b){var c={property:{}};c.property[a]=b,d.send(c)}function n(b){a.isCid()&&!a.live()?y?m(b.cmd,[s,y]):m(b.cmd,[]):m(b.cmd,[a.app()].concat(a.ids()))}function o(a){c.send(c.types.COMMAND,"quality",a.args)}function p(b){switch(r("api command received",b),b.cmd){case"ready":c.send(c.types.EVENT,"ready",!0);break;case"play":c.send(c.types.COMMAND,"play");break;case"pause":c.send(c.types.COMMAND,"pause");break;case"stop":c.send(c.types.COMMAND,"pause"),c.send(c.types.COMMAND,"seek",[0]);break;case"load":c.send(c.types.COMMAND,"load",b.args),t&&e.send(e.types.COMMAND,e.events.PLAY);break;case"seek":c.send(c.types.COMMAND,"seek",b.args);break;case"volume":c.send(c.types.COMMAND,"volume",b.args);break;case"content":m(b.cmd,[a.app()].concat(a.ids()));break;case"playingContent":n(b);break;case"duration":m(b.cmd,u);break;case"progress":m(b.cmd,x);break;case"viewers":m(b.cmd,w);break;case"allTimeTotalViewers":m(b.cmd,v);break;case"quality":o(b);break;case"setSession":c.send(c.types.COMMAND,"setSession",b.args)}}function q(){c.on(c.types.EVENT,"duration",g),c.on(c.types.EVENT,"allTimeTotalUpdate",h),c.on(c.types.EVENT,"viewersUpdate",i),e.on(e.types.EVENT,e.events.PLAYING,f),e.on(e.types.EVENT,e.events.PROGRESS,j),e.on(e.types.EVENT,e.events.VIDEO_FINISHED,k),e.on(e.types.EVENT,e.events.CREATE_OFFAIR_VIDEO,l),d.on(d.event.COMMAND,p)}var r=b("htmlApiProxy"),s="recorded",t=!1,u=0,v=0,w=0,x=0,y=0;return{init:q}}),m(n[118],[],function(){return{status:{DEFAULT:"default",INITIALIZED:"initialized",STARTED:"started",STOPPED:"stopped",PAUSED:"paused",FAILED:"failed",AD_IN_PROGRESS:"adInProgress"},positions:{PRE:"pre",MID:"mid",POST:"post",PARTNER:"partner",LINEAR:"lfeed"},MAXIMUM_AD_OFFSET:40,AD_REQUEST_TIMEOUT:3e4,AD_START_TIMEOUT:3e4,DEFAULT_PARTNER_DELAY:9e5}}),m(n[119],[],function(){var a={};return function(){return a}()}),m(n[120],[n[17],n[13],n[118],n[94],n[114]],function(a,b,c,d,e){function f(b){var f,k,l,m=[c.positions.PRE,c.positions.MID,c.positions.POST,c.positions.PARTNER,c.positions.LINEAR];b.hasOwnProperty("info")&&!o&&(o=b.info,t("parseData >> data.info exists",o)),p={};for(var n=0;n<m.length;n++)if(l=m[n],t("current pos: ",l),b.hasOwnProperty(l)&&b[l].length){for(p[l]=[],f=0;f<b[l].length;f++)k=i(b[l][f],l),k&&(l===c.positions.MID&&(g(k),f===b[l].length-1&&(k.blockEnd=!0,s=-1)),a.isVid()&&l===c.positions.PARTNER&&h(l),p[l].push(k),r||(r=!0));l!==c.positions.PRE&&l!==c.positions.POST&&l!==c.positions.PARTNER||j(p[l])}t("parsed ruleset",p),t("parse has ended..."),e.send(e.types.EVENT,d.PARSE_DONE)}function g(a){void 0!==a.block?a.block!==s&&(s!==-1&&(a.blockEnd=!0),s=a.block,a.blockStart=!0):s!==-1&&(a.blockEnd=!0,s=-1)}function h(a){t("createPartnerDelayForVOD");var b={duration:c.DEFAULT_PARTNER_DELAY,provider:"delay",rule:1};p[a].push(b)}function i(a,b){var d=!1;if(q.indexOf(a.provider)!==-1){if((b===c.positions.PRE||b===c.positions.POST)&&"video"!==a.type)return t("skip this by not video in pre/post: "+a.provider),d;b===c.positions.MID&&(a.errors=0),d=a,t("parseRule success")}else t("skip this by not allowed provider: "+a.provider);return d}function j(a){a.length>1&&(a[0].blockStart=!0,a[a.length-1].blockEnd=!0)}function k(a){t("setData: ",a),a?f(a):t("error: there is no data")}function l(){o={},p={},r=!1}function m(a,b){t("removeRule - pos: "+a+" - index: "+b),a&&void 0!==b&&p[a][b]&&p[a].splice(b,1)}var o,p,q="adaptv,liverail,delay,googleads",r=!1,s=-1,t=b(n[120]);return{setData:k,destroy:l,remove:m,getData:function(){return p},getInfo:function(){return o},hasAds:function(){return r}}}),m(n[117],[n[28],n[13],n[70],n[73],n[29],n[118],n[94],n[119],n[120],n[114],n[8]],function(d,g,h,i,j,k,l,m,o,p,q){function r(){var b,c=m.context?m.context:{};for(b in da)c.prg=c.prg?c.prg:"",m.hasOwnProperty(b)&&(c.prg+=da[b]);return m.uname&&(c.uname=m.uname),c.language=a.navigator.language,c.locale="en_US",X.vid&&(c.vid=X.vid),Y("customParams:",c),c}function s(){return{pageUrl:b.href,pageUrlOv:X.url,url:d,id:X.id,title:X.title,description:X.description,duration:m.contentLength||"555555",categories:X.categoryIds.main+"-"+(X.categoryIds.sub||0),keywords:X.categories.join(","),zid:W.zid}}function t(){var a,b=i();__adaptv__.vpaid&&__adaptv__.vpaid.VPAIDAd?Q=new __adaptv__.vpaid.VPAIDAd:__adaptv__.ads&&__adaptv__.ads.vpaid.VPAIDAd&&(Q=new __adaptv__.ads.vpaid.VPAIDAd);var c=__adaptv__.vpaid.VPAIDEvent;Q.subscribe(c.AdLoaded,u),Q.subscribe(c.AdStarted,w),Q.subscribe(c.AdStopped,x),Q.subscribe(c.AdPlaying,A),Q.subscribe(c.AdClickThru,y),Q.subscribe(c.AdVideoStart,z),Q.subscribe(c.AdVideoComplete,B),Q.subscribe(c.AdError,v),a={adTagUrl:__adaptv__.vpaid.constructAdTag((q.ssl?"https:":"http:")+fa,s(),r())},ea.clickSlot=S,ea.videoSlot=m.videoTag,ea.companionSlots=[{id:"PageRectangle",width:300,height:250}],m.mobile||(ea.slot=R),Q.initAd(b[0],b[1],-1,-1,a,ea),U=e(G,k.AD_REQUEST_TIMEOUT)}function u(){Y("onAdLoaded"),F(U),$&&(Z=k.status.INITIALIZED,W.paused?ea.videoSlot.setAttribute("controls",!0):(Y("getAdCompanion",Q.getAdCompanions()),Y("getAdVolume",Q.getAdVolume()),Y("getAdRemainingTime",Q.getAdRemainingTime()),Y("getAdDuration",Q.getAdDuration()),Q.startAd(),V=e(H,k.AD_START_TIMEOUT)))}function v(a){Y("onError",a.type+"! Error code: "+a.data.errorCode+". Error message: "+a.data.errorMessage),E();var b=function(a){Y("adaptv onerror",a)};switch(a.data.errorCode){case 400:b("Unknown error has occurred.");break;case 401:b("Failed to get response for 1st-party ad tag or response for the 1st-party ad tag is invalid or empty. Typically indicative of a no-fill.");break;case 402:b("Ad tag timeout. Unable to retrieve response from ad tag within configured time.");break;case 411:b("3rd-party ad tag response is invalid or empty. Typically indicative of a no-fill.");break;case 412:b("Invalid media file type. Typically FLV or VPAID creative type.");break;case 413:b("maxWrapperLevels has been reached.");break;case 514:b("Ad slot is not defined.");break;case 515:b("Invalid or undefined ad tag url.");break;case 521:b("Failed to play HTML5 media file. No valid media files found.");break;case 522:b("Video start timeout. Video ad did not start with configured time.");break;case 523:b("Container div provided is invalid.")}$&&(Z=k.status.FAILED,D(a.data.errorCode))}function w(){Y("onAdStarted"),F(V),R.appendChild(S),$&&(Z=k.status.STARTED,p.send(p.types.EVENT,l.AD_STARTED))}function x(){Y("onAdStopped"),E(),$&&(Z=k.status.STOPPED,p.send(p.types.EVENT,l.AD_FINISHED))}function y(){Y("onClickThru"),$&&(W.paused=!0,Q.pauseAd())}function z(){Y("onAdVideoStart"),$&&W.forceTimer&&W.duration&&1e3*parseInt(W.duration)>0&&(T=e(I,1e3*parseInt(W.duration)))}function A(){Y("onAdPlaying"),$&&(W.paused=!1)}function B(){Y("onAdComplete"),$&&p.send(p.types.EVENT,l.AD_FINISHED)}function C(){Y("dispose"),E();var a,b,c,d=__adaptv__.vpaid.VPAIDEvent;if(Q.unsubscribe(d.AdLoaded,u),Q.unsubscribe(d.AdStarted,w),Q.unsubscribe(d.AdStopped,x),Q.unsubscribe(d.AdPlaying,A),Q.unsubscribe(d.AdClickThru,y),Q.unsubscribe(d.AdVideoStart,z),Q.unsubscribe(d.AdVideoComplete,B),Q.unsubscribe(d.AdError,v),Q.setAdVolume(0),Q.skipAd(),Q=null,ea.videoSlot&&ea.videoSlot.parentNode)for(a=ea.videoSlot.parentNode,b=a.children,c=b.length;c--;)b[c]&&"IMG"===b[c].tagName.toUpperCase()&&a.removeChild(b[c])}function D(a){$&&p.send(p.types.EVENT,l.AD_ERROR,{code:a})}function E(){F(T),F(U),F(V)}function F(a){void 0!==a&&f(a)}function G(){F(U),$&&D("400")}function H(){F(V),$&&D("400")}function I(){Y("liveRail.onTimeout"),$&&(f(T),x())}function J(){var a=q.ssl?_.ssl:_.nonSsl;Y("loadSdk","url:",a),h(a,K,L)}function K(){Y("onSdkLoadSuccess"),ba=!0,typeof __adaptv__!==ca?(aa=!0,t()):L()}function L(){Y("onSdkLoadError"),ba=!0,D(100)}function M(){$=!0,Z=k.status.DEFAULT,void 0===X&&(X=o.getInfo()),R||(Y("defined adHolder and clickSlot"),R=c.getElementById("AdHolder"),S=c.createElement("div"),S.name="clickSlot",S.id="clickSlot",S.style.width="100%",S.style.height="100%",S.style.backgroundColor="red")}function N(a){Y("request",a),a&&(W=a),Y("request",aa,ba),aa?t():aa||ba?ba&&!aa&&D(100):J()}function O(a,b){Y("resize",a,b),$&&Q&&Q.resizeAd(a,b)}function P(){Y("destroy"),C(),$&&S.parentNode===R&&R.removeChild(S),$=!1}var Q,R,S,T,U,V,W,X,Y=g(n[117]),Z=k.status.DEFAULT,$=!1,_={ssl:"https://secure-assets.adap.tv/redir/javascript/jsvpaid.js",nonSsl:"http://redir.adap.tv/redir/javascript/jsvpaid.js"},aa=!1,ba=!1,ca="undefined",da={autoplay:"a",featured:"f",isHomePage:"h",secondPreroll:"s"},ea={maxWrapperLevels:5,adTagTimeout:10,videoTimeout:30},fa="//ads.adap.tv/a/t/ustreamtv";return{type:"adaptv",initialize:M,request:N,resize:O,destroy:P}}),m(n[121],[n[28],n[13],n[70],n[73],n[29],n[118],n[94],n[120],n[114],n[8]],function(a,b,c,d,g,h,i,j,k,l){function m(){var a=d();I=new __adaptv__.ads.vpaid.VPAIDAd("AdHolder");var b=__adaptv__.ads.vpaid.VPAIDEvent;W("initAd",I),I.on(b.AdLoaded,o),I.on(b.AdStarted,q),I.on(b.AdStopped,r),I.on(b.AdCompanionDisplay,t),I.on(b.AdClickThru,s),I.on(b.AdError,p);var c={key:"integration_test",
zid:"flash_ads",companionId:"adaptvcompanion",context:{key1:"value1",key2:"value2"},id:"13371541212",title:"Test Content",duration:"29",description:"Content Testing",keywords:"test,video,adaptv",categories:"category1,category2",url:"test.com/video_file.mp4"};I.initAd(a[0],a[1],c),W("call initad"),K=e(y,h.AD_REQUEST_TIMEOUT)}function o(){W("onAdLoaded"),x(K),Q&&(P=h.status.INITIALIZED,N.paused?V.videoSlot.setAttribute("controls",!0):(I.startAd(),L=e(z,h.AD_START_TIMEOUT)))}function p(a){W("onError",a.type+"! Error code: "+a.data.errorCode+". Error message: "+a.data.errorMessage),w();var b=function(a){W("adaptv onerror",a)};switch(a.data.errorCode){case 400:b("Unknown error has occurred.");break;case 401:b("Failed to get response for 1st-party ad tag or response for the 1st-party ad tag is invalid or empty. Typically indicative of a no-fill.");break;case 402:b("Ad tag timeout. Unable to retrieve response from ad tag within configured time.");break;case 411:b("3rd-party ad tag response is invalid or empty. Typically indicative of a no-fill.");break;case 412:b("Invalid media file type. Typically FLV or VPAID creative type.");break;case 413:b("maxWrapperLevels has been reached.");break;case 514:b("Ad slot is not defined.");break;case 515:b("Invalid or undefined ad tag url.");break;case 521:b("Failed to play HTML5 media file. No valid media files found.");break;case 522:b("Video start timeout. Video ad did not start with configured time.");break;case 523:b("Container div provided is invalid.")}Q&&(P=h.status.FAILED,v(a.data.errorCode))}function q(){W("onAdStarted"),x(L),Q&&(P=h.status.STARTED,k.send(k.types.EVENT,i.AD_STARTED))}function r(){W("onAdStopped"),w(),Q&&(P=h.status.STOPPED,k.send(k.types.EVENT,i.AD_FINISHED))}function s(){W("onClickThru"),Q&&(N.paused=!0,I.pauseAd())}function t(){W("onAdCompanionDisplay")}function u(){if(W("dispose"),w(),V.videoSlot&&V.videoSlot.parentNode)for(var a=V.videoSlot.parentNode,b=a.children,c=b.length;c--;)b[c]&&"IMG"===b[c].tagName.toUpperCase()&&a.removeChild(b[c])}function v(a){Q&&k.send(k.types.EVENT,i.AD_ERROR,{code:a})}function w(){x(J),x(K),x(L)}function x(a){void 0!==a&&f(a)}function y(){x(K),Q&&v("400")}function z(){x(L),Q&&v("400")}function A(){var a=l.ssl?R.vpaidSsl:R.vpaidNonSsl;W("load vpaid","url:",a),c(a,B,D)}function B(){var a=l.ssl?R.adPlayerSsl:R.adPlayerNonSsl;W("load adplayer","url:",a),c(a,C,D)}function C(){W("onSdkLoadSuccess"),T=!0,typeof __adaptv__!==U?(S=!0,m()):D()}function D(){W("onSdkLoadError"),T=!0,v(100)}function E(a){Q=!0,P=h.status.DEFAULT,a&&(M=a),void 0===O&&(O=j.getInfo())}function F(a){W("request",a),a&&(N=a),S?m():S||T?T&&!S&&v(100):A()}function G(a,b){W("resize",a,b),Q&&void 0!==I&&I.resizeAd(a,b)}function H(){W("destroy"),u(),Q=!1}var I,J,K,L,M,N,O,P=h.status.DEFAULT,Q=!1,R={vpaidSsl:"https://secure-assets.adap.tv/redir/javascript/vpaid.js",vpaidNonSsl:"http://redir.adap.tv/redir/javascript/vpaid.js",adPlayerSsl:"https://secure-assets.adap.tv/redir/javascript/adaptvAdPlayer.js",adPlayerNonSsl:"http://redir.adap.tv/redir/javascript/adaptvAdPlayer.js"},S=!1,T=!1,U="undefined",V={maxWrapperLevels:5,adTagTimeout:10,videoTimeout:30},W=b(n[117]);return{type:"adaptvDesktop",initialize:E,request:F,resize:G,destroy:H}}),m(n[122],[n[13],n[114],n[118],n[94]],function(a,b,c,d){function g(){m&&(n=c.status.STOPPED,b.send(b.types.EVENT,d.AD_FINISHED))}function h(){m=!0,n=c.status.DEFAULT}function i(a){void 0!==l&&f(l),m&&(a&&a.duration&&1e3*parseInt(a.duration)>0?(o("request, start timer: ",a.duration,"sec"),l=e(g,1e3*parseInt(a.duration)),n=c.status.STARTED,b.send(b.types.EVENT,d.AD_STARTED)):(n=c.status.FAILED,b.send(b.types.EVENT,d.AD_ERROR)))}function j(a,b){}function k(){o("destroy"),f(l),l=null,m=!1}var l,m=!1,n=c.status.DEFAULT,o=a("logic/ads/provider/delay");return{type:"delay",initialize:h,request:i,resize:j,destroy:k}}),m(n[124],[],function(){function a(){var a,b,d=c.getElementById("AdHolder");if(d)for(a=d.children,b=a.length;b--;)a[b]&&d.removeChild(a[b])}return a}),m(n[123],[n[70],n[13],n[120],n[124],n[118],n[94],n[119],n[114],n[8]],function(a,b,d,g,h,i,j,k,l){function m(){d.getInfo();X&&(Q=new google.ima.AdDisplayContainer(c.getElementById("AdHolder"),j.videoTag),Q.initialize(),T=new google.ima.AdsLoader(Q),T.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,p,!1),T.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,o,!1),R=new google.ima.AdsRequest,R.adTagUrl="https://googleads.g.doubleclick.net/pagead/ads?client="+L.key+"&slotname=4868323861&ad_type=text_image&description_url=http%3A%2F%2Fwww.ustream.tv&videoad_start_delay=0",R.linearAdSlotWidth=j.width,R.linearAdSlotHeight=j.height,R.nonLinearAdSlotWidth=j.width,R.nonLinearAdSlotHeight=150,T.requestAds(R),N=e(A,h.AD_REQUEST_TIMEOUT))}function o(a){V("googleIMA.onAdError",a.getError()),z(N),z(O),X&&(W=h.status.FAILED,y("200"))}function p(a){V("googleIMA.onAdsManagerLoaded"),z(N),W=h.status.INITIALIZED,S=a.getAdsManager(j.videoTag),S.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,o),S.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,s),S.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,t),S.addEventListener(google.ima.AdEvent.Type.LOADED,q),S.addEventListener(google.ima.AdEvent.Type.STARTED,u),S.addEventListener(google.ima.AdEvent.Type.COMPLETE,v),S.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,w),S.addEventListener(google.ima.AdEvent.Type.AD_BREAK_READY,r);try{S.init(j.width,j.height,google.ima.ViewMode.NORMAL),O=e(B,h.AD_REQUEST_TIMEOUT)}catch(b){y("300")}}function q(){V("googleIMA.onAdLoaded"),z(O),X&&(S.start(),P=e(C,h.AD_START_TIMEOUT))}function r(){V("googleIMA.adBreakReadyHandler"),X&&(S.start(),P=e(C,h.AD_START_TIMEOUT))}function s(){V("googleIMA.onContentPauseRequested")}function t(){V("googleIMA.onContentResumeRequested")}function u(a){if(V("googleIMA.onAdStarted"),z(P),U=a.getAd(),X&&(W=h.status.STARTED,k.send(k.types.EVENT,i.AD_STARTED),(L.forceTimer||"video"!==L.type)&&L.duration&&1e3*parseInt(L.duration)>0&&(V("set forceTimer:",L.duration,"sec"),M=e(D,1e3*parseInt(L.duration))),"overlay"===L.type)){var b=c.getElementById("AdHolder");b.contains(j.videoTag)&&b.removeChild(j.videoTag)}}function v(){V("googleIMA.onAdComplete")}function w(){V("googleIMA.onAllAdsCompleted"),X&&(W=h.status.STOPPED,k.send(k.types.EVENT,i.AD_FINISHED))}function x(){z(M),z(N),z(O),z(P),S&&(S.removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,o),S.removeEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,s),S.removeEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,t),S.removeEventListener(google.ima.AdEvent.Type.LOADED,q),S.removeEventListener(google.ima.AdEvent.Type.STARTED,u),S.removeEventListener(google.ima.AdEvent.Type.COMPLETE,v),S.removeEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,w),S.removeEventListener(google.ima.AdEvent.Type.AD_BREAK_READY,r),S.destroy(),S=null),T&&(T.removeEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,p),T.removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,o),T.destroy(),T=null),Q&&(Q.destroy(),Q=null),g()}function y(a){X&&k.send(k.types.EVENT,i.AD_ERROR,{code:a})}function z(a){void 0!==a&&f(a)}function A(){z(N),X&&y("400")}function B(){z(O),X&&y("400")}function C(){z(P),X&&y("400")}function D(){V("googleIMA.onTimeout"),X&&(z(M),w())}function E(){V("googleIMA.loadSdks"),a(l.ssl?Y.ssl:Y.nonSsl,F,G)}function F(){V("googleIMA.onVpaidSdkLoadSuccess"),$=!0,void 0!==google.ima?(Z=!0,m()):G()}function G(){V("googleIMA.onSdkLoadError"),$=!0,y(100)}function H(){X=!0,W=h.status.DEFAULT}function I(a){a&&(L=a),V("googleIMA.request","hasSdk",Z,"isSdkTriedToLoad",$),Z?m():Z||$?$&&!Z&&y(100):E()}function J(a,b){S&&S.resize(a,b,"normal")}function K(){V("googleIMA.destroy"),x(),X=!1}var L,M,N,O,P,Q,R,S,T,U,V=b(n[123]),W=h.status.DEFAULT,X=!1,Y={ssl:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",nonSsl:"http://imasdk.googleapis.com/js/sdkloader/ima3.js"},Z=!1,$=!1;return{type:"googleIMA",initialize:H,request:I,resize:J,destroy:K}}),m(n[126],[n[13],n[114]],function(a,b){function c(a){f("onAdRequested: ",a),a&&!e&&(a.responseTime=(new j).getTime(),e=a)}function d(a){if(f("onAdResponsed: ",e),e){var c=(new j).getTime();e.responseTime=c-e.responseTime,e.success=a,f("data:",e),b.send(b.types.REPORT,b.events.REPORT_AD_RESPONDED,e),e=null}}var e,f=a("logic/ads/adResponseReporter");return{requested:c,responsed:d}}),m(n[125],[n[70],n[13],n[73],n[120],n[124],n[126],n[118],n[94],n[119],n[114],n[8]],function(b,d,g,h,i,j,k,l,m,o,p){function q(){if(R){var b=g(),c=h.getInfo(),d={},f=[],i=m.userName,l=m.categories,n={LR_PUBLISHER_ID:K.key,LR_AUTOPLAY:1,LR_SCHEMA:"vast2-vpaid",LR_FORMAT:"application/javascript",LR_VIDEO_AMID:c.id,LR_CONTENT:6,LR_DESCRIPTION:c.description,LR_TITLE:c.title,LR_URL:c.url,LR_VIDEO_DURATION:m.contentLength,LR_LAYOUT_BACKGROUND:1,LR_VIDEO_URL:c.url,LR_TIMEOUT_DELIVERY:7,LR_TIMEOUT_ADSOURCE:7,LR_TIMEOUT_VPAID_INIT:7,LR_TIMEOUT_VPAID_START:7};m.contentProgress&&(n.LR_VIDEO_POSITION=m.contentProgress),m.currentPos===k.positions.PRE&&(n.LR_VIDEO_POSITION=0),i&&f.push(i),f.push(c.id),l&&l.length&&(f=f.concat(l)),n.LR_TAGS=f.join(","),K.lrVerticals&&(n.LR_VERTICALS=K.lrVerticals),"video"===K.type?(n.LR_DURATION=K.lrDuration?K.lrDuration:30,n.LR_ADUNIT="in"):n.LR_ADUNIT="ov","video"===K.type&&(n.videoSlot=m.videoTag,n.videoSlotCanAutoPlay=!0),m.mobile||(n.slot=S),L=a.getVPAIDAd(),L.handshakeVersion("2.0"),L.subscribe(r,"AdLoaded"),L.subscribe(s,"AdStarted"),L.subscribe(t,"AdImpression"),L.subscribe(u,"AdStopped"),L.subscribe(v,"AdError"),L.subscribe(w,"AdLog"),L.initAd(b[0],b[1],"normal",600,d,n),N=e(A,k.AD_REQUEST_TIMEOUT),P("initAd with ",n),j.requested({adType:K.type,provider:"liverail"})}}function r(){P("liveRail.onAdLoaded"),z(N),R&&(Q=k.status.INITIALIZED,L.startAd(),O=e(B,k.AD_START_TIMEOUT))}function s(){if(P("liveRail.onAdStarted"),z(O),R){var a=g();Q=k.status.STARTED,o.send(o.types.EVENT,l.AD_STARTED),L&&L.resizeAd(a[0],a[1]),K.forceTimer&&K.duration&&1e3*parseInt(K.duration)>0&&(M=e(C,1e3*parseInt(K.duration)))}}function t(){j.responsed(!0)}function u(){P("liveRail.onAdStopped"),z(N),z(O),R&&(Q=k.status.STOPPED,o.send(o.types.EVENT,l.AD_FINISHED))}function v(){P("liveRail.onAdError",arguments),z(N),z(O),R&&(Q=k.status.FAILED,y("200"))}function w(){P("liveRail.onAdLog",arguments)}function x(){z(M),z(N),z(O),L&&(L.unsubscribe(r,"AdLoaded"),L.unsubscribe(s,"AdStarted"),L.unsubscribe(t,"AdImpression"),L.unsubscribe(u,"AdStopped"),L.unsubscribe(v,"AdError"),L.unsubscribe(w,"AdLog")),i()}function y(a){R&&(j.responsed(!1),o.send(o.types.EVENT,l.AD_ERROR,{code:a}))}function z(a){void 0!==a&&f(a)}function A(){z(N),R&&y("400")}function B(){z(O),R&&y("400")}function C(){P("liveRail.onTimeout"),R&&(f(M),u())}function D(){P("liveRail.loadSdks"),b(p.ssl?T.vpaidSsl:T.vpaidNonSsl,E,F)}function E(){P("liveRail.onVpaidSdkLoadSuccess");var b=a.getVPAIDAd();V=!0,b&&void 0!==b.handshakeVersion?(U=!0,b=null,q()):F()}function F(){P("liveRail.onSdkLoadError"),V=!0,y(100)}function G(){R=!0,Q=k.status.DEFAULT}function H(a){a&&(K=a),P("liveRail.request","rule",K),P("liveRail.request","hasSdk",U,"isSdkTriedToLoad",V),U?q():U||V?V&&!U&&y(100):D()}function I(a,b){L&&L.resizeAd(a,b)}function J(){P("liveRail.destroy"),x(),R=!1}var K,L,M,N,O,P=d(n[125]),Q=k.status.DEFAULT,R=!1,S=c.getElementById("AdHolder"),T={vpaidSsl:"http://cdn-static.liverail.com/js/LiveRail.AdManager-1.0.js",vpaidNonSsl:"http://cdn-static.liverail.com/js/LiveRail.AdManager-1.0.js"},U=!1,V=!1;return{type:"liveRail",initialize:G,request:H,resize:I,destroy:J}}),m(n[116],[n[17],n[26],n[28],n[68],n[73],n[70],n[13],n[117],n[121],n[122],n[123],n[125],n[120],n[118],n[94],n[119],n[114]],function(a,e,f,g,h,i,j,k,l,m,o,p,q,r,s,t,u){function v(a){V("setAdFree.adfreeStatus",a),V("setAdFree.adfree",X),a!==X&&(X=a,Y&&(X?w():q.hasAds()&&q.getData()?(fa=0,ea=r.positions.MID,E()):A()))}function w(){V("disposeLogics"),R?(H(),R=null):J(),x(),y(),aa=!1,ba=0,ea=r.positions.PRE,fa=-1}function x(){V("dispatchPrerollDone - isPrerollDone: "+$+" - started: "+Y),!$&&Y&&($=!0,u.send(u.types.EVENT,s.AD_EVENT,{type:s.types.PREROLL_DONE}))}function y(){V("dispatchCompanion - isCompanionDone: "+_+" - started: "+Y),!_&&Y&&(_=!0,u.send(u.types.EVENT,s.types.COMPANION))}function z(){for(var a=d.userAgent.toLowerCase(),b=!1,c=0,e=ha.length;c<e;c++)b=b||new RegExp(""+ha[c]).test(a);return b?"html5noclick":"html5"}function A(){if(q.hasAds()&&q.getData())V("getRuleset - ruleset already loaded - start render"),E();else{var c=[a.id(),a.app(),t.countryCode,a.hid,ustream.vars.locale,b.href,t.mobile?z():"web"];V("getRuleset: ",c),g.getAdverts(c,C,B,5e3)}}function B(){V("onRulesetLoadError"),v(!0)}function C(a){V("onRulesetLoadSuccess: ",a),a&&a.success&&a.ads?(u.on(u.types.EVENT,s.PARSE_DONE,D),q.setData(a.ads)):v(!0)}function D(){return V("onRulesetDone - hasAds: ",q.hasAds()),q.hasAds()?(t.videoTag||(U=c.getElementById("AdHolder"),T=c.createElement("video"),T.name="temp",T.id="adVideoTag",T.style.width="100%",T.style.height="100%",t.videoTag=T),void E()):void v(!0)}function E(){J(),R&&(R.remove&&(q.remove(ea,fa),fa--),R=null),V("status: ",W),W!==r.status.PAUSED&&(fa++,V("getNextRule - pos: "+ea+" - index: "+fa),q.getData().hasOwnProperty(ea)&&fa!==q.getData()[ea].length||(V("there is no rules in current pos: ",!q.getData().hasOwnProperty(ea)),fa>0&&V("end of loop: ",fa===q.getData()[ea].length),fa=0,ea===r.positions.PRE&&(ea=r.positions.MID,t.currentPos=ea,x()),V("current pos:"+ea+"currentIndex:"+fa)),q.getData().hasOwnProperty(ea)&&q.getData()[ea].length>0?(R=q.getData()[ea][fa],V("currentRule: ",[R,ea,fa])):V("there are no more ads. it is a lucky day"),R&&F())}function F(){switch(R.provider){case"liverail":S=p;break;case"adaptv":S=k;break;case"googleads":u.send(u.types.EVENT,s.ADHOLDER_SHOW),S=o;break;case"delay":S=m}S&&(V("renderCurrentAd",S),T.src="",U.appendChild(T),t.width=ca,t.height=da,S.initialize(),S.request(R))}function G(){V("onAdStarted - isAdBlockPlaying: "+aa+" - blockStart: "+R.blockStart),"delay"!==R.provider&&u.send(u.types.EVENT,s.ADHOLDER_SHOW),W!==r.status.PAUSED&&(W=r.status.IN_PROGRESS),"video"===R.type&&(aa||u.send(u.types.EVENT,s.AD_EVENT,{type:s.types.VIDEO_STARTED,contentPlaying:!1,controls:!1}),(R.blockStart||void 0===R.blockStart&&!aa)&&(R.blockStart&&(aa=!0,V("set adblock")),u.send(u.types.EVENT,s.ADHOLDER_VIDEO)))}function H(){V("onAdFinished - isAdBlockPlaying: "+aa+" - blockStart: "+R.blockEnd),J(),W!==r.status.PAUSED&&(W=r.status.STARTED),(!aa||aa&&R.blockEnd)&&(u.send(u.types.EVENT,s.ADHOLDER_HIDE),aa&&(V("unset adblock"),aa=!1)),"video"!==R.type||aa||(V("onAdFinished - currentRule.type: "+R.type+" - isAdBlockPlaying: "+aa),u.send(u.types.EVENT,s.AD_EVENT,{type:s.types.VIDEO_FINISHED,contentPlaying:!0,controls:!0}),ea===r.positions.PRE),X||E()}function I(a){switch(a.errorCode){case 100:ga+=R.provider;break;case 200:ga+=R.provider;break;case 300:ga+=R.provider}H()}function J(){S&&(S.destroy(),S=null)}function K(a){V("onAdvertUpdate"),a.revShare&&V("revShare"),a.disableAds&&v(!0),a.init&&v(!1)}function L(a){for(var b in a)t.hasOwnProperty(b)&&t[b]===a[b]||(t[b]=a[b],"contentProgress"!==b&&V("updateParams - key: "+b+" - value: "+t[b]),"contentPlaying"===b&&(V("     >> contentPlaying.status: ",W),t.contentPlaying||W===r.status.IN_PROGRESS&&void 0!==R&&"video"===R.type?t.contentPlaying&&W===r.status.PAUSED&&(W=t.lastStatus,R||S||X||E()):(t.lastStatus=W,W=r.status.PAUSED)),"premiumMember"===b&&Y&&(!X&&t.premiumMember?v(!0):!X||t.premiumMember||t.proBroadcaster||v(!1)))}function M(a,b){if(void 0===a&&void 0===b){var c=h();a=c[0],b=c[1]}ca===a&&da===b-ba||(ca=a,da=b-ba,ca<300||da<180?(W=r.status.PAUSED,J()):W===r.status.PAUSED&&t.contentPlaying&&(W=r.status.STARTED,E()),S&&S.resize(ca,da))}function N(a){ba!==a[0]&&a[0]<=r.MAXIMUM_AD_OFFSET&&(ba=a[0],M())}function O(){if(V("start.started: ",Y),!Y){var a=t.proBroadcaster||e.adFree||t.premiumMember;Y=!0,a?(V("af: ",X),V("pb: ",t.proBroadcaster),V("pm - params: "+e.adFree+" - update: "+t.premiumMember),X?w():v(!0)):A()}}function P(){V("destroy"),w(),$=!1,_=!1,Y=!1,X=!1}function Q(){if(V("initialize"),!Z){u.on(u.types.DATA,u.events.ADVERT_UPDATE,K),u.on(u.types.EVENT,s.AD_ERROR,I),u.on(u.types.EVENT,s.AD_FINISHED,H),u.on(u.types.EVENT,s.AD_STARTED,G);var a=h();ca=a[0],da=a[1],t.currentPos=r.positions.PRE,Z=!0}}var R,S,T,U,V=j(n[116]),W=r.status.DEAFULT,X=!1,Y=!1,Z=!1,$=!1,_=!1,aa=!1,ba=0,ca=0,da=0,ea=r.positions.PRE,fa=-1,ga="",ha=["ipod","iphone"];return{initialize:Q,start:O,destroy:P,update:L,resize:M,offset:N,isPrerollDone:function(){return $},isAdfree:function(){return X},isStarted:function(){return Y},isAdInProgress:function(){return W===r.status.IN_PROGRESS},isInitialized:function(){return Z},getType:function(){return R?R.type:void 0}}}),m(n[127],[n[75],n[13],n[19],n[78]],function(a,b,c,d){function e(a){x("Error happened while sending log to service",a),j()}function f(a){var b=JSON.parse(a.target.responseText);if(b){if(!b.messageId)return void e("format");r<q.length?(r++,k()):(q=[],c.send(c.types.EVENT,"logSendingComplete",b.messageId),j())}}function g(a){e("connection")}function h(){p=d(),p.onload=f,p.onerror=g}function j(){p.onload=null,p.onerror=null,p=null}function k(){p.open("POST",u,!0);var a={messageId:s,reason:"viewer-tracelog",messageIndex:r,messageCount:q.length,rawData:q[r-1]};p.send(JSON.stringify(a))}function l(){var a,c,d=b(),e=[],f=0,g=0;d.forEach(function(b){c={},b.forEach(function(b,d){"undefined"!=typeof b&&(a=v[d],c[a]="data"===a?JSON.parse(b):b)}),c.id=t,f=JSON.stringify(c).length,g+f<=w?e.push(c):(q.push(e),e=[c],g=0),g+=f}),q.push(e)}function m(a,b,c){var d,e="",f="";for((b||"undefined"==typeof b)&&(e+="0123456789"),c&&(e+="abcdefghijklmnopqrstuvwxyz"),d=0;d<a;++d)f+=e.substr(i.floor(e.length*i.random()),1);return f}function o(){p||(t=m(17,!0,!1),s=m(32,!1,!0),q=[],r=1,h(),l(),k())}var p,q,r,s,t,u="https://rgw.ustream.tv/json.php/Log.collector",v=["date","source","line","data"],w=6e4,x=b(n[127]);return{init:function(){c.on(c.types.EVENT,"sendLog",o)},send:o}}),m(n[130],[n[13],n[114]],function(b,c){function d(a){for(var b in a)if(a.hasOwnProperty(b))return!0;return!1}function e(a,b){if(Array.isArray(a)){Array.isArray(b)||(b=[]);for(var c=0;c<a.length;c++)b.push(a[c])}else if("object"==typeof a){b||(b={});for(var d in a)Array.isArray(a[d])||"object"==typeof a[d]?(b[d]||(b[d]=Array.isArray(a[d])?[]:{}),e(a[d],b[d])):b[d]=a[d]}else b=a}function f(){var a,b=Array.prototype.shift.call(arguments);return arguments.length<2?b.sort():(a=Array.prototype.slice.call(arguments),b.sort(function(b,c){for(var d=a.slice(),e=d.shift();b[e]===c[e]&&d.length;)e=d.shift();return b[e]===c[e]?0:b[e]>c[e]?1:-1}))}function g(){var a;if(d(p)){for(a in p)p[a].common&&p[a].common.bufempty.length&&(p[a].common.bufempty=p[a].common.bufempty.pop().value),c.send(c.types.REPORT,c.events.SEND_REPORT,{mid:a,send:{cmd:"stats",data:[p[a]]}});p={}}}function h(){var a,b,e;if(d(q)){for(a in q){if(q[a].benchmark&&q[a].benchmark.bwrpt&&q[a].benchmark.bwrpt.length)for(b=q[a].benchmark.bwrpt,b=f(b,"url"),e=0;e<b.length-1;++e)b[e].url===b[e+1].url&&(b[e].size+=b[e+1].size,b[e].time+=b[e+1].time,b.splice(e+1,1),e--);c.send(c.types.REPORT,c.events.SEND_REPORT,{mid:a.split("_").join("."),send:{cmd:"stats",data:[q[a]]}})}q={}}}function i(a,b){r("aggregator feed:",a,b),b.common&&b.common.bufempty&&(p[a]=p[a]?p[a]:{common:{bufempty:[]}},b.common.strurl&&(p[a].common.strurl=b.common.strurl,delete b.common.strurl),p[a].common.bufempty.push({value:b.common.bufempty,time:(new j).getTime()}),delete b.common.bufempty,d(b.common)||delete b.common),d(b)&&(q[a]?e(b,q[a]):q[a]=b)}function k(){p={},q={},clearInterval(m),clearInterval(o),m=a.setInterval(g,1e3),o=a.setInterval(h,5e3)}function l(){r("init"),k()}var m,o,p={},q={},r=b(n[130]);return{init:l,feed:i,reset:k}}),m(n[129],[n[13],n[23],n[17],n[114],n[130]],function(b,c,d,e,f){function g(){return(new j).getTime()}function h(a,b){D=-1,e.send(e.types.REPORT,e.events.SEND_REPORT,{mid:a,send:{cmd:F.UMS_COMMAND_SEEK,data:b}})}function k(b){var d=b.send.duration,e=[i.round(b.send.from*d),i.round(b.send.to*d)];D!==-1&&a.clearTimeout(D),D=a.setTimeout(c(h,null,b.mid,e),1e3)}function l(a){B=a.mid,e.send(e.types.REPORT,e.events.SEND_REPORT,{mid:a.mid,send:{cmd:F.UMS_COMMAND_PLAYING,data:[B.split(".")[1],a.send,{reason:a.reason?a.reason:""}]}})}function m(a){C[a]={},C[a].start=g(),C[a].success=-1,C[a].firstModule=-1}function o(a){B=a,C[a].success===-1&&(C[a].success=g(),f.feed(a,{benchmark:{ucd:C[a].success-C[a].start}}))}function p(a){C[a.mid].success===-1&&(C[a.mid].start=-1,C[a.mid].firstModule=-1)}function q(a){C[a.mid].success!==-1&&C[a.mid].firstModule===-1&&(C[a.mid].firstModule=g(),f.feed(a.mid,{benchmark:{fmi:C[a.mid].firstModule-C[a.mid].success}}))}function r(a){f.feed(B,{benchmark:{bwrpt:[{time:a.time,size:a.size,url:a.url}]}})}function s(){f.feed(B,{common:{bufempty:!0}})}function t(){f.feed(B,{common:{bufempty:!1}})}function u(a){var b={type:a.error,details:a.details?a.details:{}},c=B.split(".");"channel"===c[0]?b.details.cid=c[1]:b.details.vid=c[1],f.feed(B,{error:[b]})}function v(a){E("adResponse",a),f.feed(B,{benchmark:{adr:a}})}function w(a){f.feed(B,{benchmark:{ecdnt:a}})}function x(a){a!==A&&(A=a,f.feed(B,{common:{pvdname:a}}))}function y(){C={},A=null,B=null,f.reset()}function z(){E("init"),f.init(),y(),e.on(e.types.REPORT,e.events.PLAYING,l),e.on(e.types.REPORT,e.events.SEEK,k),e.on(e.types.REPORT,e.events.UMS_CONNECT_START,m),e.on(e.types.REPORT,e.events.UMS_CONNECTED,o),e.on(e.types.REPORT,e.events.UMS_REJECT,p),e.on(e.types.REPORT,e.events.MODULE_INFO,q),e.on(e.types.REPORT,e.events.REPORT_BANDWIDTH,r),e.on(e.types.REPORT,e.events.REPORT_BUFFER_EMPTY,s),e.on(e.types.REPORT,e.events.REPORT_BUFFER_FULL,t),e.on(e.types.REPORT,e.events.REPORT_ERROR,u),e.on(e.types.REPORT,e.events.REPORT_AD_RESPONDED,v),e.on(e.types.REPORT,e.events.REPORT_ECDN_TESTS,w),e.on(e.types.REPORT,e.events.REPORT_PROVIDER,x)}var A,B,C={},D=-1,E=b(n[129]),F={LOGIC_INITIATED:"lid",UMS_CONNECTED:"ucd",FIRST_MODULE_INFO:"fmi",KEYFRAME_AFTER_PLAY:"kfap",SEEK_COMPLETE:"kfas",JUMP_COMPLETE:"kfaj",BANDWIDTH_REPORT:"bwrpt",DROPPED_FRAMES:"dpfs",UMS_COMMAND_PLAYING:"playing",UMS_COMMAND_SEEK:"seek"};return{init:z,reset:y,types:F}}),m(n[128],[n[75],n[13],n[17],n[114],n[129]],function(a,b,c,d,e){function f(b){var c;j[b.mid]?(c=a(b.mid),c?(k("report to ums:"+b.send.cmd,b.send.data),c.send(b.send.cmd,b.send.data)):k("umsInstance not available!! mid: "+b.mid)):(k("cache data:",b.mid,b.send),i[b.mid]=i[b.mid]?i[b.mid]:[],i[b.mid].push(b))}function g(a){var b;if(j[a]=!0,i[a]){for(;i[a].length;)b=i[a].shift(),f(b);delete i[a]}}function h(){k("init"),e.init(),d.on(d.types.REPORT,d.events.SEND_REPORT,f),d.on(d.types.REPORT,d.events.UMS_CONNECTED,g)}var i={},j={},k=b(n[128]);return{init:h}}),m(n[131],[n[13],n[114]],function(a,b){function c(){return p&&p.videos&&p.videos.length}function d(){return p&&p.pictures&&p.pictures.length}function e(){o("stop"),m&&(m=!1,b.send(b.types.EVENT,b.events.DESTROY_SLIDESHOW),n>-1&&b.send(b.types.EVENT,b.events.DESTROY_OFFAIR_VIDEO,p.videos[n])),n=-1}function f(){o("start"),m=!0,d()?b.send(b.types.EVENT,b.events.CREATE_SLIDESHOW,p.pictures):c()&&n===-1&&(o("init offair vids:",p.videos),h())}function g(){e(),p={}}function h(){c()&&m&&(n++,n>-1&&p.videos&&n<p.videos.length?(0!==n&&b.send(b.types.EVENT,b.events.DESTROY_OFFAIR_VIDEO,p.videos[n-1]),o("nextvideo:",p.videos[n]),b.send(b.types.EVENT,b.events.CREATE_OFFAIR_VIDEO,p.videos[n])):o("offair videos played"))}function i(a){o("onLive"),a&&m?e():a||m||k&&!d()||f(),k=a}function j(a){o("init",a),p=a,l||(b.on(b.types.EVENT,b.events.NEXT_OFFAIR_VIDEO,h),b.on(b.types.EVENT,b.events.LIVE,i),l=!0)}var k,l=!1,m=!1,n=-1,o=a("logic/offiarContentHandler"),p={};return{init:j,start:f,stop:e,destroy:g}}),m("atlas/atlas/events",[],function(){return{POSITION:"Atlas.position",FINISHED:"Atlas.finished",BUFFER_EMPTY:"Atlas.bufferEmpty",BUFFER_FULL:"Atlas.bufferFull",METADATA:"Atlas.metadata",BANDWIDTH:"Atlas.bandwidth",STORED:"Atlas.stored",BUFFERED:"Atlas.buffered",ERROR:"Atlas.error",LOG:"Atlas.log",THROTTLE:"Atlas.throttle",CC_DETECTED:"Atlas.ccDetected"}}),m("atlas/atlas/formats",[],function(){return{FLV_MOVIE:"flv",FLV_SEGMENTED:"flv/segmented",MP4_MOVIE:"mp4",MP4_SEGMENTED:"mp4/segmented",HLS:"hls"}}),m("atlas/atlas/internals",[],function(){return{}}),m("atlas/tools/notifier",[],function(){function a(){function a(a,d,e){e=isNaN(+e)?0:i.max(b,i.min(c,+e)),j||(j={}),j[a]||(j[a]=[]);for(var f=j[a],g=0;f[g]&&f[g].priority>e;)++g;f.splice(g,0,{callback:d,priority:e})}function d(a,b){if(j&&j[a]){for(var c=0;c<j[a].length;++c)j[a][c].callback===b&&j[a].splice(c--,1);j[a].length||delete j[a]}}function e(a){return j.hasOwnProperty(a)&&!!j[a].length}function f(a,b){for(var c=0;j&&j[a]&&c<j[a].length;++c)if(j[a][c].callback===b)return!0;return!1}function g(a,b){if(j&&j[a]){var c,d=[];for(c=0;c<j[a].length;++c)d.push(j[a][c].callback);for(c=0;c<d.length;++c)f(a,d[c])&&d[c](b)}}function h(){j=null}var j={};return{addListener:a,removeListener:d,hasListener:e,on:a,off:d,dispatch:g,cleanup:h}}var b=-2,c=2;return{create:a}}),m("atlas/tools/logger",["atlas/tools/notifier"],function(a){function b(a){function b(b,c){e(a,b,c,0)}function c(b,c){e(a,b,c,1)}function d(b,c){e(a,b,c,2)}function f(b,c){e(a,b,c,3)}return{debug:b,info:c,warn:d,error:f}}function c(a,b){f.addListener(a,b)}function d(a,b){f.removeListener(a,b)}function e(a,b,c,d){var e=new j;if(f.hasListener(g.LOG)){var h={timestamp:e,source:a,line:b,data:c,level:d};f.dispatch(g.LOG,h)}}var f=a.create(),g={LOG:"log"};return{create:b,log:e,events:g,addListener:c,removeListener:d}}),m("atlas/atlas/eventtypes/componentevents",[],function(){var a="Component";return{BASE:a,CREATE:a+".create",DESTROY:a+".destroy"}}),m("atlas/atlas/eventtypes/debugevents",[],function(){var a="Debug";return{BASE:a,LOG:a+".log"}}),m("atlas/atlas/eventtypes/segmentdownloaderevents",[],function(){var a="SegmentDownloader";return{BASE:a,LOAD_INIT:a+".loadInit",LOAD_START:a+".loadStart",LOAD_COMPLETE:a+".loadComplete",SEGMENT:a+".segment",CONFIG:a+".config",FAILED:a+".failed",ABORTED:a+".aborted",DESTROY:a+".destroy"}}),m("atlas/atlas/eventtypes/segmentstorageevents",[],function(){var a="SegmentStorage";return{BASE:a,SEGMENT_MISSING:a+".segmentMissing",KEYFRAME_POSITION:a+".keyFramePosition",SEGMENT_REMOVED:a+".segmentRemoved",SEGMENTS_REMOVED:a+".segmentsRemoved",SEGMENT_CHANGE:a+".segmentChange",LAST_SEGMENT_IN_BUNDLE:a+".lastSegmentInBundle"}}),m("atlas/atlas/eventtypes/videoplayerevents",[],function(){var a="VideoPlayer";return{BASE:a,ERROR:a+".error",POSITION:a+".position",BUFFERED:a+".buffered",BUFFER_EMPTY:a+".bufferEmpty",BUFFER_FULL:a+".bufferFull",STREAM_INFO:a+".streamInfo",THROTTLE:a+".throttle",RENDERER_CHANGE:a+".rendererChange",CC_DETECTED:a+".ccDetected"}}),m("atlas/atlas/components/videotag/events",[],function(){return{ABORT:"abort",CAN_PLAY:"canplay",CAN_PLAY_THROUGH:"canplaythrough",DURATION_CHANGE:"durationchange",EMPTIED:"emptied",ENCRYPTED:"encrypted",ENDED:"ended",ERROR:"error",INTERRUPT_BEGIN:"interruptbegin",INTERRUPT_END:"interruptend",LOADED_DATA:"loadeddata",LOADED_METADATA:"loadedmetadata",LOAD_START:"loadstart",PAUSE:"pause",PLAY:"play",PLAYING:"playing",PROGRESS:"progress",RATE_CHANGE:"ratechange",SEEKED:"seeked",SEEKING:"seeking",STALLED:"stalled",SUSPEND:"suspend",TIME_UPDATE:"timeupdate",VOLUME_CHANGE:"volumechange",WAITING:"waiting"}}),m("atlas/atlas/eventtypes/videotagproxyevents",["atlas/atlas/components/videotag/events"],function(a){var b="videoTagProxyEvents",c={BASE:b};for(var d in a)a.hasOwnProperty(d)&&(c[d]=b+"."+a[d]);return c}),m("atlas/atlas/eventtypes/bufferevents",[],function(){var a="Buffer";return{BASE:a,REQUEST_STORAGE:a+".requestStorage",STREAM_SWITCH:a+".streamSwitch",BUFFER_UPDATING:a+".bufferUpdating",BUFFER_UPDATED:a+".bufferUpdated",APPEND:a+".append",REMOVE:a+".remove",PURGE:a+".purge"}}),m("atlas/atlas/eventtypes/buffermanagerevents",[],function(){var a="BufferManager";return{BASE:a,BUFFER_ADDED:a+".bufferAdded",BUFFER_REMOVED:a+".bufferRemoved",APPEND_TO_BUFFER:a+".appendToBuffer"}}),m("atlas/atlas/facade",["atlas/tools/logger","atlas/atlas/eventtypes/componentevents","atlas/atlas/eventtypes/debugevents","atlas/atlas/eventtypes/segmentdownloaderevents","atlas/atlas/eventtypes/segmentstorageevents","atlas/atlas/eventtypes/videoplayerevents","atlas/atlas/eventtypes/videotagproxyevents","atlas/atlas/eventtypes/bufferevents","atlas/atlas/eventtypes/buffermanagerevents","atlas/tools/notifier"],function(a,b,c,d,e,f,g,h,i,j){function k(a,b,c){0!==b.indexOf("Flash:")&&(b="Js:"+b),u.indexOf(a)===-1&&r.debug("dispatch : "+a+" from "+b,c);var d={type:a,originId:b,data:c};s.dispatch(d.type,d);var e=d.type.split(".");for(e.push("*");e.length>1;)e.splice(e.length-2,1),s.dispatch(e.join("."),d)}function l(a,b,c){s.addListener(a,b,c)}function m(a,b){s.removeListener(a,b)}function n(a,b){for(var c=[],d=0;b&&d<b.length;++d)void 0===a.data[b[d]]&&c.push(b[d]);if(c.length)throw r.error("missing data from notification ("+c.join(", ")+")",a),new Error("Missing data from notification ("+c.join(", ")+")")}function o(a){t.push(a)}function p(a){t.indexOf(a)>-1&&t.splice(t.indexOf(a),1)}function q(a){for(var b=a.originId.split(":")[1],c=0;c<t.length;++c)t[c].name===b&&t.splice(c--,1)}var r=a.create("Facade"),s=j.create(),t=[],u=[c.LOG,d.LOAD_INIT,d.LOAD_START,d.DESTROY,d.SEGMENT,d.CONFIG,e.SEGMENT_CHANGE,f.POSITION,f.BUFFERED,f.STREAM_INFO,h.BUFFER_UPDATING,h.BUFFER_UPDATED,h.APPEND,i.APPEND_TO_BUFFER,g.PROGRESS,g.TIME_UPDATE];return l(b.DESTROY,q),{dispatch:k,addListener:l,removeListener:m,registerComponent:o,unregisterComponent:p,validateNotificationData:n}}),m("atlas/atlas/eventtypes/mseproxyevents",[],function(){var a="MSEProxy";return{BASE:a,SOURCE_OBJECT_URL:a+".sourceObjectURL",SOURCE_OPEN:a+".sourceOpen",SOURCE_CLOSE:a+".sourceClose",SOURCE_BUFFER_ADDED:a+".sourceBufferAdded",SOURCE_BUFFER_REMOVED:a+".sourceBufferRemoved"}}),m("atlas/tools/timerange",[],function(){function a(a){for(var b=[],c=0;c<a.length;++c)b.push({start:i.floor(1e3*a.start(c)),end:i.floor(1e3*a.end(c))});return b}function b(a,b){for(var c=0;b&&c<b.length;++c)if(b[c].start<=a&&b[c].end>=a)return b[c];return null}function c(a,b){for(var c=0;c<b.length&&!(b[c].start>=a);)c++;return c<b.length?b[c]:null}function d(a,c){var d=b(a,c);return d?d.end-a:0}function e(a,b){for(var c=0,d=0;d<b.length;++d)b[d].end>a&&(c+=b[d].end-i.max(b[d].start,a));return c}function f(a,b){if(!a&&!b)return[];if(a&&!b)return a;for(var c=0,d=0,e=[];c<a.length&&d<b.length;){var f=i.max(a[c].start,b[d].start),g=i.min(a[c].end,b[d].end);f<g&&e.push({start:f,end:g}),a[c].end<b[d].end?c++:b[d].end<a[c].end?d++:(c++,d++)}return e}return{buffered:a,current:b,next:c,remaining:d,remainingTotal:e,intersect:f}}),m("atlas/tools/listenermanager",[],function(){function a(a){function b(b,c){i&&(i.push({type:b,closure:c}),a&&a.addEventListener(b,c))}function c(b,c){for(var d=0;i&&d<i.length;++d)i[d].type===b&&i[d].closure===c&&(i.splice(d--,1),a&&a.removeEventListener(b,c))}function d(){for(var b=0;a&&i&&b<i.length;++b)a.addEventListener(i[b].type,i[b].closure)}function e(){for(var b=0;a&&i&&b<i.length;++b)a.removeEventListener(i[b].type,i[b].closure)}function f(){for(;a&&i&&i.length;)a.removeEventListener(i[0].type,i[0].closure),i.shift()}function g(){f(),i=null,a=null}function h(b){e(),a=b,d()}var i=[];return{addListener:b,removeListener:c,clearListeners:f,setTarget:h,destroy:g}}return{create:a}}),m("atlas/atlas/components/media/actionqueue",["atlas/atlas/facade","atlas/atlas/eventtypes/bufferevents","atlas/atlas/eventtypes/buffermanagerevents","atlas/atlas/eventtypes/videoplayerevents","atlas/atlas/eventtypes/mseproxyevents","atlas/tools/timerange","atlas/tools/listenermanager","atlas/tools/logger"],function(a,b,c,d,e,f,g,h){function i(b,c){a.dispatch(b,"ActionQueue",c)}function j(j,m){function n(){
a.addListener(d.ERROR,y),a.addListener(b.APPEND,q),a.addListener(b.REMOVE,r),a.addListener(b.PURGE,s),a.addListener(e.SOURCE_CLOSE,o),a.addListener(c.BUFFER_REMOVED,p),D.addListener(l.UPDATE_END,v),D.addListener(l.ERROR,w),D.addListener(l.ABORT,x)}function o(){a.removeListener(d.ERROR,y),a.removeListener(b.APPEND,q),a.removeListener(b.REMOVE,r),a.removeListener(b.PURGE,s),a.removeListener(e.SOURCE_CLOSE,o),a.removeListener(c.BUFFER_REMOVED,p),D.destroy(),B=null}function p(b){a.validateNotificationData(b,["bufferId"]),b.data.bufferId===m&&o()}function q(b){a.validateNotificationData(b,["bufferId","bytes"]),b.data.bufferId===m&&t({type:k.BYTES,bytes:b.data.bytes})}function r(b){a.validateNotificationData(b,["bufferId","start","end"]),b.data.bufferId===m&&t({type:k.REMOVE,start:b.data.start,end:b.data.end})}function s(b){a.validateNotificationData(b,["bufferId"]),b.data.bufferId===m&&t({type:k.PURGE})}function t(a){C?(a.type===k.PURGE&&(B=[]),B.push(a)):(u(a),i(b.BUFFER_UPDATING,{bufferId:m}))}function u(a){switch(a.type){case k.BYTES:j.appendBuffer(a.bytes);break;case k.REMOVE:j.remove(a.start/1e3,a.end/1e3);break;case k.PURGE:j.buffered.length&&j.remove(j.buffered.start(0),j.buffered.end(j.buffered.length-1));break;default:throw A.error("unknown action type: "+a.type),new Error("Unknown action type: "+a.type)}C=!0}function v(){C=!1,B.length?u(B.shift()):i(b.BUFFER_UPDATED,{bufferId:m,ranges:f.buffered(j.buffered)})}function w(){B=[],A.error("onError")}function x(){A.warn("abort")}function y(){B=[],C=!1,A.error("onVideoTagError")}var z,A=h.create("ActionQueue."+m),B=[],C=!1,D=g.create(j);return n(),z={bufferId:m,sourceBuffer:j}}var k={BYTES:"bytes",REMOVE:"remove",PURGE:"purge"},l={UPDATE_START:"updatestart",UPDATE_END:"updateend",UPDATE:"update",ERROR:"error",ABORT:"abort"};return{create:j}}),m("atlas/atlas/eventtypes/apievents",[],function(){var a="AtlasAPI";return{BASE:a,PAUSE:a+".pause",RESUME:a+".resume",SEEK:a+".seek",VOLUME:a+".volume",CAPTIONS:a+".captions",SUSPEND:a+".suspend",WAKE:a+".wake",CLEANUP:a+".cleanup",UPDATE_OPTIONS:a+".updateOptions",SET_MAX_MEMORY_USAGE:a+".setMaxMemoryUsage"}}),m("atlas/atlas/eventtypes/controllerevents",[],function(){var a="Controller";return{BASE:a,FINISHED:a+".finished",STREAM_URL:a+".streamURL",ADD_BUFFER:a+".addBuffer",REMOVE_BUFFER:a+".removeBuffer",LOAD_MOVIE_META:a+".loadMovieMeta",LOAD_SEGMENT:a+".loadSegment",ABORT_DOWNLOAD:a+".abortDownload",REQUEST_KEYFRAME_POSITION:a+".requestKeyFramePosition",SWITCH_STREAM:a+".switchStream",CANCEL_STREAM_SWITCH:a+".cancelStreamSwitch"}}),m("atlas/tools/env",[],function(){function e(){return C?/win/.test(C):/win/.test(B)}function f(){return C?/mac/.test(C):/mac/.test(B)}function g(){return!(h()||i()||j()||k())}function h(){var a=/android/i.test(B);return a&&(a=B.match(/android (\d*)\.(\d*)?\.?(\d*)/i),a.shift()),a}function i(){var a=/iphone|ipad|ipod/.test(B);return a&&(a=B.match(/os (\d*)?\_?(\d*)?\_?(\d*)/i),a.shift()),a}function j(){return/BB10(.*)Mobile/i.test(B)}function k(){return B.indexOf("playstation")>-1}function l(){var a=/chrome/i.test(B);return a&&!m()&&(a=B.match(/chrome\/(\d*)\.(\d*)?\.?(\d*)/i),a.shift()),a}function m(){var b=!1;return"undefined"!=typeof a.opera&&"[object Opera]"===a.opera.toString()?b=a.opera.version().split("."):d&&(b=B.match(/opr\/(\d+)\.(\d+)\.(\d+)\.(\d+)/i)),b}function n(){return/firefox/.test(B)}function o(){var a=c.getElementsByTagName("html")[0],b=a.className.indexOf("ie ")>-1;return b||(b=B.indexOf("trident")>-1),b}function p(){return/safari/.test(B)&&!l()&&!m()}function q(){return/https/.test(b.protocol)}function r(){var a,b=A&&A[y]&&A[y].enabledPlugin&&A[y].enabledPlugin.filename||"";return b=b.toLowerCase(),a="pepflashplayer.dll"===b||"libpepflashplayer.so"===b||"pepperflashplayer.plugin"===b||"chrome.plugin"===b.slice(-13)}function s(){var b,c;if(typeof a.ActiveXObject===u)return!1;try{if(b=new a.ActiveXObject(x))return c=b.GetVariable("$version"),!c||(c=c.split(" ")[1].split(","),[parseInt(c[0],10),parseInt(c[1],10),parseInt(c[2],10)])}catch(d){}return!1}function t(){var a,b=[0,0,0];return typeof z.plugins!==u&&typeof z.plugins[w]===v?(a=z.plugins[w].description,!a||typeof A!==u&&A[y]&&!A[y].enabledPlugin||(a=a.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),b[0]=+a.replace(/^(.*)\..*$/,"$1"),b[1]=+a.replace(/^.*\.(.*)\s.*$/,"$1"),b[2]=/[a-zA-Z]/.test(a)?+a.replace(/^.*[a-zA-Z]+(.*)$/,"$1"):0)):s()&&(b=s()),"000"===b.join("")&&(b=!1),b}var u="undefined",v="object",w="Shockwave Flash",x="ShockwaveFlash.ShockwaveFlash",y="application/x-shockwave-flash",z=d,A=z.mimeTypes,B=z.userAgent.toLowerCase(),C=z.platform.toLowerCase();return function(){var a=i(),b=o();return{win:e(),mac:f(),desktop:g(),ios:a,android:h(),blackberry:j(),playstation:k(),chrome:l(),opera:m(),ff:n(),safari:p(),ie:b,ssl:q(),swf:t(),flashPPAPI:r(),flashActiveX:s(),nav:{appCodeName:z.appCodeName,appName:z.appName,appVersion:z.appVersion,cpuClass:z.cpuClass,platform:z.platform,product:z.product,userAgent:z.userAgent,vendor:z.vendor,vendorSub:z.vendorSub}}}()}),m("atlas/atlas/components/mseproxy",["atlas/atlas/facade","atlas/atlas/components/media/actionqueue","atlas/atlas/eventtypes/apievents","atlas/atlas/eventtypes/buffermanagerevents","atlas/atlas/eventtypes/componentevents","atlas/atlas/eventtypes/controllerevents","atlas/atlas/eventtypes/mseproxyevents","atlas/tools/logger","atlas/tools/listenermanager","atlas/tools/env"],function(b,c,d,e,f,g,h,i,j,k){function l(a,c){b.dispatch(a,p,c)}function m(){function a(){q.debug("create"),o(),t(),b.addListener(e.BUFFER_ADDED,m),b.addListener(e.BUFFER_REMOVED,n),b.addListener(d.CLEANUP,g),b.addListener(d.SUSPEND,i),l(f.CREATE)}function g(){b.removeListener(e.BUFFER_ADDED,m),b.removeListener(e.BUFFER_REMOVED,n),b.removeListener(d.CLEANUP,g),b.removeListener(d.SUSPEND,i),b.removeListener(d.WAKE,k),u(),x.destroy(),l(f.DESTROY)}function i(){b.removeListener(d.SUSPEND,i),b.addListener(d.WAKE,k),u()}function k(){b.removeListener(d.WAKE,k),b.addListener(d.SUSPEND,i),t()}function m(a){b.validateNotificationData(a,["bufferId","contentType"]),z[a.data.bufferId]?q.warn("there is already a sourceBuffer for "+a.data.bufferId):(z[a.data.bufferId]=c.create(y.addSourceBuffer(a.data.contentType),a.data.bufferId),q.debug("created sourceBuffer for "+a.data.bufferId),l(h.SOURCE_BUFFER_ADDED,{bufferId:a.data.bufferId}))}function n(a){b.validateNotificationData(a,["bufferId"]),z[a.data.bufferId]?(y.removeSourceBuffer(z[a.data.bufferId].sourceBuffer),delete z[a.data.bufferId],l(h.SOURCE_BUFFER_REMOVED,{bufferId:a.data.bufferId})):q.warn("there is no sourceBuffer for "+a.data.bufferId)}function o(){x=j.create(),x.addListener(r.SOURCE_OPEN,v),x.addListener(r.SOURCE_ENDED,v),x.addListener(r.SOURCE_CLOSE,v)}function t(){y=new s,x.setTarget(y),l(h.SOURCE_OBJECT_URL,{source:URL.createObjectURL(y)})}function u(){x.setTarget(null),y=null,z={},l(h.SOURCE_CLOSE)}function v(a){switch(q.debug("onMediaSourceEvent",a),a.type){case r.SOURCE_OPEN:l(h.SOURCE_OPEN);break;case r.SOURCE_CLOSE:for(var b in z)z.hasOwnProperty(b)&&(l(h.SOURCE_BUFFER_REMOVED,{bufferId:z[b].bufferId}),delete z[b]);l(h.SOURCE_CLOSE)}}var w,x,y,z={};return a(),w={name:p}}function n(){return!!s&&!k.safari}function o(a){return!!n()&&s.isTypeSupported(a)}var p="MSEProxy",q=i.create(p),r={SOURCE_OPEN:"sourceopen",SOURCE_ENDED:"sourceended",SOURCE_CLOSE:"sourceclose"},s=a.MediaSource||a.WebKitMediaSource;return q.info(k.nav.appName+" "+k.nav.appVersion),{create:m,name:p,isSupported:n(),isCompatible:o}}),m("atlas/vendor/swfobject",[],function(){var b=function(){function f(){if(!X){try{var a=Q.getElementsByTagName("body")[0].appendChild(w("span"));a.parentNode.removeChild(a)}catch(b){return}X=!0;for(var c=T.length,d=0;d<c;d++)T[d]()}}function h(a){X?a():T[T.length]=a}function i(a){if(typeof P.addEventListener!=I)P.addEventListener("load",a,!1);else if(typeof Q.addEventListener!=I)Q.addEventListener("load",a,!1);else if(typeof P.attachEvent!=I)x(P,"onload",a);else if("function"==typeof P.onload){var b=P.onload;P.onload=function(){b(),a()}}else P.onload=a}function j(){S?k():l()}function k(){var a=Q.getElementsByTagName("body")[0],b=w(J);b.setAttribute("type",M);var c=a.appendChild(b);if(c){var d=0;!function(){if(typeof c.GetVariable!=I){var f=c.GetVariable("$version");f&&(f=f.split(" ")[1].split(","),$.pv=[parseInt(f[0],10),parseInt(f[1],10),parseInt(f[2],10)])}else if(d<10)return d++,void e(arguments.callee,10);a.removeChild(b),c=null,l()}()}else l()}function l(){var a=U.length;if(a>0)for(var b=0;b<a;b++){var c=U[b].id,d=U[b].callbackFn,e={success:!1,id:c};if($.pv[0]>0){var f=v(c);if(f)if(!y(U[b].swfVersion)||$.wk&&$.wk<312)if(U[b].expressInstall&&n()){var g={};g.data=U[b].expressInstall,g.width=f.getAttribute("width")||"0",g.height=f.getAttribute("height")||"0",f.getAttribute("class")&&(g.styleclass=f.getAttribute("class")),f.getAttribute("align")&&(g.align=f.getAttribute("align"));for(var h={},i=f.getElementsByTagName("param"),j=i.length,k=0;k<j;k++)"movie"!=i[k].getAttribute("name").toLowerCase()&&(h[i[k].getAttribute("name")]=i[k].getAttribute("value"));o(g,h,c,d)}else p(f),d&&d(e);else A(c,!0),d&&(e.success=!0,e.ref=m(c),d(e))}else if(A(c,!0),d){var l=m(c);l&&typeof l.SetVariable!=I&&(e.success=!0,e.ref=l),d(e)}}}function m(a){var b=null,c=v(a);if(c&&"OBJECT"==c.nodeName)if(typeof c.SetVariable!=I)b=c;else{var d=c.getElementsByTagName(J)[0];d&&(b=d)}return b}function n(){return!Y&&y("6.0.65")&&($.win||$.mac)&&!($.wk&&$.wk<312)}function o(a,b,c,d){Y=!0,E=d||null,F={success:!1,id:c};var f=v(c);if(f){"OBJECT"==f.nodeName?(C=q(f),D=null):(C=f,D=c),a.id=N,(typeof a.width==I||!/%$/.test(a.width)&&parseInt(a.width,10)<310)&&(a.width="310"),(typeof a.height==I||!/%$/.test(a.height)&&parseInt(a.height,10)<137)&&(a.height="137"),Q.title=Q.title.slice(0,47)+" - Flash Player Installation";var g=$.ie&&$.win?"ActiveX":"PlugIn",h="MMredirectURL="+P.location.toString().replace(/&/g,"%26")+"&MMplayerType="+g+"&MMdoctitle="+Q.title;if(typeof b.flashvars!=I?b.flashvars+="&"+h:b.flashvars=h,$.ie&&$.win&&4!=f.readyState){var i=w("div");c+="SWFObjectNew",i.setAttribute("id",c),f.parentNode.insertBefore(i,f),f.style.display="none",function(){4==f.readyState?f.parentNode.removeChild(f):e(arguments.callee,10)}()}r(a,b,c)}}function p(a){if($.ie&&$.win&&4!=a.readyState){var b=w("div");a.parentNode.insertBefore(b,a),b.parentNode.replaceChild(q(a),b),a.style.display="none",function(){4==a.readyState?a.parentNode.removeChild(a):e(arguments.callee,10)}()}else a.parentNode.replaceChild(q(a),a)}function q(a){var b=w("div");if($.win&&$.ie)b.innerHTML=a.innerHTML;else{var c=a.getElementsByTagName(J)[0];if(c){var d=c.childNodes;if(d)for(var e=d.length,f=0;f<e;f++)1==d[f].nodeType&&"PARAM"==d[f].nodeName||8==d[f].nodeType||b.appendChild(d[f].cloneNode(!0))}}return b}function r(a,b,c){var d,e=v(c);if($.wk&&$.wk<312)return d;if(e)if(typeof a.id==I&&(a.id=c),$.ie&&$.win){var f="";for(var g in a)a[g]!=Object.prototype[g]&&("data"==g.toLowerCase()?b.movie=a[g]:"styleclass"==g.toLowerCase()?f+=' class="'+a[g]+'"':"classid"!=g.toLowerCase()&&(f+=" "+g+'="'+a[g]+'"'));var h="";for(var i in b)b[i]!=Object.prototype[i]&&(h+='<param name="'+i+'" value="'+b[i]+'" />');e.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+f+">"+h+"</object>",V[V.length]=a.id,d=v(a.id)}else{var j=w(J);j.setAttribute("type",M);for(var k in a)a[k]!=Object.prototype[k]&&("styleclass"==k.toLowerCase()?j.setAttribute("class",a[k]):"classid"!=k.toLowerCase()&&j.setAttribute(k,a[k]));for(var l in b)b[l]!=Object.prototype[l]&&"movie"!=l.toLowerCase()&&s(j,l,b[l]);e.parentNode.replaceChild(j,e),d=j}return d}function s(a,b,c){var d=w("param");d.setAttribute("name",b),d.setAttribute("value",c),a.appendChild(d)}function t(a){var b=v(a);b&&"OBJECT"==b.nodeName&&($.ie&&$.win?(b.style.display="none",function(){4==b.readyState?u(a):e(arguments.callee,10)}()):b.parentNode.removeChild(b))}function u(a){var b=v(a);if(b){for(var c in b)"function"==typeof b[c]&&(b[c]=null);b.parentNode.removeChild(b)}}function v(a){var b=null;try{b=Q.getElementById(a)}catch(c){}return b}function w(a){return Q.createElement(a)}function x(a,b,c){a.attachEvent(b,c),W[W.length]=[a,b,c]}function y(a){var b=$.pv,c=a.split(".");return c[0]=parseInt(c[0],10),c[1]=parseInt(c[1],10)||0,c[2]=parseInt(c[2],10)||0,b[0]>c[0]||b[0]==c[0]&&b[1]>c[1]||b[0]==c[0]&&b[1]==c[1]&&b[2]>=c[2]}function z(a,b,c,d){if(!$.ie||!$.mac){var e=Q.getElementsByTagName("head")[0];if(e){var f=c&&"string"==typeof c?c:"screen";if(d&&(G=null,H=null),!G||H!=f){var g=w("style");g.setAttribute("type","text/css"),g.setAttribute("media",f),G=e.appendChild(g),$.ie&&$.win&&typeof Q.styleSheets!=I&&Q.styleSheets.length>0&&(G=Q.styleSheets[Q.styleSheets.length-1]),H=f}$.ie&&$.win?G&&typeof G.addRule==J&&G.addRule(a,b):G&&typeof Q.createTextNode!=I&&G.appendChild(Q.createTextNode(a+" {"+b+"}"))}}}function A(a,b){if(Z){var c=b?"visible":"hidden";X&&v(a)?v(a).style.visibility=c:z("#"+a,"visibility:"+c)}}function B(a){var b=/[\\\"<>\.;]/,c=null!=b.exec(a);return c&&typeof g!=I?g(a):a}var C,D,E,F,G,H,I="undefined",J="object",K="Shockwave Flash",L="ShockwaveFlash.ShockwaveFlash",M="application/x-shockwave-flash",N="SWFObjectExprInst",O="onreadystatechange",P=a,Q=c,R=d,S=!1,T=[j],U=[],V=[],W=[],X=!1,Y=!1,Z=!0,$=function(){var a=typeof Q.getElementById!=I&&typeof Q.getElementsByTagName!=I&&typeof Q.createElement!=I,b=R.userAgent.toLowerCase(),c=R.platform.toLowerCase(),d=c?/win/.test(c):/win/.test(b),e=c?/mac/.test(c):/mac/.test(b),f=!!/webkit/.test(b)&&parseFloat(b.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),g=!1,h=[0,0,0],i=null;if(typeof R.plugins!=I&&typeof R.plugins[K]==J)i=R.plugins[K].description,!i||typeof R.mimeTypes!=I&&R.mimeTypes[M]&&!R.mimeTypes[M].enabledPlugin||(S=!0,g=!1,i=i.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),h[0]=parseInt(i.replace(/^(.*)\..*$/,"$1"),10),h[1]=parseInt(i.replace(/^.*\.(.*)\s.*$/,"$1"),10),h[2]=/[a-zA-Z]/.test(i)?parseInt(i.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof P.ActiveXObject!=I)try{var j=new ActiveXObject(L);j&&(i=j.GetVariable("$version"),i&&(g=!0,i=i.split(" ")[1].split(","),h=[parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10)]))}catch(k){}return{w3:a,pv:h,wk:f,ie:g,win:d,mac:e}}();(function(){$.w3&&((typeof Q.readyState!=I&&"complete"==Q.readyState||typeof Q.readyState==I&&(Q.getElementsByTagName("body")[0]||Q.body))&&f(),X||(typeof Q.addEventListener!=I&&Q.addEventListener("DOMContentLoaded",f,!1),$.ie&&$.win&&(Q.attachEvent(O,function(){"complete"==Q.readyState&&(Q.detachEvent(O,arguments.callee),f())}),P==top&&!function(){if(!X){try{Q.documentElement.doScroll("left")}catch(a){return void e(arguments.callee,0)}f()}}()),$.wk&&!function(){if(!X)return/loaded|complete/.test(Q.readyState)?void f():void e(arguments.callee,0)}(),i(f)))})(),function(){$.ie&&$.win&&a.attachEvent("onunload",function(){for(var a=W.length,c=0;c<a;c++)W[c][0].detachEvent(W[c][1],W[c][2]);for(var d=V.length,e=0;e<d;e++)t(V[e]);for(var f in $)$[f]=null;$=null;for(var g in b)b[g]=null;b=null})}();return{registerObject:function(a,b,c,d){if($.w3&&a&&b){var e={};e.id=a,e.swfVersion=b,e.expressInstall=c,e.callbackFn=d,U[U.length]=e,A(a,!1)}else d&&d({success:!1,id:a})},getObjectById:function(a){if($.w3)return m(a)},embedSWF:function(a,b,c,d,e,f,g,i,j,k){var l={success:!1,id:b};$.w3&&!($.wk&&$.wk<312)&&a&&b&&c&&d&&e?(A(b,!1),h(function(){c+="",d+="";var h={};if(j&&typeof j===J)for(var m in j)h[m]=j[m];h.data=a,h.width=c,h.height=d;var p={};if(i&&typeof i===J)for(var q in i)p[q]=i[q];if(g&&typeof g===J)for(var s in g)typeof p.flashvars!=I?p.flashvars+="&"+s+"="+g[s]:p.flashvars=s+"="+g[s];if(y(e)){var t=r(h,p,b);h.id==b&&A(b,!0),l.success=!0,l.ref=t}else{if(f&&n())return h.data=f,void o(h,p,b,k);A(b,!0)}k&&k(l)})):k&&k(l)},switchOffAutoHideShow:function(){Z=!1},ua:$,getFlashPlayerVersion:function(){return{major:$.pv[0],minor:$.pv[1],release:$.pv[2]}},hasFlashPlayerVersion:y,createSWF:function(a,b,c){return $.w3?r(a,b,c):void 0},showExpressInstall:function(a,b,c,d){$.w3&&n()&&o(a,b,c,d)},removeSWF:function(a){$.w3&&t(a)},createCSS:function(a,b,c,d){$.w3&&z(a,b,c,d)},addDomLoadEvent:h,addLoadEvent:i,getQueryParamValue:function(a){var b=Q.location.search||Q.location.hash;if(b){if(/\?/.test(b)&&(b=b.split("?")[1]),null==a)return B(b);for(var c=b.split("&"),d=0;d<c.length;d++)if(c[d].substring(0,c[d].indexOf("="))==a)return B(c[d].substring(c[d].indexOf("=")+1))}return""},expressInstallCallback:function(){if(Y){var a=v(N);a&&C&&(a.parentNode.replaceChild(C,a),D&&(A(D,!0),$.ie&&$.win&&(C.style.display="block")),E&&E(F)),Y=!1}}}}();return b}),m("atlas/tools/consts",[],function(){return{UINT32_MAX_VALUE:4294967295,HLS_MIME_TYPE:"application/vnd.apple.mpegURL",VERSION:"3.6.4"}}),m("atlas/tools/stringutils",[],function(){function a(a,b,c,d){var e,f="",g="";if((void 0===b||b)&&(f+="abcdefghijklmnopqrstuvwxyz"),c&&(f+="ABCDEFGHIJKLMNOPQRSTUVWXYZ"),d&&(f+="0123456789"),f.length)for(e=0;e<a;++e)g+=f.substr(i.floor(f.length*i.random()),1);return g}function b(a,b){for(var c="0";c.length<b;)c+=c;return(c+a).substr(-b,b)}function c(a,b){for(var c=0,e=0;e<a.length;++e)c=(1&c)<<31|c>>>1,c^=a.charCodeAt(e);return d(c,b)}function d(a,b){for(var c="",d=0;d<i.ceil(b/4);++d)c=(15&a).toString(16)+c,a>>>=4;return c}return{random:a,hash:c,leadingZero:b}}),m("atlas/atlas/components/flashproxy",["atlas/vendor/swfobject","atlas/atlas/facade","atlas/tools/consts","atlas/tools/logger","atlas/tools/stringutils","atlas/tools/env","atlas/atlas/eventtypes/apievents","atlas/atlas/eventtypes/componentevents","atlas/atlas/eventtypes/debugevents","atlas/atlas/eventtypes/controllerevents","atlas/atlas/internals"],function(b,d,e,f,i,j,k,l,m,n,o){function p(a,b){d.dispatch(a,u,b)}function q(){return"dev"===e.VERSION?"../bin/atlas.swf":(j.ssl?"https://ustreamssl-a.akamaihd.net":"http://cdn1.ustream.tv")+"/player/atlas/atlas-"+e.VERSION+".swf"}function r(e){function j(){z=q(v+C),z.ready=s,z.dispatch=w,n(),d.addListener("*",x),d.addListener(k.CLEANUP,y)}function n(){var a=c.createElement("div");a.id=C;var d=c.getElementById(e);d.appendChild(a);var f={url:t,width:"100%",height:"100%",minVersion:"11.0.0",params:{wmode:"opaque",allowfullscreen:!0,bgcolor:"#000000",allowscriptaccess:"always"},flashVars:{cpath:v+C}};b.embedSWF(f.url,C,f.width,f.height,f.minVersion,null,f.flashVars,f.params),o.player={type:"flash",id:C}}function q(b){var c=b.split("."),d=a;for(c.shift();c.length;)d[c[0]]||(d[c[0]]={}),d=d[c.shift()];return d}function r(b){var c=b.split("."),d=a;for(c.shift();c.length>1;)d=d[c.shift()];delete d[c.shift()]}function s(){A=c.getElementById(C),p(l.CREATE)}function w(a){d.dispatch(a.type,a.originId,a.data?JSON.parse(h(a.data)):null)}function x(a){a.type===m.LOG?f.log(a.data.source,a.data.line,a.data.data,a.data.level):0!==a.originId.indexOf("Flash:")&&A&&A.dispatch(a.type,a.originId,a.data?g(JSON.stringify(a.data)):null)}function y(){d.removeListener("*",x),d.removeListener(k.CLEANUP,y),A&&A.parentNode.removeChild(A),delete o.player,r(v+C),p(l.DESTROY)}var z,A,B,C="atlas."+i.random(3);return j(),B={name:u}}function s(){return j.swf[0]>=11&&!j.safari}var t,u="FlashProxy",v="window.ustream.",w=f.create(u);return w.info("FlashPlayer version: "+j.swf),t=q(),{create:r,name:u,isSupported:s()}}),m("atlas/atlas/eventtypes/videotaghandlerevents",[],function(){var a="videoTagHandler";return{BASE:a,PAUSE:a+".pause",PLAY:a+".play",SEEK:a+".seek"}}),m("atlas/atlas/components/videotag/mediasource/coldstart",["atlas/atlas/facade","atlas/atlas/eventtypes/apievents","atlas/atlas/eventtypes/componentevents","atlas/atlas/eventtypes/controllerevents","atlas/atlas/eventtypes/videotagproxyevents","atlas/atlas/eventtypes/videotaghandlerevents","atlas/tools/logger","atlas/tools/timerange"],function(a,b,c,d,e,f,g,h){function i(b,c){a.dispatch(b,k,c)}function j(){function d(){a.addListener(b.CLEANUP,j),a.addListener(b.SUSPEND,m),a.addListener(e.DURATION_CHANGE,o)}function j(){a.removeListener(b.CLEANUP,j),a.removeListener(b.SUSPEND,m),a.removeListener(b.WAKE,n),a.removeListener(e.DURATION_CHANGE,o),a.removeListener(e.PROGRESS,p),i(c.DESTROY)}function m(){a.removeListener(b.SUSPEND,m),a.removeListener(e.DURATION_CHANGE,o),a.removeListener(e.PROGRESS,p),a.addListener(b.WAKE,n)}function n(){a.removeListener(b.WAKE,n),a.addListener(b.SUSPEND,m),a.addListener(e.DURATION_CHANGE,o)}function o(b){r.debug("onDurationChange"),a.removeListener(e.DURATION_CHANGE,o),q(b)||a.addListener(e.PROGRESS,p)}function p(a){r.debug("onProgress"),q(a)}function q(b){a.validateNotificationData(b,["buffered"]);var c=h.remainingTotal(0,b.data.buffered,!0);return r.debug("checkBufferOnColdStart, remaining: "+c),c>l&&(r.info("buffer full, starting playback"),i(f.PAUSE),i(f.SEEK,{position:b.data.buffered[0].start}),i(f.PLAY),m(),!0)}var r=g.create(k);return d(),{name:"coldStart"}}var k="mseColdStart",l=500;return{create:j}}),m("atlas/atlas/components/videotag/mediasource/buffered",["atlas/atlas/facade","atlas/atlas/eventtypes/apievents","atlas/atlas/eventtypes/componentevents","atlas/atlas/eventtypes/controllerevents","atlas/atlas/eventtypes/videoplayerevents","atlas/atlas/eventtypes/videotagproxyevents","atlas/tools/timerange"],function(a,b,c,d,e,f,g){function h(b,c){a.dispatch(b,j,c)}function i(){function d(){a.addListener(f.TIME_UPDATE,k),a.addListener(f.PROGRESS,k),a.addListener(b.CLEANUP,i)}function i(){a.removeListener(f.TIME_UPDATE,k),a.removeListener(f.PROGRESS,k),a.removeListener(b.CLEANUP,i),h(c.DESTROY)}function k(b){a.validateNotificationData(b,["position","buffered"]);var c=g.remaining(b.data.position,b.data.buffered);!n&&c<l?(n=!0,h(e.BUFFER_EMPTY,{position:b.data.position})):n&&c>m&&(n=!1,h(e.BUFFER_FULL))}var l=100,m=500,n=!0;return d(),{name:j}}var j="mseBuffered";return{create:i}}),m("atlas/atlas/hacks",["atlas/tools/consts","atlas/tools/env"],function(a,b){return{FAKE_FIRST_SAMPLE_AS_IDR:!0,USE_INTERVAL_TO_DETECT_CONTENT_END:b.chrome,OFFSET_FRAGMENTS_TO_ZERO:!1,INFINITE_THRESHOLD_WHILE_PLAYING_LIVE:!0}}),m("atlas/atlas/components/videotag/mediasource/gaprecovery",["atlas/atlas/facade","atlas/atlas/eventtypes/apievents","atlas/atlas/eventtypes/componentevents","atlas/atlas/eventtypes/controllerevents","atlas/atlas/eventtypes/videotagproxyevents","atlas/atlas/eventtypes/videotaghandlerevents","atlas/tools/timerange","atlas/tools/logger","atlas/atlas/hacks"],function(a,b,c,d,f,g,h,j,k){function l(b,c){a.dispatch(b,n,c)}function m(){function d(){a.addListener(b.CLEANUP,m),a.addListener(f.PROGRESS,o)}function m(){a.removeListener(b.CLEANUP,m),a.removeListener(f.PROGRESS,o),a.removeListener(f.WAITING,r),l(c.DESTROY)}function o(b){a.validateNotificationData(b,["position","buffered"]);var c=h.current(b.data.position,b.data.buffered),d=h.next(b.data.position,b.data.buffered);v=d?d.start:null,!c&&d?(s.warn("gap detected"),r()):c&&d&&u!==c.end?(u=c.end,s.warn("gap detected at "+u+", in "+(u-b.data.position)+" ms")):null===u||d||(u=null,s.warn("gap cleared")),k.USE_INTERVAL_TO_DETECT_CONTENT_END&&(null!==u&&null!==v?p(b.data.position):q()),a.removeListener(f.WAITING,r),null!==u&&a.addListener(f.WAITING,r)}function p(a){null===t&&(t=e(r,i.max(0,u-a-66)))}function q(){clearInterval(t),t=null}function r(){a.removeListener(f.WAITING,r),k.USE_INTERVAL_TO_DETECT_CONTENT_END&&q(),l(g.PAUSE),l(g.SEEK,{position:v}),l(g.PLAY),s.warn("gap recovered at "+v),u=null,v=null}var s=j.create("gapRecovery"),t=null,u=null,v=null;return d(),{name:n}}var n="mseGapRecovery";return{create:m}}),m("atlas/atlas/components/videotag/mediasource/seek",["atlas/atlas/facade","atlas/atlas/eventtypes/apievents","atlas/atlas/eventtypes/componentevents","atlas/atlas/eventtypes/controllerevents","atlas/atlas/eventtypes/videoplayerevents","atlas/atlas/eventtypes/videotagproxyevents","atlas/atlas/eventtypes/videotaghandlerevents","atlas/tools/timerange","atlas/tools/logger"],function(a,b,c,d,e,f,g,h,j){function k(b,c){a.dispatch(b,m,c)}function l(){function d(){a.addListener(b.SEEK,o),a.addListener(f.TIME_UPDATE,n),a.addListener(b.CLEANUP,l)}function l(){a.removeListener(b.SEEK,o),a.removeListener(f.TIME_UPDATE,n),a.removeListener(f.PROGRESS,p),a.removeListener(b.CLEANUP,l),k(c.DESTROY)}function n(b){a.validateNotificationData(b,["position"]),k(e.POSITION,{position:b.data.position})}function o(b){a.validateNotificationData(b,["position"]),r=b.data.position,a.removeListener(f.TIME_UPDATE,n),a.removeListener(f.PROGRESS,p),a.addListener(f.PROGRESS,p),k(g.PAUSE)}function p(b){a.validateNotificationData(b,["buffered"]);var c=h.remainingTotal(r,b.data.buffered);if(c>=250){var d=i.max(b.data.buffered[0].start,r);q.debug("onVideoProgressAfterSeek seeking to "+d+", seekPosition: "+r),k(g.SEEK,{position:d}),k(g.PLAY),a.addListener(f.TIME_UPDATE,n),a.removeListener(f.PROGRESS,p),r=null}}var q=j.create(m),r=null;return d(),{name:m}}var m="mseSeek";return{create:l}}),m("atlas/atlas/components/videotag/direct/coldstart",["atlas/atlas/facade","atlas/atlas/eventtypes/apievents","atlas/atlas/eventtypes/controllerevents","atlas/atlas/eventtypes/videotagproxyevents","atlas/atlas/eventtypes/videotaghandlerevents"],function(a,b,c,d,e){function f(b,c){a.dispatch(b,h,c)}function g(){function c(){a.addListener(b.CLEANUP,g),a.addListener(d.CAN_PLAY,i),a.addListener(b.WAKE,j)}function g(){a.removeListener(b.CLEANUP,g),a.removeListener(d.CAN_PLAY,i),a.removeListener(b.WAKE,j)}function i(){f(e.PLAY),a.removeListener(d.CAN_PLAY,i)}function j(){a.removeListener(d.CAN_PLAY,i),a.addListener(d.CAN_PLAY,i)}return c(),{name:h}}var h="directColdStart";return{create:g}}),m("atlas/atlas/components/videotag/direct/position",["atlas/atlas/facade","atlas/atlas/eventtypes/apievents","atlas/atlas/eventtypes/componentevents","atlas/atlas/eventtypes/controllerevents","atlas/atlas/eventtypes/videoplayerevents","atlas/atlas/eventtypes/videotagproxyevents"],function(a,b,c,d,e,f){function g(b,c){a.dispatch(b,i,c)}function h(){function d(){a.addListener(f.TIME_UPDATE,j),a.addListener(b.CLEANUP,h)}function h(){a.removeListener(f.TIME_UPDATE,j),a.removeListener(b.CLEANUP,h),g(c.DESTROY)}function j(b){a.validateNotificationData(b,["position"]),g(e.POSITION,{position:b.data.position})}return d(),{name:i}}var i="directSeek";return{create:h}}),m("atlas/atlas/components/videotag/readystates",[],function(){return{HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4}}),m("atlas/atlas/components/videotag/direct/buffered",["atlas/atlas/facade","atlas/atlas/eventtypes/apievents","atlas/atlas/eventtypes/componentevents","atlas/atlas/eventtypes/controllerevents","atlas/atlas/eventtypes/videoplayerevents","atlas/atlas/eventtypes/videotagproxyevents","atlas/atlas/components/videotag/readystates"],function(a,b,c,d,e,f,g){function h(b,c){a.dispatch(b,j,c)}function i(){function d(){a.addListener(f.BASE+".*",k),a.addListener(b.CLEANUP,i)}function i(){a.removeListener(f.BASE+".*",k),a.removeListener(b.CLEANUP,i),h(c.DESTROY)}function k(b){a.validateNotificationData(b,["readyState"]),b.type===f.TIME_UPDATE&&(m=b.data.position),!l&&b.data.readyState<g.HAVE_CURRENT_DATA?(l=!0,h(e.BUFFER_EMPTY,{position:m})):l&&b.data.readyState>=g.HAVE_CURRENT_DATA&&(l=!1,h(e.BUFFER_FULL))}var l=!0,m=0;return d(),{name:j}}var j="directBuffered";return{create:i}}),m("atlas/atlas/components/videotag/direct/seek",["atlas/atlas/facade","atlas/atlas/eventtypes/apievents","atlas/atlas/eventtypes/componentevents","atlas/atlas/eventtypes/controllerevents","atlas/atlas/eventtypes/videotaghandlerevents"],function(a,b,c,d,e){function f(b,c){a.dispatch(b,h,c)}function g(){function d(){a.addListener(b.SEEK,i),a.addListener(b.CLEANUP,g)}function g(){a.removeListener(b.SEEK,i),a.removeListener(b.CLEANUP,g),f(c.DESTROY)}function i(b){a.validateNotificationData(b,["position"]),f(e.SEEK,{position:b.data.position})}return d(),{name:h}}var h="directSeek";return{create:g}}),m("atlas/atlas/components/videotagproxy",["atlas/atlas/facade","atlas/atlas/components/videotag/events","atlas/atlas/components/videotag/mediasource/coldstart","atlas/atlas/components/videotag/mediasource/buffered","atlas/atlas/components/videotag/mediasource/gaprecovery","atlas/atlas/components/videotag/mediasource/seek","atlas/atlas/components/videotag/direct/coldstart","atlas/atlas/components/videotag/direct/position","atlas/atlas/components/videotag/direct/buffered","atlas/atlas/components/videotag/direct/seek","atlas/atlas/eventtypes/apievents","atlas/atlas/eventtypes/componentevents","atlas/atlas/eventtypes/controllerevents","atlas/atlas/eventtypes/mseproxyevents","atlas/atlas/eventtypes/videoplayerevents","atlas/atlas/eventtypes/videotaghandlerevents","atlas/tools/logger","atlas/tools/timerange","atlas/tools/listenermanager","atlas/tools/stringutils","atlas/atlas/internals"],function(a,b,d,e,f,g,h,j,k,l,m,n,o,p,q,r,s,t,u,v,w){function x(b,c){a.dispatch(b,B,c)}function y(s){function y(){a.addListener(m.VOLUME,G),a.addListener(m.PAUSE,H),a.addListener(m.RESUME,J),a.addListener(o.FINISHED,I),a.addListener(m.CLEANUP,z),a.addListener(m.SUSPEND,E),a.addListener(o.STREAM_URL,O),a.addListener(p.SOURCE_OBJECT_URL,O),a.addListener(r.PLAY,K),a.addListener(r.PAUSE,L),a.addListener(r.SEEK,M),D(),A(),x(n.CREATE)}function z(){a.removeListener(m.VOLUME,G),a.removeListener(m.PAUSE,H),a.removeListener(m.RESUME,J),a.removeListener(o.FINISHED,I),a.removeListener(m.CLEANUP,z),a.removeListener(m.SUSPEND,E),a.removeListener(m.WAKE,F),a.removeListener(o.STREAM_URL,O),a.removeListener(p.SOURCE_OBJECT_URL,O),a.removeListener(o.STREAM_URL,P),a.removeListener(p.SOURCE_OBJECT_URL,P),a.removeListener(o.STREAM_URL,Q),a.removeListener(p.SOURCE_OBJECT_URL,Q),a.removeListener(r.PLAY,K),a.removeListener(r.PAUSE,L),a.removeListener(r.SEEK,M),a.unregisterComponent(W),V.destroy(),S.removeChild(T),S=null,T=null,W=null,delete w.player,x(n.DESTROY)}function A(){T=c.createElement("video"),T.style.width="100%",T.style.height="100%",T.id=X,T.onerror=R,V.setTarget(T),S=c.getElementById(s),S.appendChild(T),w.player={type:"html",id:X}}function D(){V=u.create();for(var a in b)b.hasOwnProperty(a)&&V.addListener(b[a],N)}function E(){a.removeListener(m.SUSPEND,E),a.removeListener(o.STREAM_URL,P),a.removeListener(p.SOURCE_OBJECT_URL,P),V.setTarget(null),T.onerror=null,T.src=U="",a.addListener(m.WAKE,F),a.addListener(o.STREAM_URL,Q),a.addListener(p.SOURCE_OBJECT_URL,Q)}function F(){a.removeListener(m.WAKE,F),a.removeListener(o.STREAM_URL,Q),a.removeListener(p.SOURCE_OBJECT_URL,Q),V.setTarget(T),T.onerror=R,T.src=U,a.addListener(m.SUSPEND,E),a.addListener(o.STREAM_URL,P),a.addListener(p.SOURCE_OBJECT_URL,P)}function G(b){a.validateNotificationData(b,["volume"]),T.volume=b.data.volume}function H(){C.info("pausing"),Y=!1,T.pause()}function I(){T.pause()}function J(){C.info("resuming"),Y=!0,T.play()}function K(){Y&&T.play()}function L(){T.pause()}function M(b){a.validateNotificationData(b,["position"]),T.currentTime=b.data.position/1e3}function N(a){var c=i.floor(1e3*T.currentTime),d=t.buffered(T.buffered);switch(x("videoTagProxyEvents."+a.type,{position:c,buffered:d,readyState:T.readyState,networkState:T.networkState}),a.type){case b.PROGRESS:x(q.BUFFERED,{bufferId:"player",ranges:d})}}function O(b){switch(a.validateNotificationData(b,["source"]),b.type){case o.STREAM_URL:a.registerComponent(h.create()),a.registerComponent(j.create()),a.registerComponent(k.create()),a.registerComponent(l.create());break;case p.SOURCE_OBJECT_URL:a.registerComponent(d.create()),a.registerComponent(e.create()),a.registerComponent(f.create()),a.registerComponent(g.create())}a.removeListener(o.STREAM_URL,O),a.removeListener(p.SOURCE_OBJECT_URL,O),a.addListener(o.STREAM_URL,P),a.addListener(p.SOURCE_OBJECT_URL,P),P(b)}function P(b){a.validateNotificationData(b,["source"]),T.src=U=b.data.source}function Q(b){a.validateNotificationData(b,["source"]),U=b.data.source}function R(a){var b={code:a.target.error.code};switch(a.target.error.code){case a.target.error.MEDIA_ERR_ABORTED:b.message="aborted";break;case a.target.error.MEDIA_ERR_NETWORK:b.message="network";
break;case a.target.error.MEDIA_ERR_DECODE:b.message="decode";break;case a.target.error.MEDIA_ERR_SRC_NOT_SUPPORTED:b.message="unsupported";break;default:b.message="unknown"}x(q.ERROR,b)}var S,T,U,V,W,X="atlas."+v.random(3),Y=!0;return y(),W={name:B}}function z(){return!!c.createElement("video").canPlayType}function A(a){return!!c.createElement("video").canPlayType(a)}var B="VideoTagProxy",C=s.create(B);return{create:y,isSupported:z(),isCompatible:A,name:B}}),m("atlas/atlas/capabilities",["atlas/tools/logger","atlas/atlas/components/mseproxy","atlas/atlas/components/flashproxy","atlas/atlas/components/videotagproxy","atlas/atlas/formats","atlas/tools/consts"],function(a,b,c,d,e,f){var g=a.create("capabilities"),h=[];return b.isSupported&&h.push(e.MP4_SEGMENTED),c.isSupported&&(h.push(e.FLV_SEGMENTED),h.push(e.FLV_MOVIE)),d.isSupported&&d.isCompatible(f.HLS_MIME_TYPE)&&h.push(e.HLS),g.info("capabilities : "+h.join(", ")),h}),m("atlas/atlas/validator",["atlas/atlas/formats","atlas/tools/logger"],function(a,b){function c(b){switch(b.format){case a.MP4_SEGMENTED:return d(b,f.mp4Segmented);case a.FLV_SEGMENTED:return d(b,f.flvSegmented);case a.FLV_MOVIE:return d(b,f.flvMovie);case a.HLS:return d(b,f.hls);default:return e.error("unrecognized data format: "+b.format),!1}}function d(a,b,c){c=c||"options";var f=!0;for(var g in b)if(b.hasOwnProperty(g)){var h="["===g.substr(0,1)&&"]"===g.substr(-1,1),i=g.substr(+h,g.length-2*h),j=b[g];if("string"==typeof b[g])h||a.hasOwnProperty(i)?a.hasOwnProperty(i)&&typeof a[i]!==j&&(e.error(c+" invalid type of "+i+": "+typeof a[i]+" needed: "+j),f=!1):(e.error(c+" missing property: "+i),f=!1);else if(typeof a[i]!=typeof b[g])e.error(c+" invalid type of "+i+": "+typeof a[i]+" needed: "+typeof b[g]),f=!1;else if(b[g].shift)for(var k=0;k<a[i].length;++k){var l=c+"."+i+"["+k+"]";f=d(a[i][k],b[g][0],l)&&f}}return f}var e=b.create("validator"),f={mp4Segmented:{baseUrl:"string","[contentStart]":"number","[contentLength]":"number",segmentId:"number",representations:[{contentType:"string",codecs:"string","[initUrl]":"string",segmentUrl:"string",segmentLength:"number"}],"[hashes]":"object"},flvSegmented:{baseUrl:"string","[contentStart]":"number","[contentLength]":"number",segmentId:"number",representations:[{contentType:"string",segmentUrl:"string",segmentLength:"number"}],"[hashes]":"object"},flvMovie:{url:"string",seekParameter:"string"},hls:{url:"string"}};return{validate:c}}),m("atlas/atlas/eventtypes/storagemanagerevents",[],function(){var a="StorageManager";return{BASE:a,SEGMENT_STORAGE_INSTANCE:a+".segmentStorageInstance",SEGMENT_STORAGE_REMOVED:a+".segmentStorageRemoved",SEGMENT_STORAGE_UPDATED:a+".segmentStorageUpdated"}}),m("atlas/atlas/eventtypes/metadownloaderevents",[],function(){var a="MetaDownloader";return{BASE:a,LOAD_INIT:a+".loadInit",LOAD_START:a+".loadStart",METADATA:a+".metadata",FAILED:a+".failed",DESTROY:a+".destroy"}});m("atlas/tools/bytearray",["atlas/tools/stringutils"],function(a){function b(a){function b(){return r.bytes[r.position++]}function d(){for(var a=0,c=0;c<2;++c)a=a<<8|b();return a}function e(){for(var a=0,c=0;c<3;++c)a=a<<8|b();return a}function f(){for(var a=0,c=0;c<4;++c)a=256*a+b();return a}function g(){for(var a=0,c=0;c<8;++c)a=256*a+b();return a}function h(a){a=a?a:0,r.bytes[r.position++]=255&a}function j(a){a=a?a:0,h(a>>>8&255),h(255&a)}function k(a){a=a?a:0,h(a>>>16&255),h(a>>>8&255),h(255&a)}function l(a){a=a?a:0,h(a>>>24&255),h(a>>>16&255),h(a>>>8&255),h(255&a)}function m(a){l(i.floor(a/i.pow(2,32))),l(i.floor(a%i.pow(2,32)))}function n(a){for(var b="",c=0;c<a;++c)b+=String.fromCharCode(r.bytes[r.position++]);return b}function o(a){for(var b=0;b<a.length;++b)r.bytes[r.position++]=a.charCodeAt(b)}function p(a){var b=c(r.bytes,r.position,a);return r.position+=a,b}function q(a){r.bytes.set(a,r.position),r.position+=a.length}var r;return a instanceof Uint8Array||(a=new Uint8Array(a)),r={bytes:a,position:0,readUnsignedByte:b,readUnsignedInt16:d,readUnsignedInt24:e,readUnsignedInt32:f,readUnsignedInt64:g,readString:n,readBytes:p,writeUnsignedByte:h,writeUnsignedInt16:j,writeUnsignedInt24:k,writeUnsignedInt32:l,writeUnsignedInt64:m,writeString:o,writeBytes:q}}function c(a,b,c){if("function"==typeof a.slice)return a.slice(b,b+c);for(var d=new Uint8Array(c),e=0;e<c;++e)d[e]=a[b+e];return d}function d(a){var c,d=0;for(c=0;c<a.length;++c)d+=a[c].length;var e=b(new Uint8Array(d));for(c=0;c<a.length;++c)e.writeBytes(a[c]);return e.bytes}function e(b,c,d){var e="";d=d||1,c=c||4;for(var f=0;f<b.length;++f)e+=a.leadingZero(b[f].toString(16),2),f<b.length-1&&(d>1&&(f+1)%(c*d)==0?e+="\n":(f+1)%c===0&&(e+=" "));return e}return{create:b,slice:c,concat:d,stringify:e}});m("atlas/mp4/boxes/container",["atlas/tools/bytearray"],function(a){function b(b){var c,d=a.create(b.bytes);for(d.position=b.fourCC?b.start+8:b.start,b.boxes=[];d.position<b.start+b.length;)c={},c.start=d.position,c.length=d.readUnsignedInt32(),c.fourCC=d.readString(4),c.bytes=b.bytes,b.boxes.push(c),d.position+=c.length-8}return{decorate:b}}),m("atlas/mp4/boxes/fragmenthashtable",["atlas/tools/bytearray","atlas/tools/stringutils"],function(a,b){function c(c){function d(){var d=a.create(c.bytes);d.position=c.start+8,c.hashes=[];for(var e,f=0;f<i.floor((c.length-8)/4);++f)e=d.readUnsignedInt32(),c.hashes.push(b.leadingZero(e.toString(16),8))}c.parseBytes=d,d()}return{decorate:c}}),m("atlas/mp4/boxes/fragmentmoviehash",["atlas/tools/bytearray","atlas/tools/stringutils"],function(a,b){function c(c){function d(){var d=a.create(c.bytes);d.position=c.start+8;var e=d.readUnsignedInt32();c.hash=b.leadingZero(e.toString(16),8)}c.parseBytes=d,d()}return{decorate:c}}),m("atlas/mp4/boxes/fragmentmovieinitdata",["atlas/tools/bytearray"],function(a){function b(b){function c(){var c=a.create(b.bytes);c.position=b.start+8,b.rawInit=c.readBytes(b.length-8)}b.parseBytes=c,c()}return{decorate:b}}),m("atlas/mp4/boxes/segmentindex",["atlas/tools/bytearray"],function(a){function b(b){var c,d,e=a.create(b.bytes);e.position=b.start+8,b.version=e.readUnsignedByte(),b.rawFlags=e.readUnsignedInt24(),b.referenceId=e.readUnsignedInt32(),b.timeScale=e.readUnsignedInt32(),b.version?(b.earliestPresentationTime=e.readUnsignedInt64(),b.firstOffset=e.readUnsignedInt64()):(b.earliestPresentationTime=e.readUnsignedInt32(),b.firstOffset=e.readUnsignedInt32()),e.readUnsignedInt16(),b.referenceCount=e.readUnsignedInt16(),b.references=[];for(var f=0;f<b.referenceCount;++f)c={},d=e.readUnsignedInt32(),c.referenceType=!!(2147483648&d),c.subsegmentSize=2147483647&d,c.subsegmentDuration=e.readUnsignedInt32(),d=e.readUnsignedInt32(),c.containsRAP=!!(2147483648&d),c.rapType=(1879048192&d)>>>28,c.rapDeltaTime=268435455&d,b.references.push(c)}return{decorate:b}}),m("atlas/mp4/boxes/segmenttype",["atlas/tools/bytearray"],function(a){function b(b){var c=a.create(b.bytes);for(c.position=b.start+8,b.majorBrand=c.readString(4),b.minorVersion=c.readUnsignedInt32(),b.compatibleBrands=[];c.position<b.start+b.length;)b.compatibleBrands.push(c.readString(4))}return{decorate:b}}),m("atlas/mp4/flags/trackfragmentrun",[],function(){function a(a){return{dataOffsetPresent:!!(1&a),firstSampleFlagsPresent:!!(4&a),sampleDurationsPresent:!!(256&a),sampleSizesPresent:!!(512&a),sampleFlagsPresent:!!(1024&a),sampleCompositionTimeOffsetsPresent:!!(2048&a)}}function b(a){var b=0;return b|=1*a.dataOffsetPresent,b|=4*a.firstSampleFlagsPresent,b|=256*a.sampleDurationsPresent,b|=512*a.sampleSizesPresent,b|=1024*a.sampleFlagsPresent,b|=2048*a.sampleCompositionTimeOffsetsPresent}return{parse:a,serialize:b}}),m("atlas/mp4/boxes/trackfragmentrun",["atlas/tools/bytearray","atlas/mp4/flags/trackfragmentrun"],function(a,b){function c(c){function d(){var d=a.create(c.bytes);d.position=c.start+8,c.version=d.readUnsignedByte(),c.flags=b.parse(d.readUnsignedInt24()),c.sampleCount=d.readUnsignedInt32(),c.flags.dataOffsetPresent&&(c.dataOffset=d.readUnsignedInt32()),c.flags.firstSampleFlagsPresent&&(c.firstSampleFlags=d.readUnsignedInt32()),c.samples=[];for(var e=0;e<c.sampleCount;++e){var f={};c.flags.sampleDurationsPresent&&(f.duration=d.readUnsignedInt32()),c.flags.sampleSizesPresent&&(f.size=d.readUnsignedInt32()),c.flags.sampleFlagsPresent&&(f.flags=d.readUnsignedInt32()),c.flags.sampleCompositionTimeOffsetsPresent&&(f.compositionTimeOffset=d.readUnsignedInt32()),c.samples.push(f)}}function e(){var d=16;c.flags=c.flags||{};var e=4*c.flags.dataOffsetPresent,f=4*c.flags.firstSampleFlagsPresent,g=4*(c.flags&&c.flags.sampleDurationsPresent)+4*(c.flags&&c.flags.sampleSizesPresent)+4*(c.flags&&c.flags.sampleFlagsPresent)+4*(c.flags&&c.flags.sampleCompositionTimeOffsetsPresent);c.length=d+e+f+c.sampleCount*g;var h=a.create(new Uint8Array(c.length));h.writeUnsignedInt32(c.length),h.writeString(c.fourCC),h.writeUnsignedByte(c.version),h.writeUnsignedInt24(b.serialize(c.flags)),h.writeUnsignedInt32(c.sampleCount),c.flags.dataOffsetPresent&&h.writeUnsignedInt32(c.dataOffset),c.flags.firstSampleFlagsPresent&&h.writeUnsignedInt32(c.firstSampleFlags);for(var i=0;i<c.sampleCount;++i)c.flags.sampleDurationsPresent&&h.writeUnsignedInt32(c.samples[i].duration),c.flags.sampleSizesPresent&&h.writeUnsignedInt32(c.samples[i].size),c.flags.sampleFlagsPresent&&h.writeUnsignedInt32(c.samples[i].flags),c.flags.sampleCompositionTimeOffsetsPresent&&h.writeUnsignedInt32(c.samples[i].compositionTimeOffset);c.bytes=h.bytes,c.start=0}c.parseBytes=d,c.writeBytes=e,d()}return{decorate:c}}),m("atlas/mp4/boxes/trackfragmentmediadecodetime",["atlas/tools/bytearray"],function(a){function b(b){function c(){var c=a.create(b.bytes);c.position=b.start+8,b.version=c.readUnsignedByte(),b.rawFlags=c.readUnsignedInt24(),b.version?b.baseMediaDecodeTime=c.readUnsignedInt64():b.baseMediaDecodeTime=c.readUnsignedInt32()}function d(){var c=12;b.length=c+(b.version?8:4);var d=a.create(new Uint8Array(b.length));d.writeUnsignedInt32(b.length),d.writeString(b.fourCC),d.writeUnsignedByte(b.version),d.writeUnsignedInt24(b.rawFlags),b.version?d.writeUnsignedInt64(b.baseMediaDecodeTime):d.writeUnsignedInt32(b.baseMediaDecodeTime),b.bytes=d.bytes,b.start=0}b.parseBytes=c,b.writeBytes=d,c()}return{decorate:b}}),m("atlas/mp4/flags/trackfragmentheader",[],function(){function a(a){return{baseDataOffsetPresent:!!(1&a),sampleDescriptionIndexPresent:!!(2&a),defaultSampleDurationPresent:!!(8&a),defaultSampleSizePresent:!!(16&a),defaultSampleFlagsPresent:!!(32&a)}}function b(a){var b=0;return b|=1*a.baseDataOffsetPresent,b|=2*a.sampleDescriptionIndexPresent,b|=8*a.defaultSampleDurationPresent,b|=16*a.defaultSampleSizePresent,b|=32*a.defaultSampleFlagsPresent}return{parse:a,serialize:b}}),m("atlas/mp4/boxes/trackfragmentheader",["atlas/tools/bytearray","atlas/mp4/flags/trackfragmentheader"],function(a,b){function c(c){function d(){var d=a.create(c.bytes);d.position=c.start+8,c.version=d.readUnsignedByte(),c.flags=b.parse(d.readUnsignedInt24()),c.trackId=d.readUnsignedInt32(),c.flags.baseDataOffsetPresent&&(c.baseDataOffset=d.readUnsignedInt64()),c.flags.sampleDescriptionIndexPresent&&(c.sampleDescriptionIndex=d.readUnsignedInt32()),c.flags.defaultSampleDurationPresent&&(c.defaultSampleDuration=d.readUnsignedInt32()),c.flags.defaultSampleSizePresent&&(c.defaultSampleSize=d.readUnsignedInt32()),c.flags.defaultSampleFlagsPresent&&(c.defaultSampleFlags=d.readUnsignedInt32())}function e(){var d=16;c.flags=c.flags||{},c.length=d,c.length+=8*c.flags.baseDataOffsetPresent,c.length+=4*c.flags.sampleDescriptionIndexPresent,c.length+=4*c.flags.defaultSampleDurationPresent,c.length+=4*c.flags.defaultSampleSizePresent,c.length+=4*c.flags.defaultSampleFlagsPresent;var e=a.create(new Uint8Array(c.length));e.writeUnsignedInt32(c.length),e.writeString(c.fourCC),e.writeUnsignedByte(c.version),e.writeUnsignedInt24(b.serialize(c.flags)),e.writeUnsignedInt32(c.trackId),c.flags.baseDataOffsetPresent&&e.writeUnsignedInt64(c.baseDataOffset),c.flags.sampleDescriptionIndexPresent&&e.writeUnsignedInt32(c.sampleDescriptionIndex),c.flags.defaultSampleDurationPresent&&e.writeUnsignedInt32(c.defaultSampleDuration),c.flags.defaultSampleSizePresent&&e.writeUnsignedInt32(c.defaultSampleSize),c.flags.defaultSampleFlagsPresent&&e.writeUnsignedInt32(c.defaultSampleFlags),c.bytes=e.bytes,c.start=0}c.parseBytes=d,c.writeBytes=e,d()}return{decorate:c}}),m("atlas/mp4/boxes/moviefragmentheader",["atlas/tools/bytearray"],function(a){function b(b){function c(){var c=a.create(b.bytes);c.position=b.start+8,b.version=c.readUnsignedByte(),b.rawFlags=c.readUnsignedInt24(),b.sequenceNumber=c.readUnsignedInt32()}function d(){b.length=16;var c=a.create(new Uint8Array(b.length));c.writeUnsignedInt32(b.length),c.writeString(b.fourCC),c.writeUnsignedByte(b.version),c.writeUnsignedInt24(b.rawFlags),c.writeUnsignedInt32(b.sequenceNumber),b.bytes=c.bytes,b.start=0}b.parseBytes=c,b.writeBytes=d,c()}return{decorate:b}}),m("atlas/mp4/mp4",["atlas/tools/bytearray","atlas/mp4/boxes/container","atlas/mp4/boxes/fragmenthashtable","atlas/mp4/boxes/fragmentmoviehash","atlas/mp4/boxes/fragmentmovieinitdata","atlas/mp4/boxes/segmentindex","atlas/mp4/boxes/segmenttype","atlas/mp4/boxes/trackfragmentrun","atlas/mp4/boxes/trackfragmentmediadecodetime","atlas/mp4/boxes/trackfragmentheader","atlas/mp4/boxes/moviefragmentheader","atlas/tools/logger"],function(a,b,c,d,e,f,g,h,i,j,k,l){function m(a){var b={bytes:a,start:0,length:a.length};return o(b),b}function n(b){var c=a.create(new Uint8Array(p(b)));return q(c,b),c.bytes}function o(a){var c=a.fourCC?r[a.fourCC]:b;if(c&&(c.decorate(a),a.boxes)){for(var d=0;d<a.boxes.length;++d)o(a.boxes[d]);a.boxes.length&&(delete a.bytes,delete a.start,delete a.length)}}function p(a){if(a.bytes)return a.length;if(a.boxes){for(var b=a.fourCC?8:0,c=0;c<a.boxes.length;++c)b+=p(a.boxes[c]);return b}return 0}function q(b,c){if(c.bytes)b.writeBytes(a.slice(c.bytes,c.start,c.length));else if(c.boxes){c.fourCC&&(b.writeUnsignedInt32(p(c)),b.writeString(c.fourCC));for(var d=0;d<c.boxes.length;++d)q(b,c.boxes[d])}else s.error("error writing "+c.fourCC+", no bytes/boxes")}var r={fmov:b,free:b,mdia:b,minf:b,moof:b,moov:b,mvex:b,stbl:b,traf:b,trak:b,ustm:b,fhst:c,hash:d,idta:e,sidx:f,styp:g,trun:h,tfdt:i,tfhd:j,mfhd:k},s=l.create("MP4Parser");return{parse:m,serialize:n}}),m("atlas/mp4/common/timescaler",[],function(){function a(a,b){return a/b}function b(b,c){return i.floor(1e3*a(b,c))}return{seconds:a,milliseconds:b}}),m("atlas/mp4/common/boxtools",[],function(){function a(a,c){for(var d=c.split(".");a&&d.length;)a=b(a,d.shift());return a}function b(a,b){for(var c=0;c<a.boxes.length;++c)if(a.boxes[c].fourCC===b)return a.boxes[c];return null}return{getBoxByPath:a,getBoxByFourCC:b}}),m("atlas/atlas/components/download/bmdtoffsetter",[],function(){function a(a){void 0===b&&(b=a.baseMediaDecodeTime),a.baseMediaDecodeTime-=b,a.writeBytes()}var b;return{offset:a}}),m("atlas/atlas/components/download/fragmentextractor",["atlas/mp4/mp4","atlas/mp4/common/timescaler","atlas/mp4/common/boxtools","atlas/atlas/components/download/bmdtoffsetter","atlas/atlas/hacks"],function(a,b,c,d,e){function f(a,b){for(var d,e,f,k=c.getBoxByFourCC(b,"sidx"),l=[],m=[],n=h(a,b),o=0;o<b.boxes.length;++o)e=b.boxes[o],j.indexOf(e.fourCC)!==-1&&(m.push(e),j.indexOf(e.fourCC)===j.length-1&&(f=n[i.min(l.length,n.length-1)],d=g(m,k.references[l.length],k.timeScale,f),l.push(d),m=[]));return l}function g(f,g,h,i){var j=c.getBoxByPath({boxes:f},"moof.traf.tfdt"),k=c.getBoxByPath({boxes:f},"moof.traf.trun");e.OFFSET_FRAGMENTS_TO_ZERO&&d.offset(j);var l=b.milliseconds(j.baseMediaDecodeTime,h),m=b.milliseconds(g.subsegmentDuration,h);return{start:l,duration:m,end:l+m,bytes:a.serialize({boxes:f}),containsRAP:!!g.containsRAP,rapType:g.rapType,rapDeltaTime:g.rapDeltaTime,sampleCount:k.samples.length,hash:i}}function h(a,b){var d=[a],e=c.getBoxByPath(b,"free.ustm.fhst");return e&&(d=e.hashes),d}var j=["moof","mdat"];return{process:f}}),m("atlas/atlas/components/download/configextractor",["atlas/atlas/eventtypes/segmentdownloaderevents","atlas/atlas/facade","atlas/mp4/mp4","atlas/mp4/common/boxtools"],function(a,b,c,d){function e(a,c){b.dispatch(a,i,c)}function f(b,c,d){e(a.CONFIG,{config:b,hash:c,streamId:d})}function g(a,b){for(var c,e,g=0;b&&g<b.boxes.length;++g)"fmov"===b.boxes[g].fourCC&&(c=d.getBoxByFourCC(b.boxes[g],"hash"),e=d.getBoxByFourCC(b.boxes[g],"idta"),f(e.rawInit,c.hash,a))}function h(a,b){d.getBoxByFourCC(b,"moov")?f(c.serialize(d.getBoxByFourCC(b,"moov")),a,a):g(a,d.getBoxByPath(b,"free.ustm"))}var i="ConfigExtractor";return{process:h}}),m("atlas/atlas/components/storage/segment",["atlas/tools/consts"],function(a){function b(b,c,d){function e(){for(var a=0;d&&a<d.length;++a)(d[a].containsRAP||"audio"===c.split(":")[0])&&o.push(d[a].start),p+=d[a].bytes.length;d&&d.length&&(q=d[0].start,r=d[d.length-1].start+d[d.length-1].duration,s=r-q)}function f(){return d&&d.length&&n<d.length}function g(){return!!f()&&d[n].containsRAP}function h(){return f()?d[n].start:a.UINT32_MAX_VALUE}function i(){var a=f()?d[n++]:void 0;return l(),a}function j(a){k();for(var b=0;d&&b<d.length;++b)if(d[b].containsRAP){if(!(d[b].start<=a))break;n=b}l()}function k(){n=0,l()}function l(){m.hasNextFragment=f(),m.nextFragmentContainsRAP=g(),m.nextFragmentStartTime=h()}var m,n=0,o=[],p=0,q=a.UINT32_MAX_VALUE,r=a.UINT32_MAX_VALUE,s=0;return e(),m={getNextFragment:i,setTimePosition:j,reset:k,segmentId:b,streamId:c,fragments:d,size:p,keyFrames:o,firstTimestamp:q,lastTimestamp:r,duration:s},l(),m}return{create:b}}),m("atlas/atlas/components/download/segmentwrapper",["atlas/atlas/components/download/fragmentextractor","atlas/atlas/components/download/configextractor","atlas/atlas/components/storage/segment","atlas/atlas/eventtypes/segmentdownloaderevents","atlas/atlas/facade","atlas/mp4/mp4","atlas/mp4/common/boxtools"],function(a,b,c,d,e,f,g){function h(a,b){e.dispatch(a,k,b)}function i(a){var b=!1,c=g.getBoxByFourCC(a,"styp");return c&&(b=c.compatibleBrands.indexOf("lmsg")!==-1),b}function j(e,j,k){var l,m,n=f.parse(k);b.process(j,n),g.getBoxByFourCC(n,"styp")&&(l=a.process(j,n),m=c.create(e,j,l),h(d.SEGMENT,{segment:m,streamId:j,segmentId:e,firstTimestamp:m.firstTimestamp,lastTimestamp:m.lastTimestamp,duration:m.duration,keyFrames:m.keyFrames,lastSegment:i(n)}))}var k="Segmenter";return{process:j}}),m("atlas/atlas/components/download/mp4segmentdownloader",["atlas/atlas/facade","atlas/atlas/eventtypes/apievents","atlas/atlas/eventtypes/segmentdownloaderevents","atlas/atlas/components/download/segmentwrapper","atlas/tools/stringutils","atlas/tools/logger"],function(a,b,c,d,e,f){function g(g,h,i){function k(){a.addListener(b.CLEANUP,q),r=new XMLHttpRequest,r.open("GET",i,!0),r.responseType="arraybuffer",r.send(),r.onprogress=n,r.onload=o,r.onerror=p,m(c.LOAD_INIT,{streamId:g,segmentId:h,url:i})}function l(){r&&(r.onload=null,r.onerror=null,r.onprogress=null,r=null),a.removeListener(b.CLEANUP,q),m(c.DESTROY,{loaderId:t})}function m(b,c){a.dispatch(b,"SegmentDownloader."+t,c)}function n(){200===r.status&&m(c.LOAD_START,{streamId:g,segmentId:h,url:i}),r.onprogress=null}function o(){var a,b=new j;200===r.status?(a=new Uint8Array(r.response),d.process(h,g,a),m(c.LOAD_COMPLETE,{url:i,time:b-v,size:a.length,streamId:g,segmentId:h}),l()):p()}function p(){u.error("XHR error "+i),m(c.FAILED,{streamId:g,segmentId:h,url:i,status:r.status}),l()}function q(){l()}var r,s,t=e.random(5),u=f.create("SegmentDownloader."+t),v=new j;return k(),s={loaderId:t,url:i}}return{create:g}}),m("atlas/atlas/components/downloadmanager",["atlas/atlas/facade","atlas/atlas/eventtypes/apievents","atlas/atlas/eventtypes/componentevents","atlas/atlas/eventtypes/controllerevents","atlas/atlas/eventtypes/segmentdownloaderevents","atlas/atlas/components/download/mp4segmentdownloader"],function(a,b,c,d,e,f){function g(b,c){a.dispatch(b,i,c)}function h(){function h(){a.addListener(d.LOAD_SEGMENT,k),a.addListener(b.CLEANUP,j),a.addListener(b.SUSPEND,n),a.addListener(e.DESTROY,l),g(c.CREATE)}function j(){a.removeListener(d.LOAD_SEGMENT,k),a.removeListener(b.CLEANUP,j),a.removeListener(b.SUSPEND,n),a.removeListener(b.WAKE,o),a.removeListener(e.DESTROY,l),q=null,g(c.DESTROY)}function k(b){a.validateNotificationData(b,["segmentId","streamId","url"]),m(b.data.url)||q.push(f.create(b.data.streamId,b.data.segmentId,b.data.url))}function l(b){a.validateNotificationData(b,["loaderId"]);for(var c=0;c<q.length;++c)q[c].loaderId===b.data.loaderId&&q.splice(c--,1)}function m(a){for(var b=0;b<q.length;++b)if(q[b].url===a)return!0;return!1}function n(){a.removeListener(b.SUSPEND,n),a.removeListener(d.LOAD_SEGMENT,k),a.addListener(b.WAKE,o)}function o(){a.removeListener(b.WAKE,o),a.addListener(d.LOAD_SEGMENT,k),a.addListener(b.SUSPEND,n)}var p,q=[];return h(),p={name:i}}var i="DownloadManager";return{create:h,name:i}}),m("atlas/mp4/flags/sample",[],function(){function a(a){return{sampleDegradationPriority:65535&a,sampleIsDifferenceSample:!!(a>>>16&1),samplePaddingValue:a>>>17&7,sampleHasRedundancy:a>>>20&3,sampleIsDependedOn:a>>>22&3,sampleDependsOn:a>>>24&3,reserved:a>>>26&63}}function b(a){var b=0;return b|=65535&a.sampleDegradationPriority,b|=+a.sampleIsDifferenceSample<<16,b|=(7&a.samplePaddingValue)<<17,b|=(3&a.sampleHasRedundancy)<<20,b|=(3&a.sampleIsDependedOn)<<22,b|=(3&a.sampleDependsOn)<<24,b|=(63&a.reserved)<<26}return{parse:a,serialize:b}}),m("atlas/atlas/components/media/fragmentmutator",["atlas/mp4/mp4","atlas/mp4/common/timescaler","atlas/mp4/common/boxtools","atlas/mp4/flags/sample","atlas/tools/bytearray"],function(a,b,c,d,e){function f(b){var d=k(b),e=d.shift(),f=c.getBoxByPath(e,"moof.traf.trun"),i=c.getBoxByPath(e,"moof.traf.tfdt"),j=f.length;h(f,i,d);for(var l=0,m=0;m<f.sampleCount;++m)l+=f.samples[m].size;f.writeBytes(),f.dataOffset+=f.length-j,f.writeBytes();var n=c.getBoxByFourCC(e,"mdat");return n.bytes=g([e].concat(d)),n.start=0,n.length=n.bytes.length,a.serialize(e)}function g(a){var b,d,f,g=8;for(b=0;b<a.length;++b)g+=c.getBoxByFourCC(a[b],"mdat").length-8;f=e.create(new Uint8Array(g)),f.writeUnsignedInt32(g),f.writeString("mdat");var h=[];for(b=0;b<a.length;++b){d=c.getBoxByFourCC(a[b],"mdat");var i=e.slice(d.bytes,d.start+8,d.length-8);h.push(i),f.writeBytes(i)}return f.bytes}function h(a,b,c){for(var d,e=j(c,"moof.traf.trun"),f=j(c,"moof.traf.tfdt"),g=0;g<e.length;++g)d=i(a,b),a.samples[a.sampleCount-1].duration+=f[g].baseMediaDecodeTime-d,a.samples=a.samples.concat(e[g].samples),a.sampleCount=a.samples.length}function i(a,b){for(var c=b.baseMediaDecodeTime,d=0;d<a.sampleCount;++d)c+=a.samples[d].duration;return c}function j(a,b){for(var d=[],e=0;e<a.length;++e)d.push(c.getBoxByPath(a[e],b));return d}function k(b){for(var c=[],d=0;d<b.length;++d)c.push(a.parse(b[d]));return c}function l(b){var d=a.parse(b),e=c.getBoxByPath({boxes:d.boxes},"moof.traf.trun"),f=m(e);return f.sampleIsDifferenceSample&&(f.sampleIsDifferenceSample=!1,f.sampleDependsOn=2,n(e,f)),b=a.serialize(d)}function m(a){return a.flags.sampleFlagsPresent?d.parse(a.samples[0].flags):a.flags.firstSampleFlagsPresent?d.parse(a.firstSampleFlags):null}function n(a,b){a.flags.sampleFlagsPresent?a.samples[0].flags=d.serialize(b):a.flags.firstSampleFlagsPresent&&(a.firstSampleFlags=d.serialize(b)),a.writeBytes()}return{mergeFragments:f,setFirstSampleAsRAP:l}}),m("atlas/atlas/components/media/buffer",["atlas/atlas/facade","atlas/atlas/components/media/fragmentmutator","atlas/atlas/eventtypes/apievents","atlas/atlas/eventtypes/storagemanagerevents","atlas/atlas/eventtypes/bufferevents","atlas/atlas/eventtypes/buffermanagerevents","atlas/atlas/eventtypes/controllerevents","atlas/atlas/eventtypes/videoplayerevents","atlas/tools/logger","atlas/atlas/hacks"],function(a,b,c,d,e,f,g,h,i,j){function k(k,n,o){function p(){a.addListener(d.SEGMENT_STORAGE_INSTANCE,t),a.addListener(c.SEEK,u),a.addListener(g.SWITCH_STREAM,v),a.addListener(f.APPEND_TO_BUFFER,x),a.addListener(f.BUFFER_REMOVED,w),a.addListener(h.POSITION,B),s(n)}function q(){a.removeListener(d.SEGMENT_STORAGE_INSTANCE,t),a.removeListener(c.SEEK,u),a.removeListener(g.SWITCH_STREAM,v),a.removeListener(f.APPEND_TO_BUFFER,x),a.removeListener(f.BUFFER_REMOVED,w),a.removeListener(h.POSITION,B),E=null,F=null}function r(b,c){a.dispatch(b,"Buffer",c)}function s(a){r(e.REQUEST_STORAGE,{streamId:a})}function t(b){a.validateNotificationData(b,["streamId","segmentStorage"]),b.data.streamId===n&&(E=b.data.segmentStorage),b.data.streamId===H&&(F=b.data.segmentStorage)}function u(b){a.validateNotificationData(b,["position"]),E&&(E.setTimePosition(b.data.position),C())}function v(b){a.validateNotificationData(b,["bufferId","streamId","position"]),b.data.bufferId===k&&(J.debug("onControllerSwitchStream",b.data),G=b.data.position,H=b.data.streamId,s(b.data.streamId))}function w(b){a.validateNotificationData(b,["bufferId"]),b.data.bufferId===k&&q()}function x(b){if(a.validateNotificationData(b,["bufferId"]),b.data.bufferId===k){var c;for(E.hasNextFragment&&E.nextFragmentStartTime>=G&&(n=H,H=void 0,E=F,F=void 0,G=void 0,J.info("switching stream"),J.debug("switching to "+n+", has next fragment: "+E.hasNextFragment),r(e.STREAM_SWITCH,{bufferId:k,streamId:n}));E&&E.hasNextFragment&&!c;)c=E.getNextFragment(),K&&!c.containsRAP?c=null:K=!1;c&&(y(c),z(c))}}function y(a){I!==a.hash&&E.configs[a.hash]&&(J.info("appending config for "+a.hash+" at "+a.start+" from "+E.streamId),r(e.APPEND,{bufferId:k,bytes:E.configs[a.hash]}),I=a.hash)}function z(a){var c=a.bytes,d={start:a.start,end:a.end};"video"===o.substr(0,5)&&j.FAKE_FIRST_SAMPLE_AS_IDR&&(a.containsRAP?E.hasNextFragment&&!E.nextFragmentContainsRAP&&(c=A(d,c)):c=b.setFirstSampleAsRAP(c)),M.push(d),r(e.APPEND,{bufferId:k,bytes:c})}function A(a,c){for(var d,e=[];E.hasNextFragment&&!E.nextFragmentContainsRAP;)d=E.getNextFragment(),a.end=d.end,e.push(d.bytes);return b.mergeFragments([c].concat(e))}function B(b){if(a.validateNotificationData(b,["position"]),M.length&&b.data.position-l>M[0].start){for(var c=M.shift(),d=b.data.position-m;M.length&&M[0].end<d;)c.end=M.shift().end;J.debug("removing range from sourceBuffer "+c.start+">"+c.end),r(e.REMOVE,{bufferId:k,start:c.start,end:c.end})}}function C(){M=[],r(e.PURGE,{bufferId:k})}function D(){L.bufferId=k,L.contentType=o}var E,F,G,H,I,J=i.create("Buffer."+k),K=!0,L={},M=[];return p(),D(),L}var l=3e4,m=5e3;return{create:k}}),m("atlas/atlas/components/buffermanager",["atlas/atlas/facade","atlas/atlas/eventtypes/apievents","atlas/atlas/eventtypes/bufferevents","atlas/atlas/eventtypes/buffermanagerevents","atlas/atlas/eventtypes/componentevents","atlas/atlas/eventtypes/controllerevents","atlas/atlas/eventtypes/mseproxyevents","atlas/atlas/eventtypes/videoplayerevents","atlas/atlas/eventtypes/storagemanagerevents","atlas/atlas/components/media/buffer","atlas/tools/timerange","atlas/tools/stringutils","atlas/tools/logger"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(b,c){a.dispatch(b,p,c)}function o(){function m(){r.debug("create"),a.addListener(g.SOURCE_OPEN,s),a.addListener(g.SOURCE_CLOSE,t),a.addListener(f.ADD_BUFFER,u),a.addListener(f.REMOVE_BUFFER,y),a.addListener(b.CLEANUP,o),a.addListener(c.BUFFER_UPDATING,z),a.addListener(c.BUFFER_UPDATED,A),a.addListener(h.POSITION,B),a.addListener(b.SEEK,B),a.addListener(i.SEGMENT_STORAGE_UPDATED,C),a.addListener(g.SOURCE_BUFFER_ADDED,C),n(e.CREATE)}function o(){a.removeListener(g.SOURCE_OPEN,s),a.removeListener(g.SOURCE_CLOSE,t),a.removeListener(f.ADD_BUFFER,u),a.removeListener(f.REMOVE_BUFFER,y),a.removeListener(b.CLEANUP,o),a.removeListener(c.BUFFER_UPDATING,z),a.removeListener(c.BUFFER_UPDATED,A),a.removeListener(h.POSITION,B),a.removeListener(b.SEEK,B),a.removeListener(i.SEGMENT_STORAGE_UPDATED,C),a.removeListener(g.SOURCE_BUFFER_ADDED,C),x(),H=null,F=null,K=null,I=null,J=null,n(e.DESTROY)}function s(){for(G=!0;F.length;){var a=F.shift();v(a.streamId,a.contentType)}E=setInterval(C,1e3)}function t(){G=!1,x(),clearInterval(E)}function u(b){a.validateNotificationData(b,["streamId","contentType"]),G?v(b.data.streamId,b.data.contentType):F.push({streamId:b.data.streamId,contentType:b.data.contentType})}function v(a,b){var c=b.split("/")[0]+"."+l.random(3);H[c]=j.create(c,a,b),I[c]=[],n(d.BUFFER_ADDED,{streamId:a,bufferId:c,contentType:b})}function w(a){H.hasOwnProperty(a)&&(delete H[a],delete I[a],delete J[a],n(d.BUFFER_REMOVED,{bufferId:a}))}function x(){for(var a in H)H.hasOwnProperty(a)&&w(a)}function y(b){a.validateNotificationData(b,["bufferId"]),w(b.data.bufferId)}function z(b){a.validateNotificationData(b,["bufferId"]),J[b.data.bufferId]=!0}function A(b){a.validateNotificationData(b,["bufferId","ranges"]),J[b.data.bufferId]=!1,I[b.data.bufferId]=b.data.ranges,C()}function B(b){a.validateNotificationData(b,["position"]),K=b.data.position,C()}function C(){var a,b,c,e=1/0,f=[];for(var g in I)I.hasOwnProperty(g)&&(f.push(I[g]),b=k.remainingTotal(K,I[g]),b<e&&!J[g]&&(c=g,e=b));var h=k.intersect.apply(null,f);a=k.remainingTotal(K,h),c&&a<q&&n(d.APPEND_TO_BUFFER,{bufferId:c})}var D,E,F=[],G=!1,H={},I={},J={},K=0;return m(),D={name:p}}var p="BufferManager",q=5e3,r=m.create(p);return{create:o,name:p}}),m("atlas/atlas/eventtypes/garbagecollectorevents",[],function(){var a="GarbageCollector";return{BASE:a,DISCARD_SEGMENT_STORAGE:a+".discardSegmentStorage",DISCARD_START_SEGMENT:a+".discardStartSegment",DISCARD_END_SEGMENT:a+".discardEndSegment"}}),m("atlas/atlas/components/storage/segmentbundle",["atlas/atlas/facade","atlas/tools/consts","atlas/tools/logger","atlas/atlas/eventtypes/segmentstorageevents"],function(a,b,c,d){function e(){function e(b,c){a.dispatch(b,"SegmentBundle",c)}function f(){for(var a=0,b=0;b<D.length;++b)a+=D[b].size;return a}function g(){return E<D.length?D[E]:null}function h(){return E<D.length-1}function i(){return E<D.length-1&&E++,g()&&g().reset(),A(),g()}function j(){if(!g())return!1;for(;!g().hasNextFragment&&h();)i();return g().hasNextFragment}function k(){return!!j()&&g().nextFragmentContainsRAP}function l(){return j()?g().nextFragmentStartTime:b.UINT32_MAX_VALUE}function m(){var a=j()?g().getNextFragment():null;return A(),a}function n(a){D=D.concat(a),A()}function o(a){D=a.concat(D),E+=D.length,A()}function p(a){D.push(a),A()}function q(a){D.unshift(a),E++,A()}function r(){var a=D.shift();E--,A(),t(a)}function s(){var a=D.pop();A(),t(a)}function t(a){e(d.SEGMENT_REMOVED,{streamId:a.streamId,segmentId:a.segmentId,start:a.firstTimestamp,end:a.lastTimestamp})}function u(a){C.debug("setTimePosition "+a),E=b.UINT32_MAX_VALUE;for(var c=0;c<D.length&&D[c].firstTimestamp<=a;++c)E=c;if(g()){for(;!v(a)&&E>0;)E--;g().setTimePosition(a)}A()}function v(a){return g().keyFrames.length&&g().keyFrames[0]<=a}function w(a){for(var c=b.UINT32_MAX_VALUE,d=E;c===b.UINT32_MAX_VALUE&&d<D.length;)c=x(D[d],a),d++;return c}function x(a,c){for(var d=0;d<a.keyFrames.length;++d)if(a.keyFrames[d]>=c)return a.keyFrames[d];return b.UINT32_MAX_VALUE}function y(){for(var a=0;a<D.length;){if(D[a].firstTimestamp!==b.UINT32_MAX_VALUE)return D[a].firstTimestamp;a++}return 0}function z(){for(var a=D.length-1;a>=0;){if(D[a].lastTimestamp!==b.UINT32_MAX_VALUE)return D[a].lastTimestamp;a--}return 0}function A(){B.start=D&&D.length?y():0,B.end=D&&D.length?z():0,B.firstId=D&&D.length?D[0].segmentId:-1,B.lastId=D&&D.length?D[D.length-1].segmentId:-1,B.size=f(),B.segments=D,B.hasNextFragment=j(),B.nextFragmentContainsRAP=k(),B.nextFragmentStartTime=l(),B.activeSegment=g()}var B,C=c.create("SegmentBundle"),D=[],E=0;return B={getNextFragment:m,appendSegment:p,prependSegment:q,appendSegments:n,prependSegments:o,removeSegmentFromBeginning:r,removeSegmentFromEnd:s,setTimePosition:u,getNextKeyFrameTimestamp:w},A(),B}return{create:e}}),m("atlas/atlas/components/storage/segmentstorage",["atlas/atlas/facade","atlas/tools/logger","atlas/tools/stringutils","atlas/tools/consts","atlas/atlas/eventtypes/apievents","atlas/atlas/eventtypes/segmentdownloaderevents","atlas/atlas/eventtypes/controllerevents","atlas/atlas/eventtypes/storagemanagerevents","atlas/atlas/eventtypes/segmentstorageevents","atlas/atlas/eventtypes/garbagecollectorevents","atlas/atlas/components/storage/segmentbundle"],function(a,b,c,d,e,f,g,h,i,j,k){
function l(l){function m(){S.debug("construct "+l),a.addListener(e.CLEANUP,n),a.addListener(f.CONFIG,p),a.addListener(f.SEGMENT,q),a.addListener(j.DISCARD_START_SEGMENT,K),a.addListener(j.DISCARD_END_SEGMENT,K),a.addListener(g.REQUEST_KEYFRAME_POSITION,r),a.addListener(g.CANCEL_STREAM_SWITCH,s)}function n(){a.removeListener(e.CLEANUP,n),a.removeListener(f.CONFIG,p),a.removeListener(f.SEGMENT,q),a.removeListener(j.DISCARD_START_SEGMENT,K),a.removeListener(j.DISCARD_END_SEGMENT,K),a.removeListener(g.REQUEST_KEYFRAME_POSITION,r),a.removeListener(g.CANCEL_STREAM_SWITCH,s)}function o(b,c){a.dispatch(b,"SegmentStorage."+l+"."+R,c)}function p(b){a.validateNotificationData(b,["streamId","config","hash"]),b.data.streamId===l&&(T[b.data.hash]=b.data.config,L())}function q(b){a.validateNotificationData(b,["streamId","segment"]),b.data.streamId===l&&b.data.segment.duration&&(v(b.data.segment),null!==W&&M(W),L(),C())}function r(b){a.validateNotificationData(b,["streamId","after"]),b.data.streamId===l&&(u(b.data.after)||(Q=b.data.after,a.addListener(h.SEGMENT_STORAGE_UPDATED,t)))}function s(b){a.validateNotificationData(b,["streamId"]),b.data.streamId===l&&Q&&a.removeListener(h.SEGMENT_STORAGE_UPDATED,t)}function t(b){a.validateNotificationData(b,["streamId"]),b.data.streamId===l&&u(Q)&&(Q=void 0,a.removeListener(h.SEGMENT_STORAGE_UPDATED,t))}function u(a){if(F()){var b=F().getNextKeyFrameTimestamp(a);if(b!==d.UINT32_MAX_VALUE)return o(i.KEYFRAME_POSITION,{position:b,streamId:l}),!0}return!1}function v(a){for(var b=0;b<U.length;++b){if(w(U[b],a))return U[b].prependSegment(a),void A();if(x(U[b],a))return U[b].appendSegment(a),void A();if(y(U[b],a))return void S.warn("findBundleForSegment : segment overlaps existing bundle",{bundleStart:U[b].start,bundleEnd:U[b].end,segmentStart:a.firstTimestamp,segmentEnd:a.lastTimestamp})}S.debug("creating new bundle for segment",{segmentId:a.segmentId,start:a.firstTimestamp,end:a.lastTimestamp}),U.push(k.create()),U[U.length-1].appendSegment(a),z(),L()}function w(a,b){return b.segmentId===a.firstId-1}function x(a,b){return b.segmentId===a.lastId+1}function y(a,b){return a.firstId<=b.segmentId&&a.lastId>=b.segmentId}function z(){var a=F();U.sort(function(a,b){return a.start>b.start?1:a.start<b.start?-1:0}),V=U.indexOf(a)}function A(){for(var a=F(),b=0;U.length>1&&b<U.length-1;++b)U[b].lastId+1===U[b+1].firstId&&(b===V?(U[b].appendSegments(U[b+1].segments),U.splice(b+1,1),b--):(U[b+1].prependSegments(U[b].segments),U.splice(b--,1)));V=U.indexOf(a)}function B(){for(var a=F(),b=U.length;--b>=0;)U[b].start===U[b].end&&U.splice(b,1);V=U.indexOf(a),V<0&&(U.length?(V=0,F().setTimePosition(F().start),S.warn("removeEmptyBundles: currentBundle removed, bundleIndex set to 0")):S.debug("removeEmptyBundles: no remaining bundles"))}function C(){for(var a=[],b=[],c=0,d=[],e=0;e<U.length;++e)c+=U[e].size,a.push({start:U[e].start,end:U[e].end}),b.push({start:U[e].firstId,end:U[e].lastId}),d.push(U[e].size);o(h.SEGMENT_STORAGE_UPDATED,{streamId:l,size:c,ranges:a,ids:b,bundleSizes:d})}function D(){return U&&U.length?U[0]:null}function E(){return U&&U.length?U[U.length-1]:null}function F(){return U&&U.length>V?U[V]:null}function G(){return!!F()&&F().hasNextFragment}function H(){return!!F()&&F().nextFragmentContainsRAP}function I(){return F()?F().nextFragmentStartTime:d.UINT32_MAX_VALUE}function J(){var a=F()?F().getNextFragment():null;return L(),O(),a}function K(b){a.validateNotificationData(b,["streamId"]),b.data.streamId===l&&(b.type===j.DISCARD_START_SEGMENT&&D()?D().removeSegmentFromBeginning():E()&&E().removeSegmentFromEnd(),B(),L(),C())}function L(){P.streamId=l,P.configs=T,P.hasNextFragment=G(),P.nextFragmentContainsRAP=H(),P.nextFragmentStartTime=I()}function M(a,b){if(U.length&&0===U[0].firstId&&a<U[0].start&&a>=0)return V=0,void N(F().start);for(var c=0;U&&c<U.length;++c)if(U[c].start<=a&&U[c].end>=a)return V=c,void N(a);V=d.UINT32_MAX_VALUE,W=a,L(),b||o(i.SEGMENT_MISSING,{streamId:l,position:a})}function N(a){W=null,F().setTimePosition(a),L()}function O(){var a=F().activeSegment.segmentId;X!==a&&(X=a,o(i.SEGMENT_CHANGE,{segmentId:a,streamId:l}))}var P,Q,R=c.random(3),S=b.create("SegmentStorage."+R),T={},U=[],V=0,W=null,X=-1;return m(),P={getNextFragment:J,setTimePosition:M},L(),P}return{create:l}}),m("atlas/atlas/components/storagemanager",["atlas/atlas/facade","atlas/atlas/eventtypes/apievents","atlas/atlas/eventtypes/bufferevents","atlas/atlas/eventtypes/componentevents","atlas/atlas/eventtypes/controllerevents","atlas/atlas/eventtypes/garbagecollectorevents","atlas/atlas/eventtypes/storagemanagerevents","atlas/atlas/components/storage/segmentstorage","atlas/tools/logger"],function(a,b,c,d,e,f,g,h,i){function j(b,c){a.dispatch(b,l,c)}function k(){function i(){a.addListener(e.LOAD_SEGMENT,n),a.addListener(e.SWITCH_STREAM,u),a.addListener(b.CLEANUP,k),a.addListener(c.REQUEST_STORAGE,o),a.addListener(f.DISCARD_SEGMENT_STORAGE,v),a.addListener(g.SEGMENT_STORAGE_UPDATED,w),j(d.CREATE)}function k(){for(a.removeListener(e.LOAD_SEGMENT,n),a.removeListener(e.SWITCH_STREAM,u),a.removeListener(b.CLEANUP,k),a.removeListener(c.REQUEST_STORAGE,o),a.removeListener(f.DISCARD_SEGMENT_STORAGE,v),a.removeListener(g.SEGMENT_STORAGE_UPDATED,w);y&&y.length;)s(y[0]);y=null,j(d.DESTROY)}function n(b){a.validateNotificationData(b,["streamId"]),p(b.data.streamId)}function o(b){a.validateNotificationData(b,["streamId"]),p(b.data.streamId,!0)}function p(a,b){var c=q(a);return c&&b&&t(c),c||(c=r(a),m.info("created new storage for "+a),t(c)),c}function q(a){for(var b,c=0;c<y.length;++c)if(y[c].streamId===a){b=y[c];break}return b}function r(a){var b=h.create(a);return y.push(b),b}function s(b){y&&(y.splice(y.indexOf(b),1),a.dispatch(g.SEGMENT_STORAGE_REMOVED,name,{streamId:b.streamId}))}function t(b){a.dispatch(g.SEGMENT_STORAGE_INSTANCE,name,{segmentStorage:b,streamId:b.streamId})}function u(b){a.validateNotificationData(b,["streamId","position"]);var c=p(b.data.streamId);c.setTimePosition(b.data.position)}function v(b){a.validateNotificationData(b,["streamId"]),s(p(b.data.streamId))}function w(b){a.validateNotificationData(b,["streamId","ranges"]),b.data.ranges.length||s(p(b.data.streamId))}var x,y=[];return i(),x={name:l}}var l="StorageManager",m=i.create(l);return{create:k,name:l}}),m("atlas/tools/streamid",["atlas/tools/stringutils"],function(a){function b(a){return a.contentType?a.contentType.split("/")[0]:a.format}function c(b){for(var c="",d=0;d<h.length;++d)c+=f,c+=b.hasOwnProperty(h[d])?b[h[d]]:"";return a.hash(c,g)}function d(a){return[b(a),c(a)].join(f)}function e(a){var b=a.split(f);return{mediaType:b[0],hash:b[1]}}var f=":",g=32,h=["url","initUrl","segmentUrl"];return{stringify:d,split:e}}),m("atlas/atlas/controllers/segmented/contentrange",["atlas/tools/logger"],function(a){function b(a,b,f,g){function h(){g||(l(),m())}function k(){n(),v=null,w=null,x=null,y=null}function l(){var c=u?i.floor(((new j).getTime()-s)/b):0;v=a+c-e,w=a+c+d}function m(){s=(new j).getTime(),u=setInterval(function(){l(),r()},b/10)}function n(){null!==u&&clearInterval(u),u=null}function o(a){var d=a-y,e=i.max(0,x+i.floor(d/b));return c.debug("getSegmentIdForPosition",{position:a,referenceId:x,referencePosition:y,start:v,end:w,segmentId:e}),e>=v&&e<=w?e:null}function p(a,b){x=a,y=b}function q(a){n(),w=a}function r(){t.start=v,t.end=w}var s,t,u=null,v=a,w=a+i.floor(g/b),x=a,y=f;return h(),t={setReferencePoint:p,getSegmentIdForPosition:o,setContentEnd:q,destroy:k},r(),t}var c=a.create("ContentRange"),d=1,e=10;return{create:b}}),m("atlas/tools/hashlist",["atlas/tools/logger"],function(a){function b(){function b(a){if(!a.hasOwnProperty("id"))throw new Error('Invalid hashObject: missing "id"');if(!a.hasOwnProperty("hash"))throw new Error('Invalid hashObject: missing "hash"');void 0===f[a.id]&&(e.push(+a.id),e.sort(c)),f[a.id]=a.hash}function c(a,b){return parseInt(a)-parseInt(b)}function d(a){for(var b=0;b<e.length;++b)if(parseInt(e[b])<=parseInt(a)&&(void 0===e[b+1]||parseInt(e[b+1])>parseInt(a)))return f[e[b]];g.warn("cannot find hash for "+a)}var e=[],f={},g=a.create("HashList");return{add:b,getHashBySegmentId:d}}return{create:b}}),m("atlas/atlas/controllers/segmented/contentloader",["atlas/atlas/facade","atlas/atlas/controllers/segmented/contentrange","atlas/tools/hashlist","atlas/tools/logger","atlas/tools/timerange","atlas/tools/stringutils","atlas/tools/streamid","atlas/tools/consts","atlas/atlas/eventtypes/apievents","atlas/atlas/eventtypes/storagemanagerevents","atlas/atlas/eventtypes/segmentstorageevents","atlas/atlas/eventtypes/segmentdownloaderevents","atlas/atlas/eventtypes/controllerevents","atlas/atlas/eventtypes/videoplayerevents","atlas/atlas/hacks"],function(a,b,c,d,g,h,j,k,l,m,n,o,p,q,r){function s(s,u){function v(){_.debug("init",{bufferId:s,streamId:$,options:u}),a.addListener(l.CLEANUP,w),a.addListener(q.POSITION,J),a.addListener(n.SEGMENT_MISSING,Q),a.addListener(o.LOAD_INIT,L),a.addListener(o.SEGMENT,M),a.addListener(o.LOAD_COMPLETE,N),a.addListener(o.FAILED,O),a.addListener(m.SEGMENT_STORAGE_UPDATED,K),a.addListener(p.SWITCH_STREAM,I),da[$]=u,X=da[$],Z=X.segmentLength*t,r.INFINITE_THRESHOLD_WHILE_PLAYING_LIVE&&!X.contentLength&&(Z=1/0),E(X.baseUrl),X.hashes&&(S=c.create(),F(X.hashes)),V=b.create(X.segmentId,X.segmentLength,X.contentStart,X.contentLength),ea?y(ea,X.segmentId,!0):y(fa,X.segmentId)}function w(){a.removeListener(l.CLEANUP,w),a.removeListener(q.POSITION,J),a.removeListener(n.SEGMENT_MISSING,Q),a.removeListener(o.LOAD_INIT,L),a.removeListener(o.SEGMENT,M),a.removeListener(o.LOAD_COMPLETE,N),a.removeListener(o.FAILED,O),a.removeListener(m.SEGMENT_STORAGE_UPDATED,K),a.removeListener(p.SWITCH_STREAM,I),a.removeListener(o.LOAD_COMPLETE,P),V.destroy(),f(W),T=null,U=null,aa=null,V=null,ca=null}function x(b,c){a.dispatch(b,"ContentLoader",c)}function y(a,b,c){var d=C(a,{segmentId:b,hashId:S?S.getHashBySegmentId(b):""}),e={streamId:$,segmentId:c?-1:b,url:d};ca?ca===z(e)||A(e)||(_.debug("downloading "+ca+", pushed "+z(e)+" to waiting"),ba.push(e)):(_.debug("loading segment "+e.segmentId+", content range: "+V.start+">"+V.end),B(e))}function z(a){return a.streamId+"/"+a.segmentId}function A(a){for(var b=0;b<ba.length;++b)if(ba[b].streamId===a.streamId&&ba[b].segmentId===a.segmentId)return!0;return!1}function B(a){x(p.LOAD_SEGMENT,a)}function C(a,b){b.hasOwnProperty("segmentId")&&(b["segmentId%06d"]=h.leadingZero(b.segmentId,6),b["segmentId%04d"]=h.leadingZero(b.segmentId,4));for(var c in b)b.hasOwnProperty(c)&&(a=a.replace("#"+c+"#",b[c]));return a}function D(a){var b=j.stringify(a);da[b]=a,E(a.baseUrl),F(a.hashes)}function E(a){ea=X.initUrl?a+X.initUrl:"",fa=X.segmentUrl?a+X.segmentUrl:""}function F(a){if(a){S||(S=c.create());for(var b in a)a.hasOwnProperty(b)&&S.add({id:b,hash:a[b]})}}function G(){for(var a=0;T&&a<T.length;++a)if(aa>=T[a].start&&aa<=T[a].end)return U[a];return null}function H(){var a=G();if(a){var b=a.end+1,c=g.remaining(aa,T),d=V.end>=b;c<Z&&d&&y(fa,b)}}function I(b){if(a.validateNotificationData(b,["bufferId","streamId","position"]),b.data.bufferId===s){var c=V.getSegmentIdForPosition(b.data.position);null!==c?($=b.data.streamId,X=da[$],E(X.baseUrl),y(fa,c)):_.error("unable to get segmentId for "+b.data.position)}}function J(b){a.validateNotificationData(b,["position"]),aa=b.data.position,T&&H()}function K(b){a.validateNotificationData(b,["streamId","ranges","ids"]),b.data.streamId===$&&(aa===-1&&b.data.ranges.length&&(aa=b.data.ranges[0].start),T=b.data.ranges,U=b.data.ids,H())}function L(b){a.validateNotificationData(b,["streamId","segmentId"]),b.data.streamId===$&&(ca=z({streamId:b.data.streamId,segmentId:b.data.segmentId}))}function M(b){if(a.validateNotificationData(b,["streamId","segmentId","firstTimestamp","duration"]),b.data.streamId===$){b.data.firstTimestamp!==k.UINT32_MAX_VALUE&&V.setReferencePoint(b.data.segmentId,b.data.firstTimestamp),b.data.lastSegment&&V.setContentEnd(b.data.segmentId);var c=i.abs(X.segmentLength-b.data.duration);c>.2*X.segmentLength&&_.warn("unusual segment duration: "+b.data.duration+", segmentId: "+b.data.segmentId),ga+=b.data.duration,ha+=X.segmentLength;var d=ga-ha;_.debug("downloaded duration: "+ga+", expected duration: "+ha+", diff: "+d)}}function N(b){a.validateNotificationData(b,["streamId","segmentId"]),ca&&ca.split("/")[0]===b.data.streamId&&(ca="",b.data.segmentId===-1?y(fa,X.segmentId):ba.length&&B(ba.shift()))}function O(b){a.validateNotificationData(b,["streamId","segmentId"]),ca&&ca.split("/")[0]===b.data.streamId&&(X.contentLength||(a.removeListener(o.LOAD_COMPLETE,P),a.addListener(o.LOAD_COMPLETE,P)),W=e(function(){B(b.data)},2e3))}function P(c){a.validateNotificationData(c,["streamId","segmentId"]),a.removeListener(o.LOAD_COMPLETE,P),c.data.streamId===$&&(V.destroy(),V=b.create(c.data.segmentId-1,X.segmentLength,X.contentLength))}function Q(b){a.validateNotificationData(b,["streamId","position"]),b.data.streamId===$&&(_.debug("onSegmentMissing"),e(function(){var a=V.getSegmentIdForPosition(b.data.position);null!==a?y(fa,a):_.error("unable to get segmentId for position: "+b.data.position)},10))}function R(){Y.baseUrl=X.baseUrl,Y.segmentUrl=X.segmentUrl,Y.initUrl=X.initUrl,Y.streamId=$}var S,T,U,V,W,X,Y,Z,$=j.stringify(u),_=d.create("ContentLoader."+$),aa=-1,ba=[],ca="",da={},ea="",fa="",ga=0,ha=0;return v(),Y={update:D,destroy:w},R(),Y}var t=5;return{create:s}}),m("atlas/atlas/controllers/segmented/representation",["atlas/atlas/facade","atlas/atlas/eventtypes/apievents","atlas/atlas/eventtypes/buffermanagerevents","atlas/atlas/eventtypes/bufferevents","atlas/atlas/eventtypes/componentevents","atlas/atlas/eventtypes/controllerevents","atlas/atlas/eventtypes/segmentstorageevents","atlas/atlas/eventtypes/videoplayerevents","atlas/tools/logger","atlas/tools/streamid","atlas/atlas/components/buffermanager","atlas/atlas/controllers/segmented/contentloader"],function(a,b,c,d,e,f,g,h,i,j,k,l){function m(m){function n(b,c){a.dispatch(b,"buffer",c)}function o(){H[E]=m,a.addListener(b.CLEANUP,p),a.addListener(b.SUSPEND,q),a.addListener(e.CREATE,u),a.addListener(c.BUFFER_ADDED,w),a.addListener(h.POSITION,v),a.addListener(g.KEYFRAME_POSITION,x),a.addListener(d.STREAM_SWITCH,y),s()}function p(){a.removeListener(b.CLEANUP,p),a.removeListener(b.SUSPEND,q),a.removeListener(b.WAKE,q),a.removeListener(e.CREATE,u),a.removeListener(c.BUFFER_ADDED,w),a.removeListener(h.POSITION,v),a.removeListener(g.KEYFRAME_POSITION,x),a.removeListener(d.STREAM_SWITCH,y),z=null,A=null}function q(){a.removeListener(b.SUSPEND,q),a.addListener(b.WAKE,r)}function r(){a.addListener(b.SUSPEND,q),a.removeListener(b.WAKE,r),s()}function s(){n(f.ADD_BUFFER,{streamId:E,contentType:G})}function t(a){var b=j.stringify(a);H[b]=a,A&&A.update(a),E!==b&&D!==b?(D=b,I=!0,F.debug("stream change detected, findind switch position",{playPosition:C,segmentLength:a.segmentLength}),n(f.REQUEST_KEYFRAME_POSITION,{after:C+a.segmentLength,streamId:E})):E===b&&I&&(D=void 0,I=!1,n(f.CANCEL_STREAM_SWITCH,{bufferId:z,streamId:E}))}function u(a){var b=a.originId.split(":")[1];b===k.name&&s()}function v(b){a.validateNotificationData(b,["position"]),C=b.data.position}function w(b){a.validateNotificationData(b,["bufferId","contentType"]),b.data.contentType===G&&(a.removeListener(c.BUFFER_ADDED,w),z=b.data.bufferId,F.debug("onBufferAdded "+z),A=l.create(z,H[E]))}function x(b){a.validateNotificationData(b,["streamId","position"]),I&&b.data.streamId===E&&(n(f.SWITCH_STREAM,{bufferId:z,streamId:D,position:b.data.position}),D=void 0)}function y(b){a.validateNotificationData(b,["bufferId","streamId"]),b.data.bufferId===z&&(I=!1,E=b.data.streamId)}var z,A,B,C,D,E=j.stringify(m),F=i.create("Representation."+m.contentType),G=m.contentType+';codecs="'+m.codecs+'"',H={},I=!1;return o(),B={update:t}}return{create:m}}),m("atlas/atlas/controllers/segmented/controller",["atlas/atlas/facade","atlas/atlas/eventtypes/apievents","atlas/atlas/eventtypes/componentevents","atlas/atlas/eventtypes/controllerevents","atlas/atlas/eventtypes/segmentdownloaderevents","atlas/atlas/eventtypes/videoplayerevents","atlas/tools/logger","atlas/atlas/controllers/segmented/representation"],function(a,b,c,d,f,g,h,j){function k(b,c){a.dispatch(b,m,c)}function l(l){function n(){l.contentLength&&(y=void 0!==l.contentStart?l.contentStart:0,y+=l.contentLength),t(s()),a.addListener(f.SEGMENT,p),a.addListener(g.POSITION,r),a.addListener(g.BUFFER_EMPTY,r),a.addListener(b.SEEK,q),a.addListener(b.CLEANUP,o),a.addListener(b.UPDATE_OPTIONS,u),k(c.CREATE)}function o(){a.removeListener(f.SEGMENT,p),a.removeListener(g.POSITION,r),a.removeListener(g.BUFFER_EMPTY,r),a.removeListener(b.SEEK,q),a.removeListener(b.CLEANUP,o),a.removeListener(b.UPDATE_OPTIONS,u),v=null,k(c.DESTROY)}function p(b){a.validateNotificationData(b,["lastSegment","lastTimestamp"]),b.data.lastSegment&&(y=i.min(y,b.data.lastTimestamp),x.info("last segment reached, content finishes at "+y))}function q(){z=!1}function r(b){var c=b.type===g.BUFFER_EMPTY?100:0;a.validateNotificationData(b,["position"]),b.data.position>=y-c&&!z&&(x.info("content finished"),z=!0,e(function(){k(d.FINISHED)},10))}function s(){for(var a,b,c=[],d=0;d<l.representations.length;++d)b=l.representations[d],a={},a.contentType=b.contentType,a.codecs=b.codecs,a.mediaType=b.contentType,a.initUrl=b.initUrl,a.baseUrl=l.baseUrl,a.segmentUrl=b.segmentUrl,a.segmentId=l.segmentId,a.segmentLength=b.segmentLength,a.hashes=l.hashes,a.contentLength=l.contentLength,a.contentStart=l.contentStart,c.push(a);return c}function t(a){v={};for(var b=0;b<a.length;++b)v.hasOwnProperty(a[b].mediaType)?x.warn("duplicated media type: "+a[b].mediaType):v[a[b].mediaType]=j.create(a[b])}function u(b){a.validateNotificationData(b,["options"]),l=b.data.options;for(var c=s(),d=[],e=0;e<c.length;++e)v.hasOwnProperty(c[e].mediaType)?(v[c[e].mediaType].update(c[e]),d.push(c[e].mediaType)):x.warn("adding new media type during playback is not supported");for(var f in v)v.hasOwnProperty(f)&&d.indexOf(f)<0&&x.warn("removing media type during playback is not supported")}var v,w,x=h.create(m),y=1/0,z=!1;return n(),w={name:m}}var m="SegmentedController";return{create:l}}),m("atlas/tools/url",["atlas/tools/logger"],function(a){function b(a){d.debug("parseURLVariables "+a);var b,c={};if(a.indexOf("?")!==-1){b=a.split("?")[1].split("&");for(var e=0;e<b.length;++e)c[b[e].split("=")[0]]=b[e].split("=")[1]}return c}function c(a){d.debug("serializeURLVariables ",a);var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c+"="+a[c]);return b.join("&")}var d=a.create("URLTools");return{parseURLVariables:b,serializeURLVariables:c}}),m("atlas/atlas/controllers/flvsegmenter/controller",["atlas/tools/logger","atlas/atlas/facade","atlas/atlas/components/downloadmanager","atlas/atlas/eventtypes/buffermanagerevents","atlas/atlas/eventtypes/apievents","atlas/atlas/eventtypes/componentevents","atlas/atlas/eventtypes/controllerevents","atlas/atlas/eventtypes/metadownloaderevents","atlas/atlas/eventtypes/segmentdownloaderevents","atlas/atlas/eventtypes/segmentstorageevents","atlas/atlas/eventtypes/storagemanagerevents","atlas/atlas/eventtypes/videoplayerevents","atlas/tools/streamid","atlas/tools/timerange","atlas/tools/url"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){function p(a,c){b.dispatch(a,r,c)}function q(a){function q(){O(a),u.debug("baseUrl: "+U,V),V.ri=0,V.rs=0,b.addListener(d.CLEANUP,v),b.addListener(h.METADATA,A),b.addListener(h.FAILED,z),b.addListener(e.BUFFER_ADDED,F),b.addListener(i.LOAD_COMPLETE,E),b.addListener(k.SEGMENT_STORAGE_UPDATED,y),b.addListener(d.UPDATE_OPTIONS,G),b.addListener(f.CREATE,w),b.addListener(j.SEGMENT_MISSING,B),b.addListener(d.SEEK,C),b.addListener(l.POSITION,C),b.addListener(l.POSITION,D),b.addListener(l.BUFFER_EMPTY,D),p(f.CREATE),x()}function v(){b.removeListener(d.CLEANUP,v),b.removeListener(h.METADATA,A),b.removeListener(h.FAILED,z),b.removeListener(e.BUFFER_ADDED,F),b.removeListener(i.LOAD_COMPLETE,E),b.removeListener(k.SEGMENT_STORAGE_UPDATED,y),b.removeListener(d.UPDATE_OPTIONS,G),b.removeListener(f.CREATE,w),b.removeListener(j.SEGMENT_MISSING,B),b.removeListener(d.SEEK,C),b.removeListener(l.POSITION,C),b.removeListener(l.POSITION,D),b.removeListener(l.BUFFER_EMPTY,D),p(f.DESTROY)}function w(a){var b=a.originId.split(":")[1];u.warn("onComponentCreate "+b+" "+c.name),b===c.name&&x()}function x(){p(g.LOAD_MOVIE_META,{url:U+"?"+o.serializeURLVariables(V),streamId:Y})}function y(a){b.validateNotificationData(a,["streamId","ranges","ids"]),a.data.streamId===Y&&(void 0===$&&a.data.ranges.length&&($=a.data.ranges[0].start),W=a.data.ranges,X=a.data.ids,H())}function z(a){b.validateNotificationData(a,["streamId"]),u.error("onDownloaderFailure"),v()}function A(a){if(b.validateNotificationData(a,["streamId","metadata"]),Y===a.data.streamId)if(u.debug("onDownloaderMetadata",a.data.metadata),a.data.metadata.segments){R=a.data.metadata.contentLength,S=a.data.metadata.contentSize,Q=a.data.metadata.segments.positions,P=a.data.metadata.segments.times;for(var c=1;c<P.length;++c)P[c]===P[c-1]&&(P.splice(c,1),Q.splice(c,1),c--);p(g.ADD_BUFFER,{streamId:Y,contentType:"flv"})}else u.error("onDownloaderMetadata : no segment info in metadata, unable to continue"),v()}function B(a){b.validateNotificationData(a,["streamId","position"]),a.data.streamId===Y&&($=a.data.position,H())}function C(a){b.validateNotificationData(a,["position"]),$=a.data.position,H()}function D(a){b.validateNotificationData(a,["position"]);var c=a.type===l.BUFFER_EMPTY?100:0;a.data.position>=R-c&&(u.info("content finished"),p(g.FINISHED))}function E(a){b.validateNotificationData(a,["streamId"]),a.data.streamId===Y&&(u.debug("download complete"),Z=!1)}function F(a){b.validateNotificationData(a,["streamId"]),I()}function G(a){b.validateNotificationData(a,["options"]),O(a.data.options)}function H(){var a=n.remaining($,W);a<s&&!Z&&I()}function I(){var a=n.current($,W),b=a?X[W.indexOf(a)]:null,c=b?b.end+1:J($),d=K(c);c!==1/0&&d&&M(c,d)}function J(a){for(var b=1;b<P.length;++b)if(P[b]>a)return b-1;return 1/0}function K(a){for(var b=0,c=0;c<t&&a+b<P.length;)b++,c+=L(P,a+b,R)-P[a];return b}function L(a,b,c){return b<a.length?a[b]:c}function M(b,c){Z&&p(g.ABORT_DOWNLOAD,{streamId:Y});for(var d=[],e=[],f=[],h=b;h<b+c;++h)d.push(h),f.push(N(Q,S,h)),e.push(N(P,R,h));V[a.seekParameter]=Q[b];var i=U+"?"+o.serializeURLVariables(V);Z=!0,p(g.LOAD_SEGMENT,{streamId:Y,segmentIds:d,segmentDurations:e,segmentSizes:f,url:i})}function N(a,b,c){return(c<a.length-1?a[c+1]:b)-a[c]}function O(a){U=a.url.split("?")[0],V=o.parseURLVariables(a.url)}var P,Q,R,S,T,U,V,W,X,Y=m.stringify(a),Z=!1,$=0;return q(),T={name:r}}var r="FLVSegmenterController",s=5e3,t=15e3,u=a.create(r);return{create:q}}),m("atlas/atlas/controllers/direct/controller",["atlas/atlas/facade","atlas/atlas/eventtypes/apievents","atlas/atlas/eventtypes/componentevents","atlas/atlas/eventtypes/controllerevents","atlas/atlas/eventtypes/videotagproxyevents"],function(a,b,c,d,e){function f(b,c){a.dispatch(b,h,c)}function g(g){function i(){a.addListener(e.ENDED,l),a.addListener(b.CLEANUP,j),a.addListener(b.WAKE,m),a.addListener(b.UPDATE_OPTIONS,k),f(d.STREAM_URL,{source:g.url})}function j(){a.removeListener(e.ENDED,l),a.removeListener(b.CLEANUP,j),a.removeListener(b.WAKE,m),a.removeListener(b.UPDATE_OPTIONS,k),f(c.DESTROY)}function k(b){a.validateNotificationData(b,["options"]),g=b.data.options}function l(){f(d.FINISHED)}function m(){f(d.STREAM_URL,{source:g.url})}var n;return i(),n={name:h}}var h="DirectController";return{create:g}}),m("atlas/atlas/controllers/garbagecollector",["atlas/atlas/facade","atlas/atlas/eventtypes/apievents","atlas/atlas/eventtypes/bufferevents","atlas/atlas/eventtypes/buffermanagerevents","atlas/atlas/eventtypes/componentevents","atlas/atlas/eventtypes/controllerevents","atlas/atlas/eventtypes/garbagecollectorevents","atlas/atlas/eventtypes/segmentstorageevents","atlas/atlas/eventtypes/storagemanagerevents","atlas/tools/logger","atlas/tools/streamid"],function(a,b,c,d,e,f,g,h,i,j,k){function l(){function j(){q.debug("create"),a.addListener(i.SEGMENT_STORAGE_UPDATED,B),a.addListener(h.SEGMENT_CHANGE,C),a.addListener(c.STREAM_SWITCH,D),a.addListener(d.BUFFER_ADDED,E),a.addListener(f.SET_MAX_MEMORY_USAGE,F),a.addListener(b.CLEANUP,G),m(e.CREATE)}function l(){J=0;for(var a in K)K.hasOwnProperty(a)&&(J+=K[a].size)}function r(){return J>I}function s(b){r()&&(q.info("memory usage ("+J+") exceeds limit ("+I+")"),a.addListener(i.SEGMENT_STORAGE_UPDATED,t,-1),t(b))}function t(b){if(a.validateNotificationData(b,["streamId"]),!r())return q.info("memory usage is back to normal"),void a.removeListener(i.SEGMENT_STORAGE_UPDATED,t);var c,d=[];for(var e in K)K.hasOwnProperty(e)&&d.push(e);d=d.sort(u),e=!!d.length&&d.shift(),c=!!e&&A(e),c?m(c,{streamId:e}):(q.warn("memory usage is high but there is no segment to discard"),a.removeListener(i.SEGMENT_STORAGE_UPDATED,t))}function u(a,b){if(K[a].usage!==K[b].usage){if(K[b].usage===p.UNUSED)return 1;if(K[a].usage===p.UNUSED)return-1;if(K[b].usage===p.USED)return 1;if(K[a].usage===p.USED)return-1}return K[b].length-K[a].length}function v(a,b){if(b===p.UNUSED)return void(K[a].usage=b);var c={mediaType:k.split(a).mediaType,usage:b};for(var d in K)w(d,c)&&(K[d].usage=p.UNUSED);K[a]=K[a]||{},K[a].usage=b}function w(a,b){if(K.hasOwnProperty(a))return!1;for(var c in b)if(b.hasOwnProperty(c)&&a[c]!==b[c])return!1;return!0}function x(a){return K[a]&&K[a].ids.length&&K[a].ids[0].start<L[a]}function y(a){return K[a]&&K[a].ids.length&&K[a].ids[K[a].ids.length-1].end>L[a]}function z(a){return K[a].usage===p.USED||K[a].usage===p.SWITCH}function A(a){return!z(a)&&K[a].size>J-I?g.DISCARD_SEGMENT_STORAGE:x(a)?g.DISCARD_START_SEGMENT:!!y(a)&&g.DISCARD_END_SEGMENT}function B(b){var c;a.validateNotificationData(b,["streamId","size","ranges","ids"]),K[b.data.streamId]=K[b.data.streamId]||{},c=K[b.data.streamId],c.ids=b.data.ids,c.size=b.data.size,c.ranges=b.data.ranges,c.length=n(b.data.ranges),c.usage=c.usage||p.UNUSED,c.mediaType=k.split(b.data.streamId).mediaType,l()}function C(b){a.validateNotificationData(b,["streamId","segmentId"]),L[b.data.streamId]=b.data.segmentId,v(b.data.streamId,p.USED),s(b)}function D(b){a.validateNotificationData(b,["streamId"]),v(b.data.streamId,p.USED)}function E(b){a.validateNotificationData(b,["streamId"]),v(b.data.streamId,p.SWITCH)}function F(b){a.validateNotificationData(b,["limit"]),I=b.data.limit}function G(){a.removeListener(i.SEGMENT_STORAGE_UPDATED,B),a.removeListener(i.SEGMENT_STORAGE_UPDATED,t),a.removeListener(h.SEGMENT_CHANGE,C),a.removeListener(c.STREAM_SWITCH,D),a.removeListener(d.BUFFER_ADDED,E),a.removeListener(f.SET_MAX_MEMORY_USAGE,F),a.removeListener(b.CLEANUP,G),K=null,L=null,m(e.DESTROY)}var H,I=134217728,J=0,K={},L={};return j(),H={name:o}}function m(b,c){a.dispatch(b,o,c)}function n(a){for(var b=0,c=0;c<a.length;++c)b+=a[c].end-a[c].start;return b}var o="GarbageCollector",p={UNUSED:"unused",USED:"used",SWITCH:"switch"},q=j.create(o);return{create:l}}),m("atlas/atlas/componentfactory",["atlas/atlas/formats","atlas/tools/logger","atlas/atlas/facade","atlas/atlas/capabilities","atlas/atlas/components/mseproxy","atlas/atlas/components/flashproxy","atlas/atlas/components/downloadmanager","atlas/atlas/components/buffermanager","atlas/atlas/components/storagemanager","atlas/atlas/components/videotagproxy","atlas/atlas/controllers/segmented/controller","atlas/atlas/controllers/flvsegmenter/controller","atlas/atlas/controllers/direct/controller","atlas/atlas/controllers/garbagecollector"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){function o(a,b){return d.indexOf(b.format)===-1?(s.error(b.format+" is not supported on this browser"),!1):p(a,b)&&q(b)}function p(b,d){switch(d.format){case a.MP4_SEGMENTED:if(!r(d))return!1;c.registerComponent(j.create(b)),c.registerComponent(e.create()),c.registerComponent(h.create()),c.registerComponent(g.create()),c.registerComponent(i.create());break;case a.HLS:c.registerComponent(j.create(b));break;case a.FLV_MOVIE:case a.FLV_SEGMENTED:c.registerComponent(f.create(b))}return!0}function q(b){switch(b.format){case a.FLV_MOVIE:c.registerComponent(n.create()),c.registerComponent(l.create(b));break;case a.FLV_SEGMENTED:case a.MP4_SEGMENTED:c.registerComponent(n.create()),c.registerComponent(k.create(b));break;case a.HLS:c.registerComponent(m.create(b))}return!0}function r(a){for(var b,c,d,f=!0,g=0;a.representations&&g<a.representations.length;++g)c=a.representations[g],b=c.contentType+';codecs="'+c.codecs+'"',d=e.isCompatible(b),d?s.info("can play type: "+b):s.error("can not play type: "+b),f=f&&d;return f}var s=b.create("ComponentFactory");return{setup:o}}),m(n[133],["atlas/atlas/events","atlas/atlas/formats","atlas/atlas/internals","atlas/atlas/facade","atlas/atlas/capabilities","atlas/atlas/validator","atlas/atlas/eventtypes/apievents","atlas/atlas/eventtypes/bufferevents","atlas/atlas/eventtypes/componentevents","atlas/atlas/eventtypes/controllerevents","atlas/atlas/eventtypes/videoplayerevents","atlas/atlas/eventtypes/segmentdownloaderevents","atlas/atlas/eventtypes/storagemanagerevents","atlas/atlas/eventtypes/metadownloaderevents","atlas/atlas/componentfactory","atlas/atlas/components/videotagproxy","atlas/tools/consts","atlas/tools/logger","atlas/tools/notifier"],function(a,b,c,d,e,f,g,h,j,k,l,m,o,p,q,r,s,t,u){function v(a){Y=a,aa.debug("initializing atlas "+s.VERSION,{containerId:Y}),$=u.create(),d.addListener(j.CREATE,M)}function w(b){q.setup(Y,b)?(d.addListener(l.ERROR,P,-2),d.addListener(l.POSITION,Q,-2),d.addListener(l.BUFFERED,R,-2),d.addListener(l.BUFFER_EMPTY,U,-2),d.addListener(l.BUFFER_FULL,U,-2),d.addListener(l.THROTTLE,V,-2),d.addListener(l.CC_DETECTED,W,-2),d.addListener(h.BUFFER_UPDATED,R,-2),d.addListener(m.LOAD_COMPLETE,N,-2),d.addListener(m.FAILED,O,-2),d.addListener(o.SEGMENT_STORAGE_UPDATED,S,-2),d.addListener(k.FINISHED,T,-2),d.addListener(p.METADATA,X,-2)):K(a.ERROR,{error:"unsupported",recoverable:!0})}function x(){L(),$.cleanup(),$=null,Z=null,d.removeListener(j.CREATE,M),d.removeListener(l.ERROR,P),d.removeListener(l.POSITION,Q),d.removeListener(l.BUFFERED,R),d.removeListener(l.BUFFER_EMPTY,U),d.removeListener(l.BUFFER_FULL,U),d.removeListener(l.THROTTLE,V),d.removeListener(l.CC_DETECTED,W),d.removeListener(h.BUFFER_UPDATED,R),d.removeListener(m.LOAD_COMPLETE,N),d.removeListener(m.FAILED,O),d.removeListener(o.SEGMENT_STORAGE_UPDATED,S),d.removeListener(k.FINISHED,T),d.removeListener(p.METADATA,X),J(g.CLEANUP)}function y(){L(),J(g.SUSPEND)}function z(){L(),J(g.WAKE)}function A(){L(),J(g.PAUSE)}function B(){L(),J(g.RESUME)}function C(a){L(),aa.info("seek to "+a),J(g.SEEK,{position:i.floor(a)})}function D(a){L(),ba=void 0!==a?!!a:!ba,J(g.CAPTIONS,{visible:ba})}function E(){return L(),_}function F(a){L(),_=a,J(g.VOLUME,{volume:_})}function G(b){if(aa.debug("play",b),L(),Z)J(g.UPDATE_OPTIONS,{options:b});else{if(!f.validate(b))return void K(a.ERROR,{error:"invalidOptions",recoverable:!0});w(b)}Z=b}function H(b,c){L(),b===a.LOG?t.addListener(t.events.LOG,c):$.addListener(b,c)}function I(b,c){L(),b===a.LOG?t.removeListener(t.events.LOG,c):$.removeListener(b,c)}function J(a,b){d.dispatch(a,n[133],b)}function K(a,b){var c={event:a};for(var d in b)b.hasOwnProperty(d)&&("event"===d?aa.warn('notify: "event" property ignored on data'):c[d]=b[d]);$.dispatch(a,c),$.dispatch("Atlas.*",c)}function L(){if(!$)throw new Error("Initialize Atlas before usage!")}function M(a){var b=a.originId.split(":")[1].split(".")[0];"QueueStreamProxy"!==b&&b!==r.name||F(_)}function N(b){d.validateNotificationData(b,["time","size","url"]),K(a.BANDWIDTH,{time:b.data.time,size:b.data.size,url:b.data.url})}function O(b){d.validateNotificationData(b,["url","status"]);var c=404===b.data.status||0===b.data.status?"segmentNotFound":"segmentLoadFailed";K(a.ERROR,{error:c,recoverable:!0,details:{url:b.data.url,status:b.data.status}})}function P(b){d.validateNotificationData(b,["code","message"]),aa.error("onVideoPlayerError"),K(a.ERROR,{error:"videoPlayer",recoverable:!1,
details:{code:b.data.code,message:b.data.message}}),x()}function Q(b){d.validateNotificationData(b,["position"]),K(a.POSITION,{position:b.data.position})}function R(b){d.validateNotificationData(b,["bufferId","ranges"]),K(a.BUFFERED,{ranges:b.data.ranges,bufferId:b.data.bufferId})}function S(b){d.validateNotificationData(b,["streamId","ranges"]),K(a.STORED,{ranges:b.data.ranges,streamId:b.data.streamId})}function T(){K(a.FINISHED)}function U(b){switch(b.type){case l.BUFFER_EMPTY:aa.warn("buffer empty"),K(a.BUFFER_EMPTY);break;case l.BUFFER_FULL:aa.info("buffer full"),K(a.BUFFER_FULL)}}function V(b){d.validateNotificationData(b,["state"]),K(a.THROTTLE,{state:b.data.state})}function W(){K(a.CC_DETECTED)}function X(b){d.validateNotificationData(b,["metadata"]),K(a.METADATA,{type:"flv",data:b.data.metadata})}var Y,Z,$,_=1,aa=t.create("Atlas"),ba=!1;return{events:a,formats:b,capabilities:e,version:s.VERSION,internals:c,initialize:v,cleanup:x,suspend:y,wake:z,play:G,pause:A,resume:B,seek:C,setVolume:F,getVolume:E,toggleCaptions:D,on:H,off:I,addListener:H,removeListener:I}}),m(n[132],[n[133],n[17],n[26],n[13],n[116],n[94],n[114]],function(a,b,c,d,g,h,k){function l(){A(),k.send(k.types.REPORT,k.events.PLAYING,{mid:b.getMid(),send:!1}),B()}function m(){K=0,L=0,F&&f(F)}function o(b){H("onPlaybackData",b),O.data=b,G&&O.data.hasOwnProperty("format")&&G!==O.data.format&&z(),G=O.data.format,I||(a.initialize("EmbedViewer"),I=!0,H("Atlas is initialized"),a.addListener(a.events.BANDWIDTH,s),a.addListener(a.events.BUFFER_EMPTY,t),a.addListener(a.events.BUFFER_FULL,u),a.addListener(a.events.ERROR,v),a.addListener(a.events.POSITION,x),a.addListener(a.events.LOG,w),a.addListener(a.events.FINISHED,r),a.addListener(a.events.METADATA,q),a.addListener(a.events.CC_DETECTED,p)),O.changeVolume&&(a.setVolume(O.volume),O.changeVolume=!1),O.playing&&g.isPrerollDone()&&a.play(O.data)}function p(a){k.send(k.types.EVENT,k.events.CC_DETECTED,a)}function q(a){k.send(k.types.EVENT,k.events.ATLAS_METADATA,a)}function r(){k.send(k.types.EVENT,k.events.VIDEO_FINISHED)}function s(a){m(),k.send(k.types.REPORT,k.events.REPORT_BANDWIDTH,a)}function t(){k.send(k.types.REPORT,k.events.REPORT_BUFFER_EMPTY)}function u(){k.send(k.types.REPORT,k.events.REPORT_BUFFER_FULL)}function v(a){var b,c;c=a&&a.details&&a.details.status?Number(a.details.status):0,c>=500?k.send(k.types.COMMAND,"changeProvider"):(K++,K>=2&&(b=L?N:0,b=i.min(M,b*i.pow(2,L-1)),f(F),F=e(l,b),L++)),k.send(k.types.REPORT,k.events.REPORT_ERROR,a)}function w(a){var b=a.line.indexOf("dispatch : Buffer.append from Js:Buffer")>-1?"too much information, log is ignored":a.data;d(["atlas/"+a.source,a.line,{level:a.level,data:b}])}function x(b){var c;b.position>0&&(J||(J=!0,O.seekPosition&&(a.seek(1e3*O.seekPosition),O.seekPosition=null)),c=O.data.contentLength?b.position/O.data.contentLength:0,O.position=b.position,k.send(k.types.EVENT,k.events.PROGRESS,c))}function y(){A()}function z(){I&&(I=!1,a.removeListener(a.events.BANDWIDTH,s),a.removeListener(a.events.BUFFER_EMPTY,t),a.removeListener(a.events.BUFFER_FULL,u),a.removeListener(a.events.ERROR,v),a.removeListener(a.events.POSITION,x),a.removeListener(a.events.LOG,w),a.removeListener(a.events.FINISHED,r),a.removeListener(a.events.METADATA,q),a.cleanup()),m()}function A(){z(),O={playing:!1,pauseTime:0}}function B(){H("playbackhandler.onPlay() - preroll:",g.isPrerollDone());var c=!1;if(I){if(O.playing){var d=new j,e=d.getTime(),f=!!(b.getMid().indexOf("recorded")>-1||b.offairVideo);a.resume(),H("resume"),O.pauseTime>0&&e-O.pauseTime>100&&!f?(H("resume.time: "+e+" - diff: "+(e-O.pauseTime)),a.seek(O.position+(e-O.pauseTime)),O.pauseTime=0):c=!0}O.playing&&!c||(O.playing=!0,a.play(O.data))}O.playing||(O.playing=!0),k.send(k.types.EVENT,k.events.PLAYING,!0)}function C(){if(H("playbackhandler.onPause() - preroll:",g.isPrerollDone()),I){var b=new j;O.pauseTime=b.getTime(),H("pause.time",O.pauseTime),F&&m(),a.pause(),k.send(k.types.EVENT,k.events.PLAYING,!1)}}function D(b){I&&J?a.seek(1e3*b):O.seekPosition=b}function E(b){I&&a.toggleCaptions(b)}var F,G,H=d("playbackhandler"),I=!1,J=!1,K=0,L=0,M=16e3,N=1e3,O={volume:1,changeVolume:!1,playing:!1,pauseTime:0,data:null,seekPosition:null};return H(n[133],a),{init:function(){H("init"),c.autoplay&&(O.playing=!0),k.on(k.types.EVENT,k.events.PLAYBACK_DATA,o),k.on(k.types.COMMAND,k.events.VOLUME,function(b){var c=i.max(0,i.min(1,b/100));c!==O.volume&&(O.changeVolume=!0,O.volume=c,I&&a.setVolume(c))}),k.on(k.types.EVENT,k.events.LIVE,function(a){a===!0&&z()}),k.on(k.types.EVENT,k.events.CREATE_OFFAIR_VIDEO,y),k.on(k.types.EVENT,k.events.DESTROY_OFFAIR_VIDEO,y),k.on(k.types.COMMAND,k.events.PLAY,B),k.on(k.types.COMMAND,k.events.PAUSE,C),k.on(k.types.COMMAND,k.events.SEEK,D),k.on(k.types.COMMAND,k.events.TOGGLE_CC,E)},reset:A}}),m(n[135],[],function(){var a=function(a,b){var c,d;if(null==this)throw new TypeError(" this is null or not defined");var e=Object(this),f=e.length>>>0;if("function"!=typeof a)throw new TypeError(a+" is not a function");for(arguments.length>1&&(c=b),d=0;d<f;){var g;d in e&&(g=e[d],a.call(c,g,d,e)),d++}},b=Array.prototype.forEach||a;return function(a,c,d){return b.call(a,c,d)}}),m(n[137],[],function(){function a(a){var b,c;return b=h.call(a),b=b.substring(1,b.length-1),c=b.split(" "),b=c.length?c[1]:"none",b.toLowerCase()}function b(b,c){return a(b)===c}function c(a){return b(a,i.ARRAY)}function d(a){return b(a,i.BOOLEAN)}function e(a){return b(a,i.NUMBER)}function f(a){return b(a,i.OBJECT)}function g(a){return b(a,i.STRING)}var h={}.toString,i={ARRAY:"array",BOOLEAN:"boolean",NUMBER:"number",OBJECT:"object",STRING:"string",NULLOBJ:"null"};return{of:a,is:b,isArray:c,isBoolean:d,isNumber:e,isObject:f,isString:g,types:i}}),m(n[139],[],function(){return{FLV_MOVIE:"flv",FLV_SEGMENTED:"flv/segmented",MP4_MOVIE:"mp4",MP4_SEGMENTED:"mp4/segmented",HLS:"hls"}}),m(n[140],[],function(){function a(a,b,c){var d,e;b=b||{},c.forEach(function(c){c.hasOwnProperty("name")&&(d=c.name,e=c.hasOwnProperty("updatedName")?c.updatedName:c.name,b[e]=a.hasOwnProperty(e)?a[e]:a[d])})}return{copyProperties:a}}),m(n[141],[],function(){return{PROVIDER:[{name:"name"},{name:"url"},{name:"varnishUrl"},{name:"seek"}],STREAM:[{name:"width"},{name:"height"},{name:"videoCodec",updatedName:"codec"},{name:"bitrate"},{name:"description"},{name:"contentType"},{name:"initUrl"},{name:"chunkId"},{name:"url",updatedName:"initUrl"},{name:"streamName",updatedName:"segmentUrl"},{name:"chunkTime",updatedName:"segmentLength"}]}}),m(n[138],[n[139],n[140],n[141],n[137],n[12]],function(a,b,c,d,e){function f(a){var d;return d=e(a,function(a){var d={};return b.copyProperties(a,d,c.PROVIDER),d})}function g(a){var b,c=a[0].streams[0];return c.hasOwnProperty("chunkRange")&&(b=c.chunkRange),b}function h(a){var f;return f=e(a[0].streams,function(a){var e={};return b.copyProperties(a,e,c.STREAM),d.isArray(e.segmentUrl)&&(e.segmentUrl=e.segmentUrl[0]),e})}function i(a){var b,c;for(c=0;c<a[0].streams.length;c++)if(a[0].streams[c].hasOwnProperty("chunkTime")){b=a[0].streams[c].chunkTime;break}return b}function j(a){return!!(a&&d.isArray(a)&&a[0]&&a[0].streams&&d.isArray(a[0].streams)&&a[0].streams[0])}function k(b){return j(b)?(b.providers=f(b),b.hashes=g(b),b.streams=h(b),b.chunkTime=i(b),b.streamType=b.hashes?a.FLV_SEGMENTED:a.FLV_MOVIE,b):null}return{shim:k}}),m(n[142],[n[139],n[140],n[141],n[137],n[135],n[12]],function(a,b,c,d,e,f){function g(a){var d;return d=f(a.streams,function(d){var e={};return b.copyProperties(d,e,c.STREAM),a.hasOwnProperty("chunkTime")&&(e.segmentLength=a.chunkTime),a.hasOwnProperty("chunkId")&&(e.chunkId=a.chunkId),e})}function h(a){return!!(a.hasOwnProperty("providers")&&a.hasOwnProperty("streams")&&a.hasOwnProperty("hashes")&&a.hashes)}function i(a){return h(a)?(a.streams=g(a),a):null}return{shim:i}}),m(n[143],[n[139],n[140],n[141],n[137],n[135],n[12]],function(a,b,c,d,e,f){function g(a){var b={};return a&&a.hashes&&(d.isArray(a.hashes)?b=a.hashes[0]:d.isObject(a.hashes)&&(b=a.hashes)),b}function h(a){var g;return g=f(a.streams,function(a){var e={};return b.copyProperties(a,e,c.STREAM),d.isArray(e.segmentUrl)&&(e.segmentUrl=e.segmentUrl[0]),e}),a.hasOwnProperty("keyframe")&&d.isArray(a.keyframe)?e(a.keyframe,function(a,b){g[b]&&(g[b].chunkId=+a.chunkId||0)}):e(g,function(a){a.chunkId=0}),g}function i(a){return!!(a.hasOwnProperty("providers")&&a.hasOwnProperty("streams")&&a.hasOwnProperty("hashes")&&a.hashes)}function j(a){return i(a)?(a.hashes=g(a),a.streams=h(a),a.hasOwnProperty("keyframe")&&delete a.keyframe,a):null}return{shim:j}}),m(n[144],[n[139],n[140],n[141],n[137],n[135],n[12]],function(a,b,c,d,e,f){function g(a){var d;return d=f(a,function(a){var d={};return b.copyProperties(a,d,c.STREAM),d})}function h(a){return!!(a&&d.isArray(a)&&a[0]&&a[0].name&&a[0].url)}function i(b){return h(b)?(b.streamType=a.HLS,b.streams=g(b),b):null}return{shim:i}}),m(n[145],[n[139],n[140],n[141],n[137],n[135],n[12]],function(a,b,c,d,e,f){function g(a){var d;return d=f(a.streams,function(a){var d={};return b.copyProperties(a,d,c.STREAM),d})}function h(a){return!(!a.hasOwnProperty("providers")||!a.hasOwnProperty("streams"))}function i(b){return h(b)?(b.streamType=a.FLV_MOVIE,b.streams=g(b),b):null}return{shim:i}}),m(n[136],[n[137],n[13],n[12],n[138],n[142],n[143],n[144],n[145],n[139]],function(a,b,c,d,e,f,g,h,i){function j(b){if(!b)return null;if(b.hasOwnProperty("streamType"))switch(l("shim "+b.streamType+" type"),b.streamType){case i.MP4_SEGMENTED:b=e.shim(b);break;case i.FLV_SEGMENTED:b=f.shim(b)}else a.isArray(b)?k(b)?(l("hls module"),b=g.shim(b)):(l("shim legacy module"),b=d.shim(b)):(l("simple flv movie format"),b=h.shim(b));return b}function k(b){return!(!(b&&a.isArray(b)&&b[0]&&b[0].name&&b[0].url)||b[0].providers)}var l=b("streamshim");return{convertModule:j}}),m(n[146],[n[139],n[135]],function(a,b){function c(a){e(a.contentType)?q.push(a):r.push(a)}function d(){q=[],r=[]}function e(a){return!a||"video"===a.split("/")[0]}function f(a){var c,d={id:0,diff:Number.MAX_VALUE};return b(q,function(b,e){c=i.abs(a-b.height),c<d.diff&&(d.diff=c,d.id=e)}),d.id}function g(a){var c={id:-1,bitrate:0};return b(q,function(b,d){b.bitrate>c.bitrate&&b.bitrate<a&&(c.bitrate=b.bitrate,c.id=d)}),c.id===-1&&(c.id=h()),c.id}function h(){var a=Number.MAX_VALUE,c=-1;return b(q,function(b,d){b.bitrate<a&&(a=b.bitrate,c=d)}),c}function j(a){return r&&0!==r.length?(a&&r.forEach(function(b){if(b.description===a.description)return b}),r[0]):null}function k(){var a,c,d=[];return(a=m()?q:n()?r:null)?(b(a,function(a,b){c={id:b,active:!0,bitrate:a.bitrate},a.hasOwnProperty("height")&&(c.height=a.height),d.push(c)}),d):null}function l(){var a=[];return m()&&b(o(),function(b){b.height&&a.indexOf(b.height)===-1&&a.push(b.height)}),a}function m(){return!!q.length}function n(){return!!r.length}function o(){return q}function p(){return r}var q,r;return{store:c,clear:d,nearestHeight:f,nearestBitrate:g,hasVideo:m,hasAudio:n,getVideos:o,getAudios:p,getAudioForVideo:j,getUniqueHeights:l,getAvailableQualities:k}}),m(n[147],[],function(){function a(a){var b=j.length;j&&b&&a>=0&&a<b?(l=a,k=j[l]):(l=-1,k=null)}function b(){c(k.name)}function c(b){var c=d(b);c=c===-1?0:c,a(c)}function d(a){var b,c=j.length,d=-1;for(b=0;b<c;b++)if(a===j[b].name){l=b;break}return d}function e(){l===-1?a(0):b()}function f(){var b=(l+1)%j.length;return a(b),k}function g(a){return a?c(a):e(),k}function h(a){j.push(a)}function i(){j=[]}var j,k,l=-1;return{selectNext:f,select:g,store:h,clear:i}}),m(n[134],[n[17],n[114],n[19],n[13],n[135],n[136],n[139],n[146],n[147]],function(a,b,c,d,e,f,g,h,i){function j(a){return(!q(a)&&"offline"!==a||(y="offline"!==a,y!==z&&(z=y,b.send(b.types.EVENT,b.events.LIVE,y),y&&(x=void 0)),"offline"!==a))&&(p(a)&&b.send(b.types.EVENT,b.events.RECORDED_READY),!0)}function k(a){var b=o(a);b&&b!==x&&(x=1e3*b,m())}function l(a){j(a)&&(a=f.convertModule(a),a&&(n(a),m()))}function m(){(h.hasAudio()||h.hasVideo())&&c.send(c.types.EVENT,c.events.REPRESENTATION_UPDATE)}function n(a){w=a.streamType,v=a.hashes,x=o(a),h.clear(),e(a.streams,function(a){h.store(a)}),i.clear(),a.providers&&e(a.providers,function(a){i.store(a)})}function o(a){return a.hasOwnProperty("videoLength")?a.videoLength:x}function p(a){var b=a.mid;return b&&b.indexOf("recorded")>-1}function q(a){var b=a.mid;return b&&b.indexOf("channel")>-1}function r(){return v}function s(){return x}function t(){return w}function u(){v=null,w=null,x=null,y=null,z=null,h.clear(),i.clear()}var v,w,x,y,z,A=d("streamparser");return{init:function(){A("init"),b.on(b.types.DATA,b.events.STREAM_UPDATE,l),b.on(b.types.DATA,b.events.META_UPDATE,k)},getHashes:r,getVideoLength:s,getStreamType:t,reset:u}}),m(n[149],[n[13],n[78]],function(b,c){function d(b,d,g){f("resolving: "+b+" - "+g);var h=c(),i=a.setTimeout(h.ontimeout,5e3);h.ontimeout=function(){a.clearTimeout(i),f("timeout: "+b+" - ",g),d&&d({status:e.status.TIMEOUT,url:b,resolved:this.responseText})},h.onreadystatechange=function(){4===this.readyState&&(a.clearTimeout(i),200===this.status?(f("resolved: "+b+" - ",this.responseText),d&&d({status:e.status.SUCCESS,url:b,resolved:this.responseText})):(f("resolve failed: "+b+" - ",this.responseText),d&&d({status:e.status.ERROR,url:b,resolved:this.responseText})))},h.open("GET",g,!0),h.send(null)}var e,f=b(n[149]);return e={resolve:d,status:{SUCCESS:"success",ERROR:"error",TIMEOUT:"timeout"}}}),m(n[151],[n[16],n[13]],function(a,b){function c(){g=a.get(h)||[],i("Stored ecdn locations:",g)}function d(){0!==g.length&&a.set(h,g)}function e(a){var b=g.indexOf(a);return b>0&&g.splice(b,1),0!==b&&7===g.unshift(a)&&g.pop(),d(),f()}function f(){return[].concat(g)}var g,h="ecdnLocations",i=b(n[151]);return c(),{add:e,get:f}}),m(n[153],[n[13],n[78]],function(b,c){function d(a,b,c){a.status=b,a.time=c,g("Ping completed - status: "+b+", url:"+a.url+", time: "+c),a.onCompleted(a)}function e(a){return{requesttype:a.requesttype?a.requesttype:h.requesttype,timeout:a.timeout?a.timeout:h.timeout,testfile:a.testfile?a.testfile:h.testfile,data:a.data}}function f(b,f,k){var l,m,n=!1,o=k?e(k):h,p=b+("/"!==b.charAt(b.length-1)?"/"+o.testfile:o.testfile),q=c(),r={status:"init",url:b,time:-1,location:f,data:o.data,onCompleted:function(){},start:function(){g("Ping: ",p),l=(new j).getTime(),q.open(o.requesttype,p+"?rnd="+i.random(),!0),q.send(null),m=a.setTimeout(q.ontimeout,o.timeout)},stop:function(){n=!0,q.abort()}};return q.ontimeout=function(){n||(n=!0,q.abort(),a.clearTimeout(m),d(r,"timeout",-1))},q.onreadystatechange=function(b){var c=(new j).getTime()-l;4!==b.target.readyState||n||(a.clearTimeout(m),n=!0,200===b.target.status?k&&k.dropFirst?(k.dropFirst=!1,n=!1,r.start()):d(r,"success",c):d(r,"error",-1))},r}var g=b("htmlplayback/ecdn/speedtest"),h={requesttype:"HEAD",timeout:1e3,testfile:"ping"};return f}),m(n[152],[n[153]],function(a){function b(a,b,c){return n[a]||(n[a]=[]),n[a].indexOf(b)===-1&&(n[a].push(b),j.push({location:a,url:b,options:c}),!0)}function c(){return j}function d(){!k&&j.length&&l<j.length&&(k=!0,f())}function e(a){var b,c;for(o.onProgress(a),b=0;b<m.length;b++)if(c=m[b],c.location===a.location&&c.url===a.url){m.splice(b,1);break}f()}function f(){var b,c;m.length<i&&l<j.length&&k?(c=j[l],b=a(c.url,c.location,c.options),m.unshift(b),l++,b.onCompleted=e,b.start(),f()):0===m.length&&l>=j.length&&k&&(g(),o.onFinished())}function g(){if(k)for(k=!1;m.length;)m.shift().stop(),l--}function h(){g(),l=0,m=[],j=[],n={}}var i=6,j=[],k=!1,l=0,m=[],n={},o={add:b,getItems:c,start:d,stop:g,clear:h,onProgress:function(){},onFinished:function(){},status:{READY:"ready",STARTED:"started",STOPPED:"stopped",COMPLETED:"completed"}};return o}),m(n[150],[n[13],n[137],n[151],n[152]],function(a,b,c,d){function e(){var a,b=c.get(),d=[];if(b.length)for(a=0;a<b.length;a++)x.hasOwnProperty(b[a])&&d.push(b[a]);return d}function f(a,b){return h(a,b,"time")}function g(a,b){return h(a,b,"average")}function h(a,b,c){return a.hasOwnProperty(c)&&b.hasOwnProperty(c)?a[c]>b[c]?1:a[c]<b[c]?-1:0:0}function j(a){for(var b,c=[];a.length>0;)b=i.floor(i.random()*a.length),c.push(a[b]),a.splice(b,1);return c}function k(a){var b=[];return a.forEach(function(a){a.results.forEach(function(a){b.push({url:a.url,time:a.time})})}),b}function l(a,b,c){return c=c?c:{},a.forEach(function(a){var d;c[a[b]]||(c[a[b]]={results:[],sum:0,average:0}),d=c[a[b]],d.results.push(a),d.sum+=a.time,d.average=d.sum/d.results.length}),c}function m(a){var b,c=[];for(b in a)a[b].results.sort(f),c.push(a[b]);return c.sort(g)}function o(a){C("multiPing result:",a),"success"===a.status&&z.push(a)}function p(){var a,b,d,e,g;if(A++,A<D)return void q();e=l(z,"location");for(a in e){g=l(e[a].results,"url"),e[a].results=[];for(b in g)e[a].results.push({location:a,url:b,time:g[b].average});e[a].results=e[a].results.sort(f)}d=m(e),C("MultiPing results:",d),c.add(d[0].results[0].location),w.onSelected(k(d)),w.onFinished()}function q(){d.clear(),d.onProgress=o,d.onFinished=p,y.forEach(function(a){d.add(a.location,a.url,{requesttype:"GET"})}),C("Start multiPing round: "+A,d.getItems()),d.start()}function r(){A=0,z=[],q()}function s(a){C("Singleping result:",a),"success"===a.status&&(0!==y.length||B||w.onSelected([{url:a.url,time:a.time}]),y.push(a))}function t(){var a,b;0!==y.length?(b=l(y,"location"),a=m(b),C("Singleping results:",a),B||w.onSelected(k([a[0]])),r()):(w.onSelected([]),w.onFinished())}function u(){var a,b=0,c=!1,f=e();y=[];for(a in x)x[a]=j(x[a]),f.indexOf(a)===-1&&f.push(a);d.clear(),d.onProgress=s,d.onFinished=t;do c=!1,f.forEach(function(a){x[a]&&x[a][b]&&(d.add(a,x[a][b],{dropFirst:!0}),c=!0)}),b++;while(c);C("Start singelpings:",d.getItems()),d.start()}function v(a,b){B=b,C("selector update: ",a),x=a,u()}var w,x,y,z,A,B=!1,C=a(n[150]),D=3;return w={update:v,onSelected:function(){},onFinished:function(){}}}),m(n[148],[n[13],n[149],n[150],n[8]],function(a,b,d,g){function h(a){return 0===a.indexOf("ecdn-")}function k(){var a,b;G&&z.stream&&z.stream.providers&&(K("Decorate stream module with ecdn providers: "+JSON.stringify(G)),z.stream.providers=z.stream.providers.filter(function(a){return"uhs_tcdn"!==a.name&&!h(a.name)}),G.reverse().forEach(function(b){a=l(B,b.url),z.stream.providers.unshift({name:"ecdn-"+b.url.split("//")[1],url:a})}),G.reverse(),I&&(b=z.stream.providers[0].name)),f(E),E=null,G.length<1?(J=i.min(F,2*J),E=e(v,J)):J=5e3,x.onComplete(y,z,b)}function l(a,b){var d,e;return d=c.createElement("a"),d.href=a,e=d.pathname,d.href=b,d.pathname=e,d.href}function m(a){K("on ecdns selected:",a),G=a,k(),x.onStat({type:"overlay",data:a})}function o(){D=(new j).getTime(),I=!1,K("on ecdns selected. duration:",D-C+"ms"),x.onStat({type:"report",data:D-C})}function p(a){var c,e,f=!1,g=0;if(H=!0,a.status===b.status.SUCCESS&&a.resolved){try{c=JSON.parse(a.resolved)}catch(h){return void x.onComplete(y,z)}for(e in c)g++,""===e&&(f=!0);K("TCDN resolve completed:",c),1===g&&f?m([{url:c[""][0]}]):(d.onSelected=m,d.onFinished=o,d.update(c,I))}else x.onComplete(y,z)}function q(a){var c=y.split(".")[1],d=g.ssl?"https":"http",e=d+"://tcdn.ustream.tv/"+c+"/?protocol=http&version=2";b.resolve(a,p,e)}function r(a){A=a.to,a.from&&a.to&&h(a.from)&&!h(a.to)&&B&&!I&&(K("Player switched to a non ecdn provider from ecdn: "+a.from+" -> "+a.to),v())}function s(a){(a.providerName&&h(a.providerName)||404===a.code&&h(A))&&B&&!I&&(K("Ecdn provider failure: "+(a.providerName||A)),v())}function t(a){for(var b=0;b<a.length;b++)if("uhs_tcdn"===a[b].name)return a[b].url;return null}function u(a,b,c){y=a,z=b,G=[],D=null,C=(new j).getTime(),q(c)}function v(){y&&z&&B&&(K("Forced tests started."),I=!0,u(y,z,B))}function w(a,b){var c,d=a.indexOf("channel")>-1;if(d&&b&&b.stream&&b.stream.providers){if(c=!!D&&(new j).getTime()>D+F,B=t(b.stream.providers),B&&(c||a!==y))return void u(a,b,B);if(G.length&&y===a)return z=b,void k()}x.onComplete(a,b)}var x,y,z,A,B,C,D,E,F=3e5,G=[],H=!1,I=!1,J=5e3,K=a(n[148]);return x={update:w,onStat:function(){},onComplete:function(){},onProviderChange:r,onProviderFailure:s}}),m(n[155],[n[19],n[73]],function(a,b){function c(){var a=b();g=a[0],h=a[1]}function d(){c()}function e(){return g}function f(){return h}var g,h;return a.on(a.types.EVENT,"resize",d),c(),{getPlayerWidth:e,getPlayerHeight:f}}),m(n[156],[],function(){function a(a,e){var f;switch(e){case"mp4/segmented":f=b(a);break;case"flv/segmented":f=c(a);break;case"hls":case"flv/movie":d(a);break;default:f=null}return f}function b(a){var b;return b={contentType:a.contentType,codecs:a.codec,initUrl:e(a.initUrl),segmentUrl:e(a.segmentUrl),segmentLength:a.segmentLength}}function c(a){var b;return b={contentType:"video/flv",codecs:"",segmentUrl:e(a.segmentUrl),segmentLength:a.segmentLength}}function d(a){var b;return b={segmentUrl:a.segmentUrl},a.streamNameService&&(b.streamNameService=a.streamNameService),b}function e(a){var b;if(a)return b=a.split("_%"),3===b.length&&(b.splice(1,0,"_#segmentId#"),b.splice(3,0,"_#hashId#")),b.join("")}function f(a){g=a}var g;return{create:a,setVideoLength:f}}),m(n[154],[n[133],n[155],n[17],n[19],n[48],n[13],n[135],n[12],n[114],n[149],n[156],n[134],n[146],n[147]],function(a,b,c,d,e,f,g,h,j,k,l,m,n,o){function p(){N=o.select(),Q("selected provider: ",N),q(),E(),z()}function q(){var a;m.getVideoLength()&&m.getVideoLength()>=0?(a=m.getVideoLength(),a&&(O.contentLength=a),j.send(j.types.EVENT,"duration",O.contentLength/1e3)):delete O.contentLength}function r(){var a;J===-1&&(a=b.getPlayerHeight(),J=n.nearestHeight(a)),G&&H&&(J=n.nearestBitrate(H))}function s(){n.hasVideo()&&(L=n.getVideos()[J],L&&(M=L.chunkId))}function t(){n.hasAudio()&&(K=n.getAudioForVideo(L),K&&!M&&K.chunkId&&(M=K.chunkId))}function u(){var a,b,c=m.getStreamType();L&&(a=l.create(L,c),O.representations.push(a),P.width=L.width,P.height=L.height,P.videoCodec=a.codecs),K&&(b=l.create(K,c),O.representations.push(b),P.audioCodec=b.codecs)}function v(){switch(O.format=m.getStreamType(),s(),t(),O.format){case a.formats.HLS:O.url=L.initUrl;break;case a.formats.FLV_MOVIE:O.url=L.segmentUrl[0],O.seekParameter=N.seek.param;break;default:O.representations=[],O.segmentId=M,O.hashes=m.getHashes(),O.baseUrl=N.url,O.contentStart=0,u()}}function w(){k.resolve(O.url,x,O.streamNameService)}function x(a){a.status===k.status.SUCCESS&&a.resolved&&(O.url=a.resolved),delete O.streamNameService,y()}function y(){P.format=O.format,P.url=O.baseUrl||O.url,d.send(d.types.EVENT,"streamInfoUpdate",P),j.send(j.types.EVENT,j.events.PLAYBACK_DATA,O)}function z(){var a,b;n.getAvailableQualities().length!==n.getUniqueHeights().length&&(b=!0),a=h(n.getAvailableQualities(),function(a){return a.label=b?A(a):B(a),a.active=!0,a.selected=J===a.id&&!G,a}),!a||a.length<=1||(a.push({id:-1,label:e.getText("ui.qualityAuto"),height:0,active:!0,selected:G}),d.send(d.types.EVENT,"quality",a))}function A(a){return 100*i.round(a.bitrate/100)+"kbps"}function B(a){return 20*i.round(a.height/20)+"p"}function C(a){var b=.0078125*a.size/(a.time/1e3),c=0;I.push(b),I.length>5&&I.shift(),g(I,function(a){c+=a}),H=c/I.length,E()}function D(a){J=a[0],G=J===-1,E()}function E(){r(),v(),O.streamNameService?w():y()}function F(a){a||(N=o.selectNext()),E()}var G,H,I,J,K,L,M,N,O,P,Q=f("qos");return{init:function(){I=[],O={},G=!0,P={},H=0,J=-1,d.on(d.types.COMMAND,"quality",D),d.on(d.types.EVENT,d.events.REPRESENTATION_UPDATE,p),j.on(j.types.REPORT,j.events.REPORT_BANDWIDTH,C),j.on(j.types.COMMAND,"changeProvider",F),d.on(d.types.EVENT,"changeProvider",F)}}}),m(n[112],[n[17],n[113],n[35],n[28],n[26],n[22],n[23],n[19],n[13],n[94],n[115],n[116],n[114],n[127],n[128],n[131],n[132],n[134],n[148],n[154],n[82],n[93],n[133],n[75]],function(a,b,c,d,g,h,i,j,k,l,m,o,p,q,r,s,t,u,v,w,x,y,z,A){function B(a){var b,c=a.split("."),e={app:c[0],id:c[1],hid:c[2],connectParams:fa,longpoll:"1"===h.get(ga),sessionId:ustream.vars.sessionId,hash:g.getByContent("hash"),password:g.getByContent("channelPassword"),referrer:d,flotAddress:!!g.flot&&decodeURI(g.flot),bdtools:g.bdtools};C(fa),b=A(e),b.on(b.event.OPEN,i(E,null,a)),b.on(b.event.REJECT,i(F,null,a)),b.on(b.event.UPDATE,i(I,null,a)),b.on(b.event.LOG,i(D,null,a)),p.send(p.types.REPORT,p.events.UMS_CONNECT_START,a),b.connect(),ca("create ums connection",e)}function C(){var b=g.getByContent("channelPassword")?g.getByContent("channelPassword"):null;b&&(fa.password=b),"video"===a.offairType()?fa.isOffairRecorded=!0:fa.hasOwnProperty("isOffairRecorded")&&delete fa.isOffairRecorded,z.capabilities.indexOf(z.formats.MP4_SEGMENTED)!==-1?(fa.appId=3,fa.appVersion=1):z.capabilities.indexOf(z.formats.FLV_SEGMENTED)!==-1?(fa.appId=2,fa.appVersion=4):(fa.appId=11,fa.appVersion=2)}function D(){var a=Array.prototype.shift.call(arguments);ca("ums.log "+a+":",arguments)}function E(a,b){h.set(ga,b.longpoll?"1":"0",{expires:30}),p.send(p.types.REPORT,p.events.UMS_CONNECTED,a)}function F(a,b){ca("ums reject",a,b);var c,d,e,f,g,h,i=["reject","ipLock","geoLock","hashLock","passwordLock","referrerLock","sessionAuthLock","viewerHourLimitLock","nonexistent"],k=!1;for(ca("reject received"),c=0;c<b.length;++c){for(f=b[c],g="default",f.embedLimitExceeded&&k||(j.send(j.types.EVENT,"mediaReject",!0),k=!0),d=0;d<i.length;++d)if(e=i[d],f[e]){g=e.toLowerCase(),h=f[e];break}y.setScreen(g,h),p.send(p.types.REPORT,p.events.UMS_REJECT,{mid:a,send:h})}}function G(a,c){b.update(a,c)}function H(a){switch(a.type){case"overlay":j.send(j.types.EVENT,"ecdnResult",a.data);break;case"report":p.send(p.types.REPORT,p.events.REPORT_ECDN_TESTS,a.data)}}function I(a,b){v.onStat=H,v.onComplete=G,v.update(a,b[0]||b)}function J(){ca("setupFacadeHandlers"),p.on(p.types.EVENT,p.events.LIVE,function(b){var c;y.setLive(b),g.isLive=b,da=b,o.isStarted()&&o.destroy(),b&&(aa=a.getMid(),W(),c=A(aa),j.send(j.types.EVENT,"umsInfo",c.internals))}),p.on(p.types.DATA,p.events.ALLTIMETOTAL_UPDATE,function(a){y.allTimeTotalUpdate(a)}),p.on(p.types.DATA,p.events.VIEWERS_UPDATE,function(a){y.viewersUpdate(a)}),p.on(p.types.EVENT,p.events.CREATE_SLIDESHOW,function(a){y.startSlideShow(a)}),p.on(p.types.EVENT,p.events.DESTROY_SLIDESHOW,y.stopSlideShow),p.on(p.types.EVENT,p.events.CREATE_OFFAIR_VIDEO,function(a){var c;aa="recorded."+a,e(function(){b.create(aa),j.send(j.types.EVENT,"createOffairVideo"),B(aa),c=A(aa),j.send(j.types.EVENT,"content",["recorded",a]),j.send(j.types.EVENT,"umsInfo",c.internals)},1500)}),p.on(p.types.EVENT,p.events.DESTROY_OFFAIR_VIDEO,function(a){var b=A("recorded."+a);b.destroy(),j.send(j.types.EVENT,"destroyOffairVideo")}),p.on(p.types.DATA,p.events.THUMBNAIL_UPDATE,function(a){y.setThumbnail(a)}),p.on(p.types.DATA,p.events.LOGO_UPDATE,function(a){y.setLogo(a)}),p.on(p.types.DATA,p.events.BROADCASTER_UPDATE,function(a){a.featured&&(ea.featured=!0),y.setBroadcaster(a)}),p.on(p.types.DATA,p.events.META_UPDATE,function(a){a.title&&y.setTitle(a.title),a.offairContent&&(a.offairContent.pictures||a.offairContent.videos)&&s.init(a.offairContent),a.highlight&&y.setHighlight(a.highlight);var b={};for(var d in a)b[d]=a[d];b.data=a,ea.homepage=!1,ea.autoplay=g.autoplay,ea.countryCode=a.countryCode,ea.proBroadcaster=a.adFree,ea.mobile=c,ea.categories=a.category,ea.userName=a.userName,ea.contentLength=a.videoLength||555555,o.initialize(),o.update(ea),j.send(j.types.EVENT,"meta",b)}),p.on(p.types.DATA,p.events.AGELOCK_UPDATE,function(a){y.setScreen("ageLock",a)}),p.on(p.types.DATA,p.events.SHARE_UPDATE,function(a){y.setShare(a)}),p.on(p.types.EVENT,"loading",function(a){y.setLoading(a)}),p.on(p.types.EVENT,"duration",function(a){j.send(j.types.EVENT,"duration",a)}),p.on(p.types.EVENT,p.events.PLAYING,function(a){j.send(j.types.EVENT,"playing",a),p.send(p.types.REPORT,p.events.PLAYING,{mid:aa,send:a})}),p.on(p.types.EVENT,p.events.PROGRESS,function(a){j.send(j.types.EVENT,"progress",a),o&&o.update({contentProgress:a})}),p.on(p.types.EVENT,p.events.RECORDED_READY,function(){W()}),p.on(p.types.EVENT,l.AD_EVENT,M),p.on(p.types.EVENT,l.ADHOLDER_SHOW,function(){y.setAdHolderStyle("show")}),p.on(p.types.EVENT,l.ADHOLDER_VIDEO,function(){y.setAdHolderStyle("video")}),p.on(p.types.EVENT,l.ADHOLDER_HIDE,function(){y.setAdHolderStyle("hide")}),p.on(p.types.REPORT,p.events.REPORT_BUFFER_EMPTY,K),p.on(p.types.REPORT,p.events.REPORT_BUFFER_FULL,L),p.on(p.types.EVENT,p.events.VIDEO_FINISHED,function(){j.send(j.types.EVENT,"playing",!1),e(function(){y.setSeek(0),O(),p.send(p.types.EVENT,p.events.NEXT_OFFAIR_VIDEO)},1500)}),p.on(p.types.EVENT,p.events.CC_DETECTED,function(){j.send(j.types.EVENT,"cc");var b,c=[6540154,10414700],d=viewer.get("logic.media.modules","meta");c.indexOf(a.id())===-1&&(b={playerVersion:4,contentType:a.getType(),mediaId:a.id()},d&&d.data&&(b.userName=d.data.userName),mixpanel&&(mixpanel.track("ClosedCaption",b),ca("mixpanel",b)))})}function K(){f(ba),ba=e(i(y.setLoading,null,!0),3e3)}function L(){f(ba),y.setLoading(!1)}function M(a){ca("htmlplayback.onAdEvent",a),void 0!==a.contentPlaying&&(ca("htmlplayback.onAdEvent.contentPlaying",a.contentPlaying),y.setPlayingStatus(a.contentPlaying),a.contentPlaying?N():O()),void 0!==a.control&&(ca("htmlplayback.onAdEvent.control",a.control),y.setUiVisibility(a.control)),a.type!==l.types.VIDEO_STARTED&&a.type!==l.types.VIDEO_FINISHED||(ca("htmlplayback.onAdEvent.show/hide PMPromo"),y.setPMPromoVisibility(a.type===l.types.VIDEO_STARTED)),a.type===l.types.PREROLL_DONE&&(ca("htmlplayback.onAdEvent.prerolldone"),y.setPrerollDone(),y.setPlayingStatus(!0),j.send(j.types.COMMAND,"play"))}function N(){ca("onPlay()",o.isPrerollDone()),o.isPrerollDone()?(o.update({contentPlaying:!0}),p.send(p.types.COMMAND,p.events.PLAY)):W()}function O(){ca("onPause()",o.isPrerollDone()),o.isPrerollDone()&&(o.update({contentPlaying:!1}),p.send(p.types.COMMAND,p.events.PAUSE))}function P(a){o.update({contentVolume:a}),p.send(p.types.COMMAND,p.events.VOLUME,a)}function Q(a){p.send(p.types.COMMAND,p.events.SEEK,a)}function R(a){p.send(p.types.REPORT,p.events.SEEK,{mid:aa,send:a})}function S(){o.resize()}function T(a){o.offset(a)}function U(a){ca("onSetSession",a),o&&a[1]===!0&&o.update({premiumMember:!0})}function V(){ca("setupUiHandlers"),j.on(j.types.UI,"ready",function(){});var a=function(){};j.on(j.types.COMMAND,"play",N),j.on(j.types.COMMAND,"pause",O),j.on(j.types.COMMAND,"volume",P),j.on(j.types.COMMAND,"seek",Q),j.on(j.types.UI,"setSeek",R),j.on(j.types.COMMAND,"adOffset",T),j.on(j.types.EVENT,"resize",S),j.on(j.types.UI,"quality",i(a,null,"quality")),j.on(j.types.UI,"toggleCC",function(a){p.send(p.types.COMMAND,p.events.TOGGLE_CC,a)})}function W(){var a,c=!1;(aa.indexOf("recorded")>-1||da&&aa.indexOf("channel")>-1)&&(c=!0),c&&(a=null!==b.get(aa,"meta"),ca("checkAvailability - autoplay: "+g.autoplay+" - ads.isStarted: "+o.isStarted()+" - meta: "+a),g.autoplay&&!o.isStarted()&&a&&o.start())}function X(){_=!0,ca("ui loaded"),r.init(),w.init(),u.init(),J(),V(),m.init(),Y(),x.screen.on(x.screen.event.RETRY,Y),j.send(j.types.UI,"show"),j.send(j.types.EVENT,"ready",!0)}function Y(){var c;_&&(aa=a.getMid(),c=A(aa),c&&c.destroy(),t.init(aa),b.create(aa),u.reset(),B(aa),x.screen.unset(),j.send(j.types.EVENT,"hidePlayScreen"),j.send(j.types.EVENT,"content",[a.app(),a.id()]))}function Z(a){var c=A(a);ca("dispose: ",a),da=!1,y.setLive(!1),b.destroy(a),s.destroy(),c&&c.destroy(),t.reset(),o.isStarted()&&o.destroy()}function $(b){var c=b[0],d=b.slice(1);ca("Load media:",b),a.update(c,d),aa!==a.getMid()&&(g.autoplay=!0,Z(aa)),Y()}var _,aa,ba,ca=k(n[112]),da=!1,ea={featured:!1},fa={appId:3,appVersion:1},ga="mte_use_lonpoll";return x.init(),q.init(),j.on(j.types.UI,"loaded",X),j.on(j.types.COMMAND,"load",$),j.on(j.types.COMMAND,"setSession",U),{}}),JSON=JSON||a.JSON,"object"!=typeof JSON&&(JSON={}),function(){"use strict";function b(a){return a<10?"0"+a:a}function c(){return this.valueOf()}function d(a){return g.lastIndex=0,g.test(a)?'"'+a.replace(g,function(a){var b=k[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function e(a,b){var c,f,g,j,k,m=h,n=b[a];switch(n&&"object"==typeof n&&"function"==typeof n.toJSON&&(n=n.toJSON(a)),
"function"==typeof l&&(n=l.call(b,a,n)),typeof n){case"string":return d(n);case"number":return isFinite(n)?String(n):"null";case"boolean":case"null":return String(n);case"object":if(!n)return"null";if(h+=i,k=[],"[object Array]"===Object.prototype.toString.apply(n)){for(j=n.length,c=0;c<j;c+=1)k[c]=e(c,n)||"null";return g=0===k.length?"[]":h?"[\n"+h+k.join(",\n"+h)+"\n"+m+"]":"["+k.join(",")+"]",h=m,g}if(l&&"object"==typeof l)for(j=l.length,c=0;c<j;c+=1)"string"==typeof l[c]&&(f=l[c],g=e(f,n),g&&k.push(d(f)+(h?": ":":")+g));else for(f in n)Object.prototype.hasOwnProperty.call(n,f)&&(g=e(f,n),g&&k.push(d(f)+(h?": ":":")+g));return g=0===k.length?"{}":h?"{\n"+h+k.join(",\n"+h)+"\n"+m+"}":"{"+k.join(",")+"}",h=m,g}}"function"!=typeof j.prototype.toJSON&&(j.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+b(this.getUTCMonth()+1)+"-"+b(this.getUTCDate())+"T"+b(this.getUTCHours())+":"+b(this.getUTCMinutes())+":"+b(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=c,Number.prototype.toJSON=c,String.prototype.toJSON=c);var f,g,h,i,k,l;"function"!=typeof JSON.stringify&&(g=/[\\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,k={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(a,b,c){var d;if(h="",i="","number"==typeof c)for(d=0;d<c;d+=1)i+=" ";else"string"==typeof c&&(i=c);if(l=b,b&&"function"!=typeof b&&("object"!=typeof b||"number"!=typeof b.length))throw new Error("JSON.stringify");return e("",{"":a})}),"function"!=typeof JSON.parse&&(f=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,JSON.parse=function(b,c){function d(a,b){var e,f,g=a[b];if(g&&"object"==typeof g)for(e in g)Object.prototype.hasOwnProperty.call(g,e)&&(f=d(g,e),void 0!==f?g[e]=f:delete g[e]);return c.call(a,b,g)}var e;if(b=String(b),f.lastIndex=0,f.test(b)&&(b=b.replace(f,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(b.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return e=a.eval("("+b+")"),"function"==typeof c?d({"":e},""):e;throw new SyntaxError("JSON.parse")})}(),m(n[158],[],function(){return JSON}),m(n[159],[n[35],n[26],n[17],n[25],n[13],n[19],n[82],n[8],n[22],n[75]],function(c,d,e,f,g,h,i,k,m,o){function p(a){return z.mte_html_playback.forceCids.indexOf(a)!=-1}function q(){var a=e.getMid().split("."),b={app:a[0],id:a[1],hid:a[2],connectParams:{},longpoll:"1"===m.get(D)};x=(new j).getTime(),w=o(b),A("Beta cluster check started."),w.on(w.event.REJECT,s),w.on(w.event.UPDATE,r),w.connect(),A("create ums connection",b)}function r(a){var b;if(a=a[0]||a,a.meta){var c=a.meta.umsId&&a.meta.umsId.indexOf("beta")>-1,e=a.meta.ownerChannelId&&p(+a.meta.ownerChannelId);c||e?(b="htmlplayback",d.htmlplayback=!0):(b="qrsl",d.htmlplayback=!1),w.destroy(),y=(new j).getTime()-x,A("beta cluster check finished ("+y+"ms). umsId: "+a.meta.umsId+" Selected viewerModule: "+b),t(b)}}function s(){w.destroy(),y=(new j).getTime()-x,A("beta cluster check rejected ("+y+"ms). Selected viewerModule: qrsl"),t("qrsl")}function t(a){C&&!d.htmlplayback?(i.init(),h.on(h.types.UI,"loaded",function(){u(a)})):u(a)}function u(b){l(["viewer/"+b],function(b){v=b,a.viewer=v})}var v,w,x,y,z=ustream.vars,A=g(n[159]),B=!1,C=f.isEnabled(),D="mte_use_lonpoll",E=d.htmlplayback,F=d.betaChannel,G=e.isCid()&&p(e.id()),H=!d.subscription,I=e.isVid();return A("enviroment",k,!0),b.href.indexOf("disablehtmlplayback=1")>-1&&(B=!0),d.htmlplayback||(d.htmlplayback=a.location.href.indexOf("htmlplayback=")>-1),c?t("html"):C?!B&&(F||G||E)?(d.htmlplayback=!0,u("htmlplayback")):B||!I&&!H?(d.htmlplayback=!1,t("qrsl")):q():u("swf"),{getInstance:function(){return"function"==typeof v?v():v}}}),m(n[157],[n[158]],function(b){return function(){l([n[159]],function(b){var e=d.userAgent.toLowerCase(),f=a.location.search,g=/android/.test(e),h=/iphone|ipad|ipod/.test(e)||f.indexOf("forceIos")>-1,i=h||g||f.indexOf("forceTouch")>-1;c.body&&i&&(c.body.className+=" touch")})}}),m(n[160],[],function(){var a=ustream.vars;return function(){return{title:a.labelNoTranscoded.lead,text:a.labelNoTranscoded.text}}()}),m(n[161],[n[26],n[13],n[29],n[32],n[33],n[7],n[16],n[65],n[8],n[69]],function(a,b,c,d,e,f,g,h,i,k){function l(b){p("hash response ",b);var c,d=14,e=!1;if(b)for(c=b.length;--c;)b[c].hash&&(e=!0),b[c].hashExpire&&(d=new j(1e3*b[c].hashExpire));return e?(g.set(g.getHashStorageName(),JSON.stringify(b),{expires:d}),a.update(),!0):(h(!1),alert(m.hashLockSimpleText.usrPwdError),!1)}var m=ustream.vars,o=function(){},p=b(n[161]),q=i.placeholder,r='<form id="Hashlock"><p><strong>%lead%</strong><br /><br />%usrlabel%<input type="text" id="Usr" placeholder="%usr%" autocorrect="off" /><br />%pwdlabel%<input type="password" id="Pwd" placeholder="%pwd%" /><br /><button id="HashlockButton">%submit%</button></p></form>';return function(){var a=m.hashLockSimpleText,b=r,g=o,i=function(a){l(a)&&g.call(null)},j=function(a){a.preventDefault&&a.preventDefault();var b=c("Usr").value,d=c("Pwd").value;return k.get(m.hashLockData.url,{user:b,pw:d},i),h(!0),!1};return b=f(b,/%lead%/g,a.formTitle),b=f(b,/%usr%/g,a.usrInput),b=f(b,/%pwd%/g,a.pwdInput),b=f(b,/%submit%/g,a.submit),q?(b=f(b,/%usrlabel%/g,""),b=f(b,/%pwdlabel%/g,"")):(b=f(b,/%usrlabel%/g,a.usrInput+"<br />"),b=f(b,/%pwdlabel%/g,a.pwdInput+"<br />")),{html:b,prepare:function(){},setup:function(a){g=a;var b,e;p("setup "),b=c("Hashlock"),e=c("HashlockButton"),d(b,"submit",j),d(e,"click",j)},destroy:function(){var a=c("Hashlock");p("destroy "),e(a,"submit",j)}}}()}),m(n[162],[n[94],n[19]],function(a,b){return function(){function c(){f.addClass("shown")}function d(){f.addClass("video")}function e(){f.removeClass("shown"),f.hasClass("video")&&f.removeClass("video")}var f;return{init:function(g){f=g,b.on(b.types.EVENT,a.ADHOLDER_SHOW,function(){c()}),b.on(b.types.EVENT,a.ADHOLDER_VIDEO,function(){d()}),b.on(b.types.EVENT,a.ADHOLDER_HIDE,function(){e()})}}}}),m(n[163],[],function(){return function(){var a;return{init:function(b){a=b}}}}),m(n[164],[n[26],n[48],n[32],n[19],n[82],n[25]],function(a,b,d,e,f,g){var h='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="xMidYMid" width="24" height="24" viewBox="0 0 24 24"><path class="full" d="M16.383,8.969 C16.383,8.969 19.000,8.969 19.000,8.969 C19.552,8.969 20.000,9.416 20.000,9.969 C20.000,10.521 19.552,10.969 19.000,10.969 C19.000,10.969 14.088,10.969 14.088,10.969 C13.802,11.005 13.506,10.928 13.286,10.708 C13.093,10.514 13.002,10.258 13.007,10.004 C13.007,9.992 13.000,9.981 13.000,9.969 C13.000,9.969 13.000,4.969 13.000,4.969 C13.000,4.416 13.448,3.969 14.000,3.969 C14.552,3.969 15.000,4.416 15.000,4.969 C15.000,4.969 15.000,7.615 15.000,7.615 C15.000,7.615 18.348,4.253 18.348,4.253 C18.725,3.874 19.337,3.874 19.714,4.253 C20.091,4.631 20.091,5.245 19.714,5.624 C19.714,5.624 16.383,8.969 16.383,8.969 ZM10.000,19.969 C9.448,19.969 9.000,19.521 9.000,18.969 C9.000,18.969 9.000,16.345 9.000,16.345 C9.000,16.345 5.652,19.708 5.652,19.708 C5.275,20.087 4.663,20.087 4.286,19.708 C3.909,19.329 3.909,18.715 4.286,18.336 C4.286,18.336 7.640,14.969 7.640,14.969 C7.640,14.969 5.000,14.969 5.000,14.969 C4.448,14.969 4.000,14.521 4.000,13.969 C4.000,13.416 4.448,12.969 5.000,12.969 C5.000,12.969 10.000,12.969 10.000,12.969 C10.005,12.969 10.010,12.972 10.015,12.972 C10.268,12.968 10.521,13.059 10.714,13.253 C10.904,13.444 10.997,13.695 10.995,13.945 C10.995,13.953 11.000,13.960 11.000,13.969 C11.000,13.969 11.000,18.969 11.000,18.969 C11.000,19.521 10.552,19.969 10.000,19.969 Z" fill-rule="evenodd" fill="#ffffff"/><path class="normal" d="M20.000,10.000 C20.000,10.552 19.552,11.000 19.000,11.000 C18.448,11.000 18.000,10.552 18.000,10.000 C18.000,10.000 18.000,7.353 18.000,7.353 C18.000,7.353 14.652,10.716 14.652,10.716 C14.275,11.095 13.663,11.095 13.286,10.716 C12.909,10.337 12.909,9.723 13.286,9.345 C13.286,9.345 16.617,6.000 16.617,6.000 C16.617,6.000 14.000,6.000 14.000,6.000 C13.448,6.000 13.000,5.552 13.000,5.000 C13.000,4.448 13.448,4.000 14.000,4.000 C14.000,4.000 18.912,4.000 18.912,4.000 C19.198,3.964 19.494,4.041 19.714,4.261 C19.907,4.455 19.998,4.710 19.993,4.965 C19.993,4.977 20.000,4.988 20.000,5.000 C20.000,5.000 20.000,10.000 20.000,10.000 ZM11.000,19.000 C11.000,19.552 10.552,20.000 10.000,20.000 C10.000,20.000 5.000,20.000 5.000,20.000 C4.995,20.000 4.990,19.997 4.985,19.997 C4.732,20.001 4.479,19.909 4.286,19.716 C4.096,19.525 4.003,19.274 4.005,19.024 C4.005,19.015 4.000,19.008 4.000,19.000 C4.000,19.000 4.000,14.000 4.000,14.000 C4.000,13.448 4.448,13.000 5.000,13.000 C5.552,13.000 6.000,13.448 6.000,14.000 C6.000,14.000 6.000,16.624 6.000,16.624 C6.000,16.624 9.348,13.261 9.348,13.261 C9.725,12.882 10.337,12.882 10.714,13.261 C11.091,13.640 11.091,14.253 10.714,14.632 C10.714,14.632 7.360,18.000 7.360,18.000 C7.360,18.000 10.000,18.000 10.000,18.000 C10.552,18.000 11.000,18.448 11.000,19.000 Z" fill-rule="evenodd" fill="#ffffff"/></svg>';return function(){function i(){return c.fullScreen||c.webkitIsFullScreen||c.mozFullScreen||c.msFullscreenElement}function j(){var a=f.getBody();i()?(l.attr("title",o),a.addClass("fullscreen-mode"),l.addClass("opened")):(l.attr("title",m),a.removeClass("fullscreen-mode"),l.removeClass("opened")),e.send(e.types.UI,"fullscreenChange",i()),e.send(e.types.UI,"repositionSeekbar")}function k(){var a=f.getBody()[0];i()?c.exitFullscreen?c.exitFullscreen():c.webkitExitFullscreen?c.webkitExitFullscreen():c.mozCancelFullScreen?c.mozCancelFullScreen():c.msExitFullscreen&&c.msExitFullscreen():a.requestFullscreen?a.requestFullscreen():a.webkitRequestFullscreen?a.webkitRequestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.msRequestFullscreen&&a.msRequestFullscreen(),e.send(e.types.UI,"mouseStop")}var l,m=b.getText("ui.fullscreen"),n=b.getText("ui.disabledFullscreen"),o=b.getText("ui.exitFullscreen");return d(c,"fullscreenchange",j),d(c,"webkitfullscreenchange",j),d(c,"mozfullscreenchange",j),d(c,"MSFullscreenChange",j),{getTemplate:function(){return h},init:function(b){return l=b,l.addClass("shown"),a.allowfullscreen&&g.isFullScreenEnabled()?(l.attr("title",m),b.closest("#bottomContainer").length&&e.on(e.types.UI,"mouseDblClick",k),void l.on("click",k)):(l.attr("title",n),void l.addClass("disabled"))}}}}),m(n[165],[n[17],n[7],n[19]],function(a,b,c){var d='<div class="trigger"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="xMidYMid" width="24" height="24" viewBox="0 0 24 24"><g id="play"><path class="btn play-btn" d="M17.178,10.775 C17.178,10.775 7.973,5.287 7.973,5.287 C6.894,4.643 6.010,5.128 6.009,6.364 C6.009,6.364 6.000,17.669 6.000,17.669 C5.999,18.906 6.877,19.384 7.951,18.732 C7.951,18.732 17.187,13.130 17.187,13.130 C18.261,12.478 18.257,11.419 17.178,10.775 Z" fill-rule="evenodd" fill="#ffffff"/><path class="btn pause-btn" d="M17.000,19.000 C17.000,19.000 15.000,19.000 15.000,19.000 C14.448,19.000 14.000,18.552 14.000,18.000 C14.000,18.000 14.000,6.000 14.000,6.000 C14.000,5.448 14.448,5.000 15.000,5.000 C15.000,5.000 17.000,5.000 17.000,5.000 C17.552,5.000 18.000,5.448 18.000,6.000 C18.000,6.000 18.000,18.000 18.000,18.000 C18.000,18.552 17.552,19.000 17.000,19.000 ZM9.000,19.000 C9.000,19.000 7.000,19.000 7.000, 19.000 C6.448,19.000 6.000,18.552 6.000,18.000 C6.000,18.000 6.000,6.000 6.000,6.000 C6.000,5.448 6.448,5.000 7.000,5.000 C7.000,5.000 9.000,5.000 9.000,5.000 C9.552,5.000 10.000,5.448 10.000,6.000 C10.000,6.000 10.000,18.000 10.000,18.000 C10.000,18.552 9.552,19.000 9.000,19.000 Z" fill-rule="evenodd" fill="#ffffff"/></g></svg></div>',e=d;return function(){function b(b){a.isContentPlayable()&&void 0!==j&&j!==b&&c.send(c.types.UI,"showStatusAnimation",b?"play":"pause"),j=b,h.toggleClass("playing",j)}function d(){a.isContentPlayable()&&c.send(c.types.COMMAND,j?"pause":"play")}function f(a){32===a.keyCode&&d()}function g(a){i=a.length?a[0]:null}var h,i,j;return{getTemplate:function(){return e},init:function(a){h=a,c.on(c.types.EVENT,"playing",b),c.on(c.types.EVENT,"content",g),a.closest("#middleContainer").length||(c.on(c.types.UI,"mouseClick",function(){"recorded"!=i||$("#middleOverlay").closest("#ComponentsContainer.hovered").length||d()}),c.on(c.types.UI,"keyDown",f)),h.on("click",d)}}}}),m(n[166],[n[26],n[7],n[19],n[82]],function(a,b,c,d){var e='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="xMidYMid" width="36" height="36" viewBox="0 0 36 36"><g id="play-circle-large"><path d="M18.001,32.000 C10.261,32.000 3.987,25.732 3.987,18.000 C3.987,10.268 10.261,4.000 18.001,4.000 C25.741,4.000 32.015,10.268 32.015,18.000 C32.015,25.732 25.741,32.000 18.001,32.000 ZM18.001,7.000 C11.919,7.000 6.989,11.925 6.989,18.000 C6.989,24.076 11.919,29.001 18.001,29.001 C24.083,29.001 29.013,24.076 29.013,18.000 C29.013,11.925 24.083,7.000 18.001,7.000 ZM22.212,18.765 C22.212,18.765 16.236,22.656 16.236,22.656 C15.540,23.108 14.972,22.777 14.973,21.917 C14.973,21.917 14.979,14.066 14.979,14.066 C14.979,13.208 15.551,12.871 16.250,13.318 C16.250,13.318 22.206,17.130 22.206,17.130 C22.905,17.577 22.907,18.313 22.212,18.765 Z" id="path-1" class="cls-4" fill-rule="evenodd" fill="#fff"/></g></svg>',f='<div class="play-icon">'+e+'</div><div class="title"></div>';return function(){function b(a){j=a,i.find(".title").text(a.title),l||g()}function e(){n.removeClass("autoplay-false"),i.removeClass("shown"),l=!0}function g(){a.autoplay||(l=!1,n.addClass("autoplay-false"),j&&i.addClass("shown"))}function h(){a.autoplay=!0,c.send(c.types.COMMAND,"play"),i.removeClass("shown"),c.send(c.types.UI,"loading",!0)}var i,j,k=!1,l=!1,m=!1,n=d.getBody();return{getTemplate:function(){return f},init:function(d){i=d,c.on(c.types.EVENT,"meta",b),c.on(c.types.EVENT,"createSlideShow",function(){var a=j&&j&&j.offairContent;return a&&a.videos&&a.videos.length?void i.find(".title").html(""):(e(),c.send(c.types.UI,"hideControls"),void(k=!0))}),c.on(c.types.EVENT,"live",function(b){b&&k&&(c.send(c.types.UI,"show"),g(),k=!1),a.showtitle&&i.addClass("title-shown")}),c.on(c.types.EVENT,"playing",function(a){l||(e(),l=!0)}),c.on(c.types.EVENT,"content",function(b){"recorded"===b[0]&&a.showtitle&&i.addClass("title-shown")}),c.on(c.types.UI,"chromeThrottle",function(a){m=a,m&&!a&&i.hasClass("shown")&&h()}),c.on(c.types.EVENT,"hidePlayScreen",e),c.on(c.types.UI,"setTitleVisibility",function(a){i.toggleClass("title-shown",a)}),i.on("click",h)}}}}),m(n[167],[n[19],n[88]],function(a,b){return function(){function c(c,d){a.send(a.types.UI,"closeOverlays"),h.html(c).addClass("shown"),b(h,{vertical:"center",horizontal:"center"}),d||e(g,3e3)}function d(a){c(a)}function f(a){c(a,!0)}function g(){h.removeClass("shown")}var h;return{init:function(b){h=b,a.on(a.types.UI,"showMessage",d),a.on(a.types.UI,"showPermanentMessage",f),a.on(a.types.UI,"hideMessage",g)}}}}),m(n[169],[n[19]],function(a){return a.on(a.types.UI,"closePopovers",function(){var a=$(".popover-container");a.removeClass("animated opened")}),function(b,c){function d(){w.addClass("popover-container"),c.hover?(s=c.hoverShowDelay||0,g()):h()}function g(){w.on("mouseenter",n).on("mouseleave",o)}function h(){w.on("click",".trigger",p)}function i(){var a=x[0].clientWidth||x[0].offsetWidth,b=x[0].clientHeight||x[0].offsetHeight;x.css({top:-(b+10),marginLeft:-(a/2)})}function j(){f(t)}function k(){t=e(function(){q()},s)}function l(){f(u)}function m(){l(),u=e(function(){r()},1e3)}function n(a){l(),k()}function o(a){j(),m()}function p(a){w.hasClass("opened")?r():q()}function q(){w.hasClass("opened")||(a.send(a.types.UI,"closePopovers"),a.send(a.types.UI,"onPopoverOpen",w.attr("id")),f(v),w.addClass("opened"),e(function(){w.addClass("animated")},0),i())}function r(){w.removeClass("animated"),v=e(function(){w.removeClass("opened"),a.send(a.types.UI,"onPopoverClose",w.attr("id"))},200)}var s,t,u,v,w=b,x=w.find(".popover");return c||(c={}),x.data("hide",r),x.data("show",q),d(),{element:x,clearShowTimeout:j,startShowTimeout:k,clearHideTimeout:l,startHideTimeout:m,show:q,hide:r}}}),m(n[168],[n[7],n[19],n[169]],function(a,b,c){var d='<div class="trigger"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="xMidYMid" width="24" height="24" viewBox="0 0 24 24"><g id="hq"><path d="M20.000,18.000 C20.000,18.000 4.000,18.000 4.000,18.000 C3.448,18.000 3.000,17.552 3.000,17.000 C3.000,17.000 3.000,7.000 3.000,7.000 C3.000,6.448 3.448,6.000 4.000,6.000 C4.000,6.000 20.000,6.000 20.000,6.000 C20.552,6.000 21.000,6.448 21.000,7.000 C21.000,7.000 21.000,17.000 21.000,17.000 C21.000,17.552 20.552,18.000 20.000,18.000 ZM11.372,8.957 C11.372,8.957 9.725,8.957 9.725,8.957 C9.725,8.957 9.725,11.206 9.725,11.206 C9.725,11.206 7.820,11.206 7.820,11.206 C7.820,11.206 7.820,8.957 7.820,8.957 C7.820,8.957 6.172,8.957 6.172,8.957 C6.172,8.957 6.172,15.025 6.172,15.025 C6.172,15.025 7.820,15.025 7.820,15.025 C7.820,15.025 7.820,12.551 7.820,12.551 C7.820,12.551 9.725,12.551 9.725,12.551 C9.725,12.551 9.725,15.025 9.725,15.025 C9.725,15.025 11.372,15.025 11.372,15.025 C11.372,15.025 11.372,8.957 11.372,8.957 ZM17.040,9.704 C16.510,9.206 15.758,8.957 14.784,8.957 C14.784,8.957 12.684,8.957 12.684,8.957 C12.684,8.957 12.684,15.025 12.684,15.025 C12.684,15.025 14.647,15.025 14.647,15.025 C15.657,15.025 16.441,14.751 16.998,14.203 C17.556,13.655 17.835,12.875 17.835,11.862 C17.835,10.921 17.570,10.202 17.040,9.704 ZM14.689,13.680 C14.689,13.680 14.323,13.680 14.323,13.680 C14.323,13.680 14.323,10.281 14.323,10.281 C14.323,10.281 14.801,10.281 14.801,10.281 C15.249,10.281 15.583,10.415 15.803,10.683 C16.023,10.952 16.133,11.364 16.133,11.920 C16.133,12.515 16.017,12.957 15.784,13.246 C15.552,13.535 15.187,13.680 14.689,13.680 Z" id="path-1" class="cls-4" fill-rule="evenodd" fill="#fff"/></g></svg></div><div class="popover bottom"></div>';return function(){function a(a){if(a){a&&(e.addClass("shown"),b.send(b.types.UI,"repositionSeekbar"));var c='<ul class="list select">';for(var d in a)c+="<li "+(a[d].selected?'class="active"':"")+' data-value="'+a[d].id+'">'+a[d].label+"</li>",a[d].active&&(a[d].height>=720?e.hasClass("hd")||e.addClass("hd"):e.hasClass("hd")&&e.removeClass("hd"));c+="</ul>",f.html()!==c&&f.html(c)}}var e,f,g;return{getTemplate:function(){return d},init:function(d){return e=d,f=e.find(".popover"),g=c(e),b.on(b.types.EVENT,"quality",a),b.on(b.types.EVENT,"contentUpdate",function(){e.removeClass("shown")}),e.on("click","li",function(a){var c=$(a.target),d=c.data("value");c.addClass("active").siblings().removeClass("active"),b.send(b.types.COMMAND,"quality",[d]),g.hide()}),e}}}}),m(n[170],[n[17],n[19]],function(a,b){var d='<div class="videoComponent videoProgressLength firstProgressText length">00:00</div><div class="videoComponent videoProgress progress"><div class="videoComponent videoProgressLength innerProgressText length"></div></div><div class="loadingBar"></div><div class="videoComponent seekProgress progress"><div id="seekTimeFirst" class="seekLength firstProgressText covered">0:00</div><div id="seekTimeInner" class="seekLength innerProgressText">0:00</div><div class="knob"></div></div><div class="videoComponent videoLength length">--:--</div>';return function(){function a(a){a&&(x.addClass("live"),x.removeClass("video"),q(0)),s()}function e(a){var b=new j(1e3*a),c=3600;return b=b.toISOString(),b=b.substr(11,8),+a<c&&(b=b.substr(3)),+a>24*c&&(b=i.floor(a/c)+b.substr(2)),b}function f(){K=!0}function g(a){K&&(K=!1,o(a.clientX))}function h(a){K&&(o(a.clientX),l())}function k(){var a=E.offset().left+E[0].offsetWidth+20,b=E.offset().left-20,c=F.offset().left+F[0].offsetWidth+20,d=F.offset().left-20;G.each(function(e,f){f=$(f);var g=f.offset().left,h=f.offset().left+f[0].offsetWidth;(b>g&&b<h||a>g&&a<h||g>b&&g<a||h>b&&h<a)&&!E.hasClass("covered")||(d>g&&d<h||c>g&&c<h||g>d&&g<c||h>d&&h<c)&&!F.hasClass("covered")?f.hasClass("covered")||f.addClass("covered"):f.hasClass("covered")&&f.removeClass("covered")})}function l(){i.round(E.offset().left)<F.offset().left?(E.hasClass("covered")||E.addClass("covered"),F.hasClass("covered")&&F.removeClass("covered")):(E.hasClass("covered")&&E.removeClass("covered"),F.hasClass("covered")||F.addClass("covered"))}function m(a){var b=(a.clientX-x.offset().left)/x[0].offsetWidth;C.css({width:100*b+"%",opacity:1}),D.html(e(u()*b)),l(),k()}function n(){C.css({width:0,opacity:0}),l(),F.addClass("covered"),k()}function o(a){var b=(a-x.offset().left)/x[0].offsetWidth;b>u()&&(b=1),b<0&&(b=0),K?q(b):p(b)}function p(a){J&&b.send(b.types.UI,"setSeek",{from:H,to:a,duration:u()})}function q(a){a<0||(A.html(e(a*u())),y.css({width:100*a+"%"}),z.css({left:100*a+"%"}),r(),k())}function r(){y[0].offsetWidth>A.filter(".firstProgressText")[0].offsetWidth+20&&!x.hasClass("show-inner")&&x.addClass("show-inner"),y[0].offsetWidth<A.filter(".innerProgressText")[0].offsetWidth+20&&x.hasClass("show-inner")&&x.removeClass("show-inner"),x[0].offsetWidth-y[0].offsetWidth<B[0].offsetWidth+20?x.hasClass("hide-total")||x.addClass("hide-total"):x.hasClass("hide-total")&&x.removeClass("hide-total")}function s(){var a=$("#controlPanelRight");a.length&&x.css({right:a[0].clientWidth||a[0].offsetWidth})}function t(a){K||(H=a,q(a))}function u(){return I}function v(a){I=a,x.toggleClass("live",!I),x.toggleClass("video",!!I),J=!!I,B.html(e(u())),s()}function w(){b.on(b.types.EVENT,"live",a),b.on(b.types.UI,"repositionSeekbar",s),b.on(b.types.EVENT,"contentUpdate",function(){x.removeClass("shown hide-total show-inner"),A.filter(".firstProgressText").removeClass("covered"),A.filter(".innerProgressText").addClass("covered"),y.css({width:0}),A.html("00:00"),B.html("--:--")}),b.on(b.types.UI,"keyDown",function(a){var c=.01*u()<10?.01:10/u();39===a.keyCode&&(p(H+=c),b.send(b.types.UI,"hover")),37===a.keyCode&&(p(H-=c),b.send(b.types.UI,"hover")),k()}),b.on(b.types.UI,"duration",v),b.on(b.types.UI,"progress",t),b.on(b.types.EVENT,"resize",s)}var x,y,z,A,B,C,D,E,F,G,H,I=0,J=!1,K=!1;return{getTemplate:function(){return d},init:function(a){x=a,w(),$&&$.dispatch&&$.capture&&ustream.events&&$.capture(ustream.events.VIEWCHANGE,s),x.on("mousedown",f).on("mousemove",m).on("mouseleave",n),$(c.body).on("mouseup",g).on("mousemove",h).on("mouseleave",g),B=x.find(".videoLength"),y=x.find(".videoProgress"),z=x.find(".loadingBar"),A=x.find(".videoProgressLength"),G=x.find(".length"),C=x.find(".seekProgress"),D=C.find(".seekLength"),E=D.filter(".innerProgressText"),F=D.filter(".firstProgressText")}}}}),m(n[171],[n[26],n[7],n[16],n[19],n[82],n[169],n[8]],function(b,d,e,f,g,h,j){var k='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="xMidYMid" width="24" height="24" viewBox="0 0 24 24"> <g id="volume"><path d="M11.997,6.781 C11.997,6.338 11.985,5.979 11.194,5.979 C10.743,5.979 10.201,6.508 8.070,8.939 C7.837,8.939 5.067,8.939 4.746,8.939 C3.716,8.939 3.730,15.011 4.746,15.011 C5.067,15.011 7.837,15.011 8.070,15.011 C10.117,17.416 10.717,17.971 11.194,17.971 C11.985,17.971 11.997,17.611 11.997,17.168 C11.997,17.168 11.997,6.781 11.997,6.781 Z" id="path-1" fill-rule="evenodd" fill="#ffffff"/><path class="lvl lvl-3" d="M16.523,18.016 C16.365,17.749 16.195,17.461 16.011,17.153 C17.790,16.112 18.998,14.202 18.998,11.992 C18.998,9.776 17.783,7.863 15.997,6.823 C16.188,6.506 16.365,6.210 16.529,5.936 C18.600,7.153 19.994,9.398 19.994,11.974 C19.994,14.553 18.597,16.799 16.523,18.016 Z" id="path-2" fill-rule="evenodd" fill="#ffffff"/><path class="lvl lvl-2" d="M17.992,12.006 C17.992,13.846 16.987,15.437 15.507,16.306 C15.339,16.025 15.169,15.740 14.999,15.456 C16.195,14.765 17.009,13.488 17.009,12.007 C17.009,10.512 16.179,9.224 14.963,8.538 C15.135,8.255 15.306,7.971 15.476,7.689 C16.973,8.554 17.992,10.153 17.992,12.006 Z" id="path-3" fill="#ffffff" fill-rule="evenodd"/><path class="lvl lvl-1" d="M15.987,12.007 C15.987,13.118 15.377,14.075 14.480,14.594 C14.304,14.301 14.134,14.020 13.972,13.755 C14.577,13.413 14.991,12.766 14.991,12.014 C14.991,11.242 14.554,10.580 13.921,10.247 C14.085,9.981 14.260,9.695 14.440,9.399 C15.359,9.912 15.987,10.881 15.987,12.007 Z" id="path-4" fill-rule="evenodd" fill="#ffffff"/><path class="lvl lvl-0" d="M20.207,13.793 C20.207,13.793 18.793,15.207 18.793,15.207 C18.793,15.207 17.000,13.414 17.000,13.414 C17.000,13.414 15.207,15.207 15.207,15.207 C15.207,15.207 13.793,13.793 13.793,13.793 C13.793,13.793 15.586,12.000 15.586,12.000 C15.586,12.000 13.793,10.207 13.793,10.207 C13.793,10.207 15.207,8.793 15.207,8.793 C15.207,8.793 17.000,10.586 17.000,10.586 C17.000,10.586 18.793,8.793 18.793,8.793 C18.793,8.793 20.207,10.207 20.207,10.207 C20.207,10.207 18.414,12.000 18.414,12.000 C18.414,12.000 20.207,13.793 20.207,13.793 Z" id="path-5" fill-rule="evenodd" fill="#ffffff"/></g></svg>',l='<div class="trigger">'+k+'</div><div class="popover bottom"><div class="toggle icon-mute"></div><div class="volumeBar"><div class="value"></div><div class="hoverIndicator"><div class="knob"></div></div></div><div class="toggle icon-full"></div></div>',m=200,n="mte_viewer_volume",o=!1;return function(){function d(a){var b=C[0].clientHeight||C[0].offsetHeight,d=c.documentElement&&c.documentElement.scrollTop||c.body.scrollTop,e=C.offset().top*(j.ie&&!j.edgeIe&&g.fullscreenMode()?100:1),f=e+b-d,h=f-a,i=h/b*100;return i>100&&(i=100),i<0&&(i=0),i}function k(a){var b=C[0].clientWidth||C[0].offsetWidth,c=C.offset().left,d=a-c,e=d/b*100;return e>100&&(e=100),e<0&&(e=0),e}function p(a){A=z,z=a,I?D.css({width:a+"%"}):D.css({height:a+"%"});var b=0===a?"muted":"volume-"+q(a);B.removeClass("muted volume-1 volume-2 volume-3").addClass(b)}function q(a){return a<10?0:a>=10&&a<40?1:a>=40&&a<70?2:3}function r(a){f.send(f.types.COMMAND,"volume",[a]),s(a)}function s(a){e.set(n,JSON.stringify(a),{expires:14})}function t(a,b){var c;c=I?k(a):d(b),c=i.round(c),r(c),p(c)}function u(a,b){var c;I?(c=k(a),E.css({width:c+"%"})):(c=d(b),E.css({height:c+"%"}))}function v(){I?E.css({width:0}):E.css({height:0})}function w(){var a,c=e.get(n);o||(o=!0,a="string"==typeof c?JSON.parse(c):H,b.volume<100&&(a=b.volume),r(a),p(a))}function x(b){if(a.innerWidth<=240)b.stopPropagation();else if(I)return;r(0===z?A||H:0)}function y(){F.on("click",x),B.on("click",".icon-mute",function(){r(0)}).on("click",".icon-full",function(){r(100)}),C.on("mousedown",function(a){J=!0,f.send(f.types.UI,"dragging",!0),G.clearHideTimeout()}).on("mousemove",function(a){u(a.clientX,a.clientY)}).on("mouseleave",v),$(c.body).on("mousemove",function(a){J&&(t(a.clientX,a.clientY),G.clearHideTimeout())}).on("mouseup",function(a){J&&(J&&(f.send(f.types.UI,"dragging",!1),J=!1),t(a.clientX,a.clientY))}).on("mouseleave",function(a){J&&(f.send(f.types.UI,"dragging",!1),J=!1)})}var z,A,B,C,D,E,F,G,H=40,I=!1,J=!1;return{getTemplate:function(){return l},init:function(a){B=a,F=B.find(".trigger"),E=B.find(".hoverIndicator"),C=B.find(".volumeBar"),D=C.find(".value"),I=B.hasClass("horizontal"),G=h(B,{hover:!a.hasClass("horizontal"),hoverShowDelay:m}),y(),f.on(f.types.COMMAND,"volume",function(a){p(a[0]),s(a[0])}),f.on(f.types.EVENT,"meta",function(){w()})}}}}),m(n[172],[n[17],n[19]],function(a,b){return function(){function c(){h?(g.addClass("replay"),g.removeClass("live")):(g.addClass("live"),g.removeClass("replay"))}function d(){g.addClass("shown"),e(function(){g.addClass("animated")})}function f(){g.removeClass("animated"),e(function(){g.removeClass("shown")},200)}var g,h,i='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="xMidYMid" width="48" height="24" viewBox="0 0 48 24"><g class="live"><path class="inactive" fill="rgba(255,255,255, 0.6)" fill-rule="evenodd" d="M19.167,5.000 C19.167,5.000 44.833,5.000 44.833,5.000 C45.477,5.000 46.000,5.523 46.000,6.167 C46.000,6.167 46.000,17.833 46.000,17.833 C46.000,18.478 45.477,19.000 44.833,19.000 C44.833,19.000 19.167,19.000 19.167,19.000 C18.523,19.000 18.000,18.478 18.000,17.833 C18.000,17.833 18.000,6.167 18.000,6.167 C18.000,5.523 18.523,5.000 19.167,5.000 Z M41.953,13.953 C41.953,13.953 41.953,15.482 41.953,15.482 C41.953,15.482 37.83,15.482 37.83,15.482 C37.83,15.482 37.83,8.537 37.83,8.537 C37.83,8.537 41.953,8.537 41.953,8.537 C41.953,8.537 41.953,10.043 41.953,10.043 C41.953,10.043 39.706,10.043 39.706,10.043 C39.706,10.043 39.706,11.136 39.706,11.136 C39.706,11.136 41.787,11.136 41.787,11.136 C41.787,11.136 41.787,12.642 41.787,12.642 C41.787,12.642 39.706,12.642 39.706,12.642 C39.706,12.642 39.706,13.953 39.706,13.953 C39.706,13.953 41.953,13.953 41.953,13.953 Z M32.594,15.482 C32.594,15.482 30.328,8.537 30.328,8.537 C30.328,8.537 32.438,8.537 32.438,8.537 C32.438,8.537 33.383,12.057 33.383,12.057 C33.579,12.84 33.687,13.384 33.706,13.691 C33.728,13.47 33.773,13.193 33.839,12.86 C33.906,12.528 33.964,12.266 34.015,12.076 C34.015,12.076 34.979,8.537 34.979,8.537 C34.979,8.537 37.079,8.537 37.079,8.537 C37.079,8.537 34.803,15.482 34.803,15.482 C34.803,15.482 32.594,15.482 32.594,15.482 Z M27.692,8.537 C27.692,8.537 29.578,8.537 29.578,8.537 C29.578,8.537 29.578,15.482 29.578,15.482 C29.578,15.482 27.692,15.482 27.692,15.482 C27.692,15.482 27.692,8.537 27.692,8.537 Z M22.029,8.537 C22.029,8.537 23.906,8.537 23.906,8.537 C23.906,8.537 23.906,13.967 23.906,13.967 C23.906,13.967 26.58,13.967 26.58,13.967 C26.58,13.967 26.58,15.482 26.58,15.482 C26.58,15.482 22.029,15.482 22.029,15.482 C22.029,15.482 22.029,8.537 22.029,8.537 Z"/><g class="active"><path class="bg" fill="#ff3d23" fill-rule="evenodd" d="M19.167,5.000 C19.167,5.000 44.833,5.000 44.833,5.000 C45.477,5.000 46.000,5.523 46.000,6.167 C46.000,6.167 46.000,17.833 46.000,17.833 C46.000,18.478 45.477,19.000 44.833,19.000 C44.833,19.000 19.167,19.000 19.167,19.000 C18.523,19.000 18.000,18.478 18.000,17.833 C18.000,17.833 18.000,6.167 18.000,6.167 C18.000,5.523 18.523,5.000 19.167,5.000 Z"/><path class="text" fill="#fff" fill-rule="evenodd" d="M41.953,13.953 C41.953,13.953 41.953,15.482 41.953,15.482 C41.953,15.482 37.83,15.482 37.83,15.482 C37.83,15.482 37.83,8.537 37.83,8.537 C37.83,8.537 41.953,8.537 41.953,8.537 C41.953,8.537 41.953,10.043 41.953,10.043 C41.953,10.043 39.706,10.043 39.706,10.043 C39.706,10.043 39.706,11.136 39.706,11.136 C39.706,11.136 41.787,11.136 41.787,11.136 C41.787,11.136 41.787,12.642 41.787,12.642 C41.787,12.642 39.706,12.642 39.706,12.642 C39.706,12.642 39.706,13.953 39.706,13.953 C39.706,13.953 41.953,13.953 41.953,13.953 Z M32.594,15.482 C32.594,15.482 30.328,8.537 30.328,8.537 C30.328,8.537 32.438,8.537 32.438,8.537 C32.438,8.537 33.383,12.057 33.383,12.057 C33.579,12.84 33.687,13.384 33.706,13.691 C33.728,13.47 33.773,13.193 33.839,12.86 C33.906,12.528 33.964,12.266 34.015,12.076 C34.015,12.076 34.979,8.537 34.979,8.537 C34.979,8.537 37.079,8.537 37.079,8.537 C37.079,8.537 34.803,15.482 34.803,15.482 C34.803,15.482 32.594,15.482 32.594,15.482 Z M27.692,8.537 C27.692,8.537 29.578,8.537 29.578,8.537 C29.578,8.537 29.578,15.482 29.578,15.482 C29.578,15.482 27.692,15.482 27.692,15.482 C27.692,15.482 27.692,8.537 27.692,8.537 Z M22.029,8.537 C22.029,8.537 23.906,8.537 23.906,8.537 C23.906,8.537 23.906,13.967 23.906,13.967 C23.906,13.967 26.58,13.967 26.58,13.967 C26.58,13.967 26.58,15.482 26.58,15.482 C26.58,15.482 22.029,15.482 22.029,15.482 C22.029,15.482 22.029,8.537 22.029,8.537 Z"/></g></g><g class="replay"><path class="inactive" fill="rgba(255,255,255, 0.6)" fill-rule="evenodd" d="M3.000,5.000 C3.000,5.000 45.000,5.000 45.000,5.000 C45.552,5.000 46.000,5.448 46.000,6.000 C46.000,6.000 46.000,18.000 46.000,18.000 C46.000,18.552 45.552,19.000 45.000,19.000 C45.000,19.000 3.000,19.000 3.000,19.000 C2.448,19.000 2.000,18.552 2.000,18.000 C2.000,18.000 2.000,6.000 2.000,6.000 C2.000,5.448 2.448,5.000 3.000,5.000 M40.621,12.787 C40.621,12.787 40.621,15.514 40.621,15.514 C40.621,15.514 38.653,15.514 38.653,15.514 C38.653,15.514 38.653,12.845 38.653,12.845 C38.653,12.845 36.275,8.531 36.275,8.531 C36.275,8.531 38.401,8.531 38.401,8.531 C38.401,8.531 39.637,11.120 39.637,11.120 C39.637,11.120 40.883,8.531 40.883,8.531 C40.883,8.531 42.999,8.531 42.999,8.531 C42.999,8.531 40.621,12.787 40.621,12.787 ZM35.139,15.514 C35.139,15.514 34.783,14.206 34.783,14.206 C34.783,14.206 32.435,14.206 32.435,14.206 C32.435,14.206 32.069,15.514 32.069,15.514 C32.069,15.514 29.924,15.514 29.924,15.514 C29.924,15.514 32.282,8.503 32.282,8.503 C32.282,8.503 34.887,8.503 34.887,8.503 C34.887,8.503 37.275,15.514 37.275,15.514 C37.275,15.514 35.139,15.514 35.139,15.514 ZM34.067,11.512 C33.994,11.257 33.906,10.928 33.802,10.523 C33.698,10.119 33.630,9.829 33.597,9.654 C33.567,9.816 33.509,10.084 33.421,10.456 C33.334,10.829 33.140,11.563 32.841,12.658 C32.841,12.658 34.378,12.658 34.378,12.658 C34.378,12.658 34.067,11.512 34.067,11.512 ZM24.812,8.531 C24.812,8.531 26.765,8.531 26.765,8.531 C26.765,8.531 26.765,13.991 26.765,13.991 C26.765,13.991 29.548,13.991 29.548,13.991 C29.548,13.991 29.548,15.514 29.548,15.514 C29.548,15.514 24.812,15.514 24.812,15.514 C24.812,15.514 24.812,8.531 24.812,8.531 ZM20.916,13.198 C20.916,13.198 20.367,13.198 20.367,13.198 C20.367,13.198 20.367,15.514 20.367,15.514 C20.367,15.514 18.415,15.514 18.415,15.514 C18.415,15.514 18.415,8.531 18.415,8.531 C18.415,8.531 20.916,8.531 20.916,8.531 C21.829,8.531 22.515,8.724 22.973,9.109 C23.431,9.495 23.660,10.042 23.660,10.752 C23.660,11.533 23.422,12.135 22.946,12.560 C22.469,12.985 21.793,13.198 20.916,13.198 ZM20.872,10.055 C20.872,10.055 20.367,10.055 20.367,10.055 C20.367,10.055 20.367,11.660 20.367,11.660 C20.367,11.660 20.723,11.660 20.723,11.660 C21.017,11.660 21.250,11.580 21.423,11.421 C21.596,11.262 21.682,11.042 21.682,10.762 C21.682,10.291 21.412,10.055 20.872,10.055 ZM12.858,8.531 C12.858,8.531 17.149,8.531 17.149,8.531 C17.149,8.531 17.149,10.046 17.149,10.046 C17.149,10.046 14.810,10.046 14.810,10.046 C14.810,10.046 14.810,11.144 14.810,11.144 C14.810,11.144 16.976,11.144 16.976,11.144 C16.976,11.144 16.976,12.658 16.976,12.658 C16.976,12.658 14.810,12.658 14.810,12.658 C14.810,12.658 14.810,13.976 14.810,13.976 C14.810,13.976 17.149,13.976 17.149,13.976 C17.149,13.976 17.149,15.514 17.149,15.514 C17.149,15.514 12.858,15.514 12.858,15.514 C12.858,15.514 12.858,8.531 12.858,8.531 ZM9.985,15.514 C9.985,15.514 8.453,12.973 8.453,12.973 C8.453,12.973 7.958,12.973 7.958,12.973 C7.958,12.973 7.958,15.514 7.958,15.514 C7.958,15.514 6.006,15.514 6.006,15.514 C6.006,15.514 6.006,8.531 6.006,8.531 C6.006,8.531 8.374,8.531 8.374,8.531 C10.338,8.531 11.320,9.219 11.320,10.595 C11.320,11.404 10.911,12.029 10.094,12.472 C10.094,12.472 12.200,15.514 12.200,15.514 C12.200,15.514 9.985,15.514 9.985,15.514 ZM8.344,9.960 C8.344,9.960 7.958,9.960 7.958,9.960 C7.958,9.960 7.958,11.555 7.958,11.555 C7.958,11.555 8.324,11.555 8.324,11.555 C9.006,11.555 9.348,11.264 9.348,10.681 C9.348,10.200 9.013,9.960 8.344,9.960 Z"/><g class="active"><path class="bg" fill="#38f" fill-rule="evenodd" d="M3.000,5.000 C3.000,5.000 45.000,5.000 45.000,5.000 C45.552,5.000 46.000,5.448 46.000,6.000 C46.000,6.000 46.000,18.000 46.000,18.000 C46.000,18.552 45.552,19.000 45.000,19.000 C45.000,19.000 3.000,19.000 3.000,19.000 C2.448,19.000 2.000,18.552 2.000,18.000 C2.000,18.000 2.000,6.000 2.000,6.000 C2.000,5.448 2.448,5.000 3.000,5.000 Z"/><path class="text" fill="#fff" fill-rule="evenodd" d="M40.621,12.787 C40.621,12.787 40.621,15.514 40.621,15.514 C40.621,15.514 38.653,15.514 38.653,15.514 C38.653,15.514 38.653,12.845 38.653,12.845 C38.653,12.845 36.275,8.531 36.275,8.531 C36.275,8.531 38.401,8.531 38.401,8.531 C38.401,8.531 39.637,11.120 39.637,11.120 C39.637,11.120 40.883,8.531 40.883,8.531 C40.883,8.531 42.999,8.531 42.999,8.531 C42.999,8.531 40.621,12.787 40.621,12.787 ZM35.139,15.514 C35.139,15.514 34.783,14.206 34.783,14.206 C34.783,14.206 32.435,14.206 32.435,14.206 C32.435,14.206 32.069,15.514 32.069,15.514 C32.069,15.514 29.924,15.514 29.924,15.514 C29.924,15.514 32.282,8.503 32.282,8.503 C32.282,8.503 34.887,8.503 34.887,8.503 C34.887,8.503 37.275,15.514 37.275,15.514 C37.275,15.514 35.139,15.514 35.139,15.514 ZM34.067,11.512 C33.994,11.257 33.906,10.928 33.802,10.523 C33.698,10.119 33.630,9.829 33.597,9.654 C33.567,9.816 33.509,10.084 33.421,10.456 C33.334,10.829 33.140,11.563 32.841,12.658 C32.841,12.658 34.378,12.658 34.378,12.658 C34.378,12.658 34.067,11.512 34.067,11.512 ZM24.812,8.531 C24.812,8.531 26.765,8.531 26.765,8.531 C26.765,8.531 26.765,13.991 26.765,13.991 C26.765,13.991 29.548,13.991 29.548,13.991 C29.548,13.991 29.548,15.514 29.548,15.514 C29.548,15.514 24.812,15.514 24.812,15.514 C24.812,15.514 24.812,8.531 24.812,8.531 ZM20.916,13.198 C20.916,13.198 20.367,13.198 20.367,13.198 C20.367,13.198 20.367,15.514 20.367,15.514 C20.367,15.514 18.415,15.514 18.415,15.514 C18.415,15.514 18.415,8.531 18.415,8.531 C18.415,8.531 20.916,8.531 20.916,8.531 C21.829,8.531 22.515,8.724 22.973,9.109 C23.431,9.495 23.660,10.042 23.660,10.752 C23.660,11.533 23.422,12.135 22.946,12.560 C22.469,12.985 21.793,13.198 20.916,13.198 ZM20.872,10.055 C20.872,10.055 20.367,10.055 20.367,10.055 C20.367,10.055 20.367,11.660 20.367,11.660 C20.367,11.660 20.723,11.660 20.723,11.660 C21.017,11.660 21.250,11.580 21.423,11.421 C21.596,11.262 21.682,11.042 21.682,10.762 C21.682,10.291 21.412,10.055 20.872,10.055 ZM12.858,8.531 C12.858,8.531 17.149,8.531 17.149,8.531 C17.149,8.531 17.149,10.046 17.149,10.046 C17.149,10.046 14.810,10.046 14.810,10.046 C14.810,10.046 14.810,11.144 14.810,11.144 C14.810,11.144 16.976,11.144 16.976,11.144 C16.976,11.144 16.976,12.658 16.976,12.658 C16.976,12.658 14.810,12.658 14.810,12.658 C14.810,12.658 14.810,13.976 14.810,13.976 C14.810,13.976 17.149,13.976 17.149,13.976 C17.149,13.976 17.149,15.514 17.149,15.514 C17.149,15.514 12.858,15.514 12.858,15.514 C12.858,15.514 12.858,8.531 12.858,8.531 ZM9.985,15.514 C9.985,15.514 8.453,12.973 8.453,12.973 C8.453,12.973 7.958,12.973 7.958,12.973 C7.958,12.973 7.958,15.514 7.958,15.514 C7.958,15.514 6.006,15.514 6.006,15.514 C6.006,15.514 6.006,8.531 6.006,8.531 C6.006,8.531 8.374,8.531 8.374,8.531 C10.338,8.531 11.320,9.219 11.320,10.595 C11.320,11.404 10.911,12.029 10.094,12.472 C10.094,12.472 12.200,15.514 12.200,15.514 C12.200,15.514 9.985,15.514 9.985,15.514 ZM8.344,9.960 C8.344,9.960 7.958,9.960 7.958,9.960 C7.958,9.960 7.958,11.555 7.958,11.555 C7.958,11.555 8.324,11.555 8.324,11.555 C9.006,11.555 9.348,11.264 9.348,10.681 C9.348,10.200 9.013,9.960 8.344,9.960 Z"/></g></g></svg>';
return{getTemplate:function(){return i},init:function(e){g=e,g.addClass("no-hover"),b.on(b.types.EVENT,"live",function(a){c(),a?d():f(),b.send(b.types.UI,"position",g.attr("id"))}),b.on(b.types.EVENT,"meta",function(a){h=a.isReplay,c()}),b.on(b.types.EVENT,"contentUpdate",function(){f()}),b.on(b.types.EVENT,"videoAdPlaying",function(b){a.isCid()&&a.live()&&(b?f():d())})}}}}),m(n[173],[n[17],n[19]],function(b,c){var d='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="xMidYMid" width="62" height="24" viewBox="0 0 62 24"><g id="ustream"><path d="M9.319,6.225 C9.319,6.225 9.319,12.859 9.319,12.859 C9.319,14.638 8.902,15.972 8.067,16.861 C7.257,17.750 6.078,18.196 4.531,18.196 C3.057,18.196 1.940,17.764 1.179,16.899 C0.393,16.010 -0.000,14.650 -0.000,12.821 C-0.000,12.821 -0.000,6.225 -0.000,6.225 C-0.000,6.225 2.578,6.225 2.578,6.225 C2.578,6.225 2.578,13.011 2.578,13.011 C2.578,14.002 2.750,14.765 3.094,15.299 C3.438,15.807 3.941,16.061 4.604,16.061 C6.029,16.061 6.741,15.045 6.741,13.011 C6.741,13.011 6.741,6.225 6.741,6.225 C6.741,6.225 9.319,6.225 9.319,6.225 ZM32.489,13.240 C32.710,13.570 32.894,14.028 33.042,14.612 C33.042,14.612 33.373,15.908 33.373,15.908 C33.373,15.908 33.373,10.419 33.373,10.419 C33.226,10.876 32.968,11.283 32.600,11.639 C32.280,11.969 31.924,12.210 31.531,12.363 C31.531,12.363 31.531,12.401 31.531,12.401 C31.900,12.554 32.219,12.833 32.489,13.240 ZM30.979,9.656 C30.979,9.123 30.807,8.703 30.463,8.398 C30.119,8.119 29.653,7.979 29.063,7.979 C28.572,7.979 28.179,8.004 27.885,8.055 C27.885,8.055 27.885,11.334 27.885,11.334 C27.885,11.334 28.879,11.334 28.879,11.334 C29.542,11.334 30.058,11.181 30.426,10.876 C30.795,10.571 30.979,10.165 30.979,9.656 ZM45.309,10.381 C45.210,10.025 45.026,9.262 44.756,8.093 C44.756,8.093 44.719,8.093 44.719,8.093 C44.670,8.246 44.583,8.627 44.461,9.237 C44.363,9.745 44.277,10.126 44.204,10.381 C44.204,10.381 43.540,12.897 43.540,12.897 C43.540,12.897 46.008,12.897 46.008,12.897 C46.008,12.897 45.309,10.381 45.309,10.381 ZM61.221,6.073 C61.221,6.073 61.885,18.005 61.885,18.005 C61.885,18.005 59.342,18.005 59.342,18.005 C59.342,18.005 59.158,13.392 59.158,13.392 C59.085,11.486 59.048,9.860 59.048,8.512 C59.048,8.512 59.011,8.512 59.011,8.512 C58.667,10.037 58.250,11.575 57.759,13.125 C57.759,13.125 56.359,17.815 56.359,17.815 C56.359,17.815 54.333,17.815 54.333,17.815 C54.333,17.815 53.118,13.164 53.118,13.164 C52.676,11.486 52.332,9.936 52.086,8.512 C52.086,8.512 52.049,8.512 52.049,8.512 C52.025,8.868 51.988,9.707 51.939,11.029 C51.915,12.071 51.877,12.871 51.828,13.430 C51.828,13.430 51.644,18.005 51.644,18.005 C51.644,18.005 47.260,18.005 47.260,18.005 C47.260,18.005 46.376,14.955 46.376,14.955 C46.376,14.955 43.172,14.955 43.172,14.955 C43.172,14.955 42.362,18.005 42.362,18.005 C42.362,18.005 31.347,18.005 31.347,18.005 C31.151,17.624 30.881,16.696 30.537,15.222 C30.365,14.485 30.144,13.977 29.874,13.697 C29.604,13.443 29.199,13.304 28.658,13.278 C28.658,13.278 27.885,13.278 27.885,13.278 C27.885,13.278 27.885,18.005 27.885,18.005 C27.885,18.005 25.233,18.005 25.233,18.005 C25.233,18.005 25.233,8.322 25.233,8.322 C25.233,8.322 22.764,8.322 22.764,8.322 C22.764,8.322 22.764,18.005 22.764,18.005 C22.764,18.005 20.186,18.005 20.186,18.005 C20.186,18.005 20.186,8.322 20.186,8.322 C20.186,8.322 14.587,8.284 14.587,8.284 C13.457,8.284 12.892,8.614 12.892,9.275 C12.892,9.605 13.077,9.898 13.445,10.152 C13.715,10.330 14.256,10.571 15.066,10.876 C16.072,11.257 16.821,11.740 17.313,12.325 C17.804,12.884 18.050,13.570 18.050,14.383 C18.050,15.451 17.669,16.315 16.907,16.976 C16.072,17.713 14.906,18.081 13.408,18.081 C11.787,18.056 10.068,18.043 8.251,18.043 C8.619,17.764 8.939,17.459 9.209,17.128 C9.479,16.772 9.712,16.328 9.909,15.794 C10.326,15.794 10.940,15.807 11.750,15.832 C12.561,15.858 13.163,15.870 13.555,15.870 C14.145,15.870 14.599,15.756 14.918,15.527 C15.238,15.324 15.397,15.006 15.397,14.574 C15.397,14.218 15.238,13.926 14.918,13.697 C14.648,13.443 14.157,13.189 13.445,12.935 C11.309,12.198 10.240,11.041 10.240,9.465 C10.240,8.423 10.633,7.598 11.419,6.988 C12.205,6.352 13.285,6.034 14.661,6.034 C14.661,6.034 28.769,5.996 28.769,5.996 C29.628,5.996 30.353,6.060 30.942,6.187 C31.581,6.340 32.096,6.581 32.489,6.912 C32.931,7.267 33.226,7.712 33.373,8.246 C33.373,8.246 33.373,6.073 33.373,6.073 C33.373,6.073 40.446,6.073 40.446,6.073 C40.446,6.073 40.446,8.246 40.446,8.246 C40.446,8.246 36.025,8.246 36.025,8.246 C36.025,8.246 36.025,10.762 36.025,10.762 C36.025,10.762 40.187,10.762 40.187,10.762 C40.187,10.762 40.187,12.935 40.187,12.935 C40.187,12.935 36.025,12.935 36.025,12.935 C36.025,12.935 36.025,15.794 36.025,15.794 C36.025,15.794 40.336,15.794 40.336,15.794 C40.336,15.794 43.172,6.073 43.172,6.073 C43.172,6.073 46.487,6.073 46.487,6.073 C46.487,6.073 49.396,15.794 49.396,15.794 C49.396,15.794 49.986,6.073 49.986,6.073 C49.986,6.073 53.412,6.073 53.412,6.073 C53.412,6.073 54.518,10.037 54.518,10.037 C54.959,11.639 55.290,13.049 55.512,14.269 C55.512,14.269 55.585,14.269 55.585,14.269 C55.978,12.617 56.335,11.194 56.654,9.999 C56.654,9.999 57.869,6.073 57.869,6.073 C57.869,6.073 61.221,6.073 61.221,6.073 Z" fill="#fff" fill-rule="evenodd"/></g></svg>',e=d,f=!1,g=!1;return function(){function d(a){var b;for(f=!1,b=0;b<a.length&&!(f=f||!a[b].secureUrl);++b);h()}function h(){i.toggleClass("shown",f&&!g)}var i;return{getTemplate:function(){return e},init:function(e){i=e,c.on(c.types.EVENT,"logo",d),i.on("click",function(){var c=a.location.protocol+"//"+a.location.hostname+(a.location.port?":"+a.location.port:"");b.isCid()?a.open(c+"/channel/"+b.id()):a.open(c+"/recorded/"+b.id())}),c.on(c.types.EVENT,"videoAdPlaying",function(a){g=a,h()})}}}}),m(n[175],[n[19]],function(a){var b=$("#OverlaysContainer"),c='<div class="overlay-container"><div class="close"></div><div class="overlay-content"></div></div>';return a.on(a.types.UI,"closeOverlays",function(){$(".overlay-container").removeClass("shown")}),function(d){function e(){i=$(c),i.attr("id",d.id),f(d.template),i.on("click",".close",function(){h(),d.onClose&&d.onClose()}),i.on("show",g),i.on("hide",h),b.append(i)}function f(a){i.find(".overlay-content").html(a)}function g(){a.send(a.types.UI,"closePopovers"),a.send(a.types.UI,"closeOverlays"),a.send(a.types.UI,"hideControls"),i.addClass("shown")}function h(){i.removeClass("shown"),a.send(a.types.UI,"showControls")}var i=c;if(d)return e(),i}}),m(n[174],[n[17],n[26],n[87],n[48],n[19],n[97],n[169],n[175]],function(b,c,d,f,h,i,j,k){var l='<svg viewBox="0 0 24 24"><g id="share"><path d="M16.504,9.975 C15.693,9.975 14.979,9.576 14.529,8.968 C14.529,8.968 9.929,11.766 9.929,11.766 C9.936,11.842 9.952,11.916 9.952,11.995 C9.952,12.164 9.934,12.328 9.902,12.488 C9.902,12.488 14.610,14.974 14.610,14.974 C15.063,14.402 15.752,14.029 16.535,14.029 C17.899,14.029 19.006,15.142 19.006,16.516 C19.006,17.889 17.899,19.003 16.535,19.003 C15.170,19.003 14.064,17.889 14.064,16.516 C14.064,16.373 14.083,16.235 14.106,16.099 C14.106,16.099 9.360,13.593 9.360,13.593 C8.907,14.132 8.238,14.482 7.481,14.482 C6.116,14.482 5.010,13.369 5.010,11.995 C5.010,10.621 6.116,9.508 7.481,9.508 C8.325,9.508 9.069,9.936 9.515,10.586 C9.515,10.586 14.066,7.818 14.066,7.818 C14.052,7.708 14.033,7.600 14.033,7.487 C14.033,6.114 15.140,5.001 16.504,5.001 C17.868,5.001 18.975,6.114 18.975,7.487 C18.975,8.861 17.868,9.975 16.504,9.975 Z" fill="#fff" fill-rule="evenodd"/></g></svg>',m='<div class="trigger">'+l+'</div><div class="popover bottom"><ul class="list"><li class="facebook"><i></i><a target="_blank">'+f.getText("ui.facebook")+'</a></li><li class="twitter"><i></i><a target="_blank">'+f.getText("ui.twitter")+'</a></li><li class="mixi hidden"><i></i><a target="_blank">'+f.getText("ui.mixi")+'</a></li><li class="copyLink"><i></i><a>'+f.getText("ui.copyLink")+'</a></li><li class="embedCode"><i></i><a>'+f.getText("ui.embed")+"<a/></li></ul></div>",n="<p>"+f.getText("ui.embedCode")+'</p><div><textarea readonly></textarea></div><a class="bttn">'+i+f.getText("ui.copyEmbedCode")+"</a>",o="<p>"+f.getText("ui.linkVideo")+'</p><div><input type="text" readonly/></div><a class="bttn">'+i+f.getText("ui.copyLink")+"</a>",p="https://twitter.com/intent/tweet?text=#TEXT#",q=f.getText("ui.twitterLive"),r=f.getText("ui.twitterVideo");return function(){function c(){D=k({id:"EmbedOverlay",template:n}),E=D.find("textarea"),E.on("click",function(){E.focus().select()})}function i(){G=k({id:"LinkOverlay",template:o}),H=G.find("input"),H.on("click",function(){H.focus().select()})}function l(b,c,d){var f=c;a.ustream.copyToClipboard=function(){return h.send(h.types.UI,"show"),b.trigger("hide"),e(function(){h.send(h.types.UI,"showMessage",d)},0),f}}function s(){var a,c=b.getUrl(!1,!0),d=ustream.vars.embedTrackbackCode;c+="?html5ui",a='<iframe width="480" height="270" src="'+c+'" scrolling="no" allowfullscreen webkitallowfullscreen frameborder="0" style="border: 0 none transparent;"></iframe>',d&&(a+=d),D.trigger("show"),E.html(a),l(D,a,f.getText("ui.embedCopied"))}function t(){var a=b.getUrl();G.trigger("show"),H.val(a),l(G,a,f.getText("ui.videoLinkCopied"))}function u(a){F.module=a,B()}function v(a){F.username=a.username||a.userName,F.title=a.title,B()}function w(){var b=C.find(".facebook").data("href");a.open(b,"_blank","width=560, height=240")}function x(){var b=C.find(".twitter").data("href");a.open(b,"_blank","width=460, height=300")}function y(){var b=C.find(".mixi").data("href");a.open(b,"_blank","width=640, height=460")}function z(a,b,c){var d=!1;return a.indexOf("[link]")>-1&&(a=a.split("[link]").join(b),d=!0),"TWITTER"!==c.toUpperCase()||d||(a=a+" "+b),a}function A(a,b,c,d){var e="http://www.facebook.com/sharer.php?s=100&p[summary]=#MESSAGE#&p[url]=#URL#&p[title]=#TITLE#",f="https://www.facebook.com/dialog/feed?app_id=#APPID#&display=popup&redirect_uri=http://cdn1.ustream.tv/facebook_share/close.html&description=#MESSAGE#&link=#URL#&caption=#TITLE#",h=""===c?e:f;return h.replace("#APPID#",c).replace("#MESSAGE#",g(b||"")).replace("#URL#",g(a)).replace("#TITLE#",g(d||""))}function B(){if(F.username&&F.module){var a="",c="",e="",f=F.title,i=F.username,j="";if(F.module.facebook?(e=F.module.facebook.appId||"",a=F.module.facebook.customUrl||b.getUrl(),c=z(F.module.facebook.message||"",a,"facebook"),a=A(a,c,e,f),C.find(".facebook").data("href",a).removeClass("hidden")):C.find(".facebook").addClass("hidden"),F.module.twitter){var k=F.module.twitter.customUrl||F.module.twitter.shortenedUrl;j=F.module.twitter.message?z(F.module.twitter.message,k,"twitter"):b.getType()===b.CHANNEL?d(q,{BROADCASTER:i,LINK:k}):d(r,{MEDIANAME:f,LINK:k}),p=d(p,{TEXT:g(j)}),C.find(".twitter").data("href",p).removeClass("hidden")}else C.find(".twitter").addClass("hidden");F.module.mixi&&"ja_JP"===ustream.vars.locale?C.find(".mixi").data("href",F.module.mixi.url+g(b.getUrl())).removeClass("hidden"):C.find(".mixi").addClass("hidden"),C.addClass("shown"),h.send(h.types.UI,"repositionSeekbar")}}var C,D,E,F,G,H;return{getTemplate:function(){return m},init:function(a){C=a,F={},c(),i(),j(C),h.on(h.types.EVENT,"share",u),h.on(h.types.EVENT,"meta",v),h.on(h.types.EVENT,"contentUpdate",function(){C.removeClass("shown"),F={}}),C.on("click",".facebook",w),C.on("click",".twitter",x),C.on("click",".mixi",y),C.on("click",".embedCode",s),C.on("click",".copyLink",t)}}}}),m(n[176],[n[26],n[87],n[48],n[19]],function(a,b,c,d){var e="<h3></h3><span></span>",f=c.getText("ui.watchingNums");return function(){function g(a){k.find("span").html(b(f,{all:j(a.all),current:j(a.current)})),a.all&&a.current?k.addClass("viewer-count-shown"):k.removeClass("viewer-count-shown")}function h(a){k.find("h3").text(a.title),k.addClass("shown")}function j(a){var b=a/1e6,d=a/1e3;return b>1?i.round(10*b)/10+c.getText("ui.millions"):d>1?i.round(10*d)/10+c.getText("ui.thousands"):a}var k,l,m;return d.on(d.types.EVENT,"allTimeTotalUpdate",function(a){l=a,g({all:l,current:m})}),d.on(d.types.EVENT,"viewersUpdate",function(a){m=a,g({all:l,current:m})}),{getTemplate:function(){return e},init:function(b){k=b,a.showtitle&&b.addClass("title-shown"),d.on(d.types.EVENT,"meta",h),d.on(d.types.UI,"setTitleVisibility",function(a){a?b.addClass("title-shown"):b.removeClass("title-shown")}),d.on(d.types.EVENT,"viewerCount",g),d.on(d.types.EVENT,"videoAdPlaying",function(b){a.showtitle&&k.toggleClass("shown",!b)})}}}}),m(n[177],[n[19]],function(a){var b='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="xMidYMid" width="24" height="24" viewBox="0 0 24 24"><g><path d="M20.000,18.000 C20.000,18.000 4.000,18.000 4.000,18.000 C3.448,18.000 3.000,17.552 3.000,17.000 C3.000,17.000 3.000,7.000 3.000,7.000 C3.000,6.448 3.448,6.000 4.000,6.000 C4.000,6.000 20.000,6.000 20.000,6.000 C20.552,6.000 21.000,6.448 21.000,7.000 C21.000,7.000 21.000,17.000 21.000,17.000 C21.000,17.552 20.552,18.000 20.000,18.000 ZM9.766,8.879 C9.166,8.879 8.644,9.007 8.200,9.263 C7.756,9.519 7.415,9.885 7.179,10.361 C6.942,10.837 6.824,11.389 6.824,12.017 C6.824,13.021 7.068,13.789 7.556,14.320 C8.045,14.852 8.747,15.117 9.663,15.117 C10.302,15.117 10.875,15.005 11.381,14.781 C11.381,14.781 11.381,13.395 11.381,13.395 C11.126,13.500 10.873,13.590 10.622,13.665 C10.370,13.739 10.110,13.777 9.841,13.777 C8.953,13.777 8.509,13.193 8.509,12.025 C8.509,11.463 8.618,11.023 8.837,10.703 C9.055,10.384 9.360,10.224 9.750,10.224 C10.007,10.224 10.248,10.260 10.472,10.332 C10.696,10.404 10.920,10.492 11.144,10.597 C11.144,10.597 11.647,9.307 11.647,9.307 C11.049,9.022 10.422,8.879 9.766,8.879 ZM15.282,8.879 C14.682,8.879 14.160,9.007 13.716,9.263 C13.272,9.519 12.931,9.885 12.695,10.361 C12.458,10.837 12.340,11.389 12.340,12.017 C12.340,13.021 12.584,13.789 13.072,14.320 C13.561,14.852 14.263,15.117 15.179,15.117 C15.818,15.117 16.391,15.005 16.897,14.781 C16.897,14.781 16.897,13.395 16.897,13.395 C16.642,13.500 16.389,13.590 16.137,13.665 C15.886,13.739 15.625,13.777 15.357,13.777 C14.469,13.777 14.025,13.193 14.025,12.025 C14.025,11.463 14.134,11.023 14.353,10.703 C14.571,10.384 14.876,10.224 15.266,10.224 C15.523,10.224 15.764,10.260 15.988,10.332 C16.212,10.404 16.436,10.492 16.660,10.597 C16.660,10.597 17.163,9.307 17.163,9.307 C16.565,9.022 15.938,8.879 15.282,8.879 Z" id="path-1" class="cls-4" fill-rule="evenodd" fill="#fff"/></g></svg>',c=b;return function(){function b(){e.addClass("shown"),a.send(a.types.UI,"repositionSeekbar")}function d(){a.send(a.types.UI,"toggleCC",!e.hasClass("enabled"))}var e;return{getTemplate:function(){return c},init:function(c){e=c,e.on("click",d),a.on(a.types.EVENT,"cc",b),a.on(a.types.EVENT,"contentUpdate",function(){e.removeClass("shown")}),a.on(a.types.UI,"toggleCC",function(a){e.toggleClass("enabled",a)})}}}}),m(n[178],[n[19]],function(b){var c="<img/>",d=!1,e={};return function(){function f(a){var b;for(d=!1,e={},b=0;b<a.length;++b)if(d=d||!!a[b].secureUrl){e=a[b];break}g()}function g(){h.toggleClass("shown",d),h.find("img").attr("src",e.secureUrl)}var h;return{init:function(i){h=i,h.html(c),h.find("img").on("click",function(){e.clickUrl&&a.open(e.clickUrl)}),b.on(b.types.EVENT,"logo",f),b.on(b.types.EVENT,"contentUpdate",function(){d=!1,g()})}}}}),m(n[179],[n[19],n[82]],function(a,b){var c="";return function(){function b(){j=j+1<i?j+1:0,h.find('[data-index="'+j+'"]').addClass("active").siblings().removeClass("active"),k=e(b,l),a.send(a.types.EVENT,"currentOffairSlide",{itemType:"image"})}function d(a){if(g(),a.length){for(var c=0;c<a.length;c++){var d=$("<div>");d.attr("data-index",c).css({backgroundImage:"url("+a[c]+")"}),h.append(d)}h.addClass("shown"),i=a.length,j=-1,b()}}function g(){f(k),h.removeClass("shown"),h.empty()}var h,i,j,k,l=5e3;return{getTemplate:function(){return c},init:function(b){h=b,a.on(a.types.EVENT,"createSlideShow",d),a.on(a.types.EVENT,"destroySlideShow",g)}}}}),m(n[180],[n[19]],function(b){return function(){var c,d,g,h;return{getTemplate:function(){return'<div class="playAnim icon"></div><div class="pauseAnim icon"></div>'},init:function(i){c=i,a.notifier=b,b.on(b.types.UI,"showStatusAnimation",function(a){h!==a&&(g&&(g.removeClass("shown active"),g=void 0),f(d),g=c.find("."+a+"Anim"),c.addClass("shown"),g.addClass("active"),d=e(function(){g.addClass("shown"),d=e(function(){c.removeClass("shown"),g.removeClass("shown active"),g=void 0,d=0,h=void 0},450)},10),h=a)})}}}}),m(n[181],[n[26],n[7],n[48],n[19],n[82]],function(a,b,c,d,e){var f='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="xMidYMid" width="24" height="24" viewBox="0 0 24 24"><g><path class="enabled" d="M20.006,18.000 C20.006,18.000 4.006,18.000 4.006,18.000 C3.454,18.000 3.006,17.552 3.006,17.000 C3.006,17.000 3.006,7.000 3.006,7.000 C3.006,6.448 3.454,6.000 4.006,6.000 C4.006,6.000 20.006,6.000 20.006,6.000 C20.558,6.000 21.006,6.448 21.006,7.000 C21.006,7.000 21.006,17.000 21.006,17.000 C21.006,17.552 20.558,18.000 20.006,18.000 ZM19.006,8.000 C19.006,8.000 5.006,8.000 5.006,8.000 C5.006,8.000 5.006,16.000 5.006,16.000 C5.006,16.000 19.006,16.000 19.006,16.000 C19.006,16.000 19.006,8.000 19.006,8.000 ZM11.500,11.000 C11.500,11.000 14.002,11.000 14.002,11.000 C14.002,11.000 14.003,10.128 14.003,10.128 C14.003,9.717 14.224,9.556 14.494,9.770 C14.494,9.770 16.794,11.595 16.794,11.595 C17.064,11.809 17.065,12.161 16.796,12.378 C16.796,12.378 14.488,14.241 14.488,14.241 C14.220,14.457 14.000,14.298 14.000,13.887 C14.000,13.887 14.001,13.000 14.001,13.000 C14.001,13.000 11.500,13.000 11.500,13.000 C11.224,13.000 11.000,12.776 11.000,12.500 C11.000,12.500 11.000,11.500 11.000,11.500 C11.000,11.224 11.224,11.000 11.500,11.000 Z" fill="#fff" fill-rule="evenodd"/><path class="disabled" d="M19.994,18.000 C19.994,18.000 3.994,18.000 3.994,18.000 C3.442,18.000 2.994,17.552 2.994,17.000 C2.994,17.000 2.994,7.000 2.994,7.000 C2.994,6.448 3.442,6.000 3.994,6.000 C3.994,6.000 19.994,6.000 19.994,6.000 C20.546,6.000 20.994,6.448 20.994,7.000 C20.994,7.000 20.994,17.000 20.994,17.000 C20.994,17.552 20.546,18.000 19.994,18.000 ZM18.994,8.000 C18.994,8.000 4.994,8.000 4.994,8.000 C4.994,8.000 4.994,16.000 4.994,16.000 C4.994,16.000 18.994,16.000 18.994,16.000 C18.994,16.000 18.994,8.000 18.994,8.000 ZM13.512,9.759 C13.780,9.543 14.000,9.702 14.000,10.113 C14.000,10.113 13.999,11.000 13.999,11.000 C13.999,11.000 16.500,11.000 16.500,11.000 C16.776,11.000 17.000,11.224 17.000,11.500 C17.000,11.500 17.000,12.500 17.000,12.500 C17.000,12.776 16.776,13.000 16.500,13.000 C16.500,13.000 13.998,13.000 13.998,13.000 C13.998,13.000 13.997,13.872 13.997,13.872 C13.997,14.283 13.776,14.444 13.506,14.230 C13.506,14.230 11.206,12.405 11.206,12.405 C10.936,12.191 10.935,11.839 11.204,11.622 C11.204,11.622 13.512,9.759 13.512,9.759 Z" fill="#fff" fill-rule="evenodd"/></g></svg>';return function(){function b(){k.toggleClass("opened"),d.send(d.types.EVENT,"theaterMode","")}function g(a){"theater"===a?(k.attr("title",m),k.addClass("opened")):(k.attr("title",l),k.removeClass("opened"))}function h(b){b?k.removeClass("shown"):a.sitemode&&k.addClass("shown")}function i(){k.addClass("shown"),d.send(d.types.UI,"repositionSeekbar")}function j(){k.removeClass("shown"),d.send(d.types.UI,"repositionSeekbar")}var k,l=c.getText("ui.theaterMode"),m=c.getText("ui.defaultView");return{getTemplate:function(){return f},init:function(c){k=c,a.sitemode&&!e.getBody().closest(".ve-container").hasClass("no-socialstream")?k.addClass("shown"):k.removeClass("shown"),a.viewingexperience&&($.capture(ustream.events.HIDETHEATERBUTTON,j),$.capture(ustream.events.SHOWTHEATERBUTTON,i)),k.attr("title",l),d.send(d.types.UI,"repositionSeekbar"),d.on(d.types.UI,"viewMode",g),d.on(d.types.UI,"fullscreenChange",h),k.on("click",b)}}}}),m(n[182],[n[26],n[17],n[19],n[8]],function(a,b,c,d){var e="";return function(){function f(){h.addClass("shown")}function g(){h.removeClass("shown")}var h;return{getTemplate:function(){return e},init:function(e){h=e,a.autoplay||a.sitemode||!d.desktop||f(),c.on(c.types.EVENT,"playing",function(){g()}),c.on(c.types.EVENT,"createSlideShow",function(){"image"===b.offairType()&&g()}),c.on(c.types.EVENT,"thumbnail",function(a){var c,e,f,g=["liveThumbnail","thumbnail","channelPicture"];if(a){for(e=0;e<g.length;++e)if(c=g[e]+(d.ssl?"SecureUrl":"Url"),a[c]){f=a[c].split("#SIZE#").join("640x360");break}!f||b.isCid()&&!b.live()&&c.indexOf("channelPicture")!==-1||h.css("background-image","url("+f+")")}})}}}}),m(n[183],[n[26],n[19]],function(a,b){var c='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="xMidYMid" width="24" height="24" viewBox="0 0 24 24"><g id="popout"><path d="M20.707,14.739 C20.512,14.934 20.276,15.032 20.000,15.032 C20.000,15.032 16.000,15.032 16.000,15.032 C16.000,15.032 16.000,18.001 16.000,18.001 C16.000,18.277 15.902,18.513 15.707,18.708 C15.512,18.903 15.276,19.001 15.000,19.001 C15.000,19.001 4.000,19.001 4.000,19.001 C3.448,19.001 3.000,18.553 3.000,18.001 C3.000,18.001 3.000,10.969 3.000,10.969 C3.000,10.693 3.098,10.457 3.293,10.262 C3.488,10.067 3.724,9.969 4.000,9.969 C4.000,9.969 8.000,9.969 8.000,9.969 C8.000,9.969 8.000,7.000 8.000,7.000 C8.000,6.448 8.448,6.000 9.000,6.000 C9.000,6.000 20.000,6.000 20.000,6.000 C20.276,6.000 20.512,6.098 20.707,6.293 C20.902,6.488 21.000,6.724 21.000,7.000 C21.000,7.000 21.000,14.032 21.000,14.032 C21.000,14.308 20.902,14.544 20.707,14.739 ZM8.000,14.032 C8.000,14.032 8.000,11.970 8.000,11.970 C8.000,11.970 8.000,11.970 8.000,11.970 C8.000,11.970 8.000,10.000 8.000,10.000 C8.000,10.000 7.000,10.000 7.000,10.000 C7.000,10.000 7.000,11.970 7.000,11.970 C7.000,11.970 5.000,11.970 5.000,11.970 C5.000,11.970 5.000,17.001 5.000,17.001 C5.000,17.001 14.000,17.001 14.000,17.001 C14.000,17.001 14.000,16.000 14.000,16.000 C14.000,16.000 16.000,16.000 16.000,16.000 C16.000,16.000 16.000,15.000 16.000,15.000 C16.000,15.000 14.000,15.000 14.000,15.000 C14.000,15.000 14.000,15.032 14.000,15.032 C14.000,15.032 9.000,15.032 9.000,15.032 C8.448,15.032 8.000,14.584 8.000,14.032 ZM19.000,8.001 C19.000,8.001 10.000,8.001 10.000,8.001 C10.000,8.001 10.000,13.032 10.000,13.032 C10.000,13.032 19.000,13.032 19.000,13.032 C19.000,13.032 19.000,8.001 19.000,8.001 Z" fill="#fff" fill-rule="evenodd"/></g></svg>';return function(){function d(){b.send(b.types.EVENT,"popoutClick")}function e(a){f.toggleClass("shown","discovery"!==a&&"explore"!==a),b.send(b.types.UI,"repositionSeekbar")}var f;return{getTemplate:function(){return c},init:function(c){f=c,!a.popout&&a.sitemode&&f.addClass("shown"),f.on("click",d),b.on(b.types.UI,"viewMode",e)}}}}),m(n[184],[n[17],n[48],n[7],n[19]],function(a,b,c,d){var e='<div class="premiumTitle">'+b.getText("ui.premiumPromoTitle")+'</div><div class="callToAction"><a href="%link%" target="_blank">'+b.getText("ui.premiumPromoText")+"</a></div>";return function(){function b(a){a&&f()}function f(){var b,d=ustream.vars.premiumMembershipUrl+"#itm_campaign=premium_membership&itm_source=viewing_experience&itm_content=watch-without-ads&itm_medium="+(a.isPrerollDone()?"midroll":"preroll");b=c(e,"%link%",d),g.html(b)}var g;return{init:function(a){g=a,d.on(d.types.EVENT,"videoAdPlaying",b)},getTemplate:function(){return e}}}}),m(n[185],[n[26],n[87],n[48],n[19],n[175],n[78],n[17]],function(b,c,d,f,g,h,i){function j(){r=g({id:"FlagOverlay",template:v}),s=r.find("select"),t=r.find(".bttn"),t.on("click",n),s.on("change",k),r.on("click",".cancel",l)}function k(a){$(a.target).val()?t.removeClass("disabled"):t.addClass("disabled")}function l(){r.trigger("hide")}function m(a){f.send(f.types.UI,"show"),e(function(){r.trigger("hide"),f.send(f.types.UI,"showMessage",a)},0)}function n(){ustream.vars.loggedInUserId||($.dispatch(ustream.events.REQUIRELOGIN),$.capture(ustream.events.LOGINSUCCESS,o)),o()}function o(){var b=h(),c=a.setTimeout(b.ontimeout,5e3),e="recorded"===i.getType()?"video":i.getType();b.ontimeout=function(){a.clearTimeout(c)},b.onreadystatechange=function(){if(4===this.readyState){if(a.clearTimeout(c),200===this.status){var b=JSON.parse(this.responseText);m(b.success?d.getText("ui.flag.success"):b.error&&b.error.message)}else m("Something went wrong!");t.removeClass("disabled")}},t.addClass("disabled"),b.open("POST",ustream.vars.flagUrl,!0),b.setRequestHeader("Content-type","application/x-www-form-urlencoded"),b.withCredentials=!0,b.send("targetId="+i.id()+"&targetType="+e+"&reason="+s.val()+"&userId="+ustream.vars.loggedInUserId)}function p(){var a="",b=ustream.vars.flagReasons;a+='<option value="" selected="selected">'+d.getText("ui.flag.defaultReason")+"</option>";for(var c in b)a+='<option value="'+b[c].id+'">'+b[c].reason_default+"</option>";s.html(a)}function q(){r.trigger("show")}var r,s,t,u='<svg id="flag" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path id="flag" fill="#fff" d="M266,564.087c4.851-.824,6.294,2.669,10.011.75,0,0.021-.019,6.732-0.019,6.732-3.829,2.082-4.089-1.217-9.969-.711C265.955,570.879,266,564.087,266,564.087Zm-2.09-.246a1.062,1.062,0,0,1,1.084.786L264.97,575.3a1.1,1.1,0,0,1-1.065.853,0.914,0.914,0,0,1-.9-0.848L263,564.632A0.885,0.885,0,0,1,263.907,563.841Z" transform="translate(-257 -558)"/></svg>',v="<h3>"+d.getText("ui.flag.title")+"</h3><p>"+d.getText("ui.flag.text")+'</p><div><select name="reason" id="VideoFlagReason" class="required"></select></div><a class="bttn disabled">'+d.getText("ui.flag.button")+'</a><span class="cancel">'+d.getText("ui.flag.cancel")+"</span>";return function(){var a;return{getTemplate:function(){return u},init:function(c){a=c,b.viewingexperience&&(j(),p(),a.on("click",q),f.on(f.types.EVENT,"contentUpdate",function(){l()}))}}}}),m(n[186],[n[155],n[17],n[7],n[12],n[19],n[26],n[133]],function(a,b,c,d,e,f,g){var h,i,j=[{label:"Media Attributes",content:""},{label:"Media ID",content:"%mediaid%"},{label:"Stream URL",content:"%streamurl%"},{label:"Stream type",content:"%streamtype%"},{label:"Video codec",content:"%videocodec%"},{label:"Audio codec",content:"%audiocodec%"},{label:"Video resolution",content:"%videoresolution%"},{label:"Logic Connection",content:""},{label:"Connection Information",content:"protocol: %umsprotocol%, host: %umshost%"},{label:"Rendering",content:""},{label:"Player size",content:"%playersize%"},{label:"Versions",content:""},{label:"Atlas version",content:"%atlasversion%"},{label:"UMS version",content:"%umsversion%"},{label:"ECDN",content:""},{label:"",content:"%ecdn%"}];return function(){function k(){var a="";return a+='<div class="background"></div><div class="container">',d(j,function(b){a+=b.content&&""!==b.content?b.label?'<div class="info tabbed">'+b.label+": "+b.content+"</div>":'<div class="info tabbed">'+b.content+"</div>":'<div class="info statTitle">'+b.label+"</div>"}),a+="</div>"}function l(){var a,b;a=k();for(var d in i)b=i[d],b&&(a=c(a,"%"+d+"%",b));h.html(a)}function m(a){83===a.keyCode&&a.ctrlKey&&n()}function n(){h.hasClass("shown")?h.removeClass("shown"):h.addClass("shown")}function o(){i.mediaid=b.id(),l()}function p(a){i.streamtype=a.format+" "+(b.isVid()?"vod":"live"),i.videoresolution=a.width+"x"+a.height,i.videocodec=a.videoCodec,i.audiocodec=a.audioCodec,i.streamurl=a.url,l()}function q(){i.playersize=a.getPlayerWidth()+"x"+a.getPlayerHeight(),l()}function r(a){i.umsversion=a.version,i.umsprotocol=a.connection.protocol,i.umshost=a.connection.host}function s(a){i.ecdn="",a.forEach(function(a,b){i.ecdn+='<span class="sublabel">url:</span> '+a.url+'<span class="sublabel"> time:</span> '+a.time+"<br/>"}),l()}return{getTemplate:k,init:function(a){f.htmlplayback&&(h=a,i={},i.atlasversion=g.version,q(),o(),e.on(e.types.UI,"keyDown",m),e.on(e.types.EVENT,"ecdnResult",s),e.on(e.types.EVENT,"contentUpdate",o),e.on(e.types.EVENT,"streamInfoUpdate",p),e.on(e.types.EVENT,"resize",q),e.on(e.types.EVENT,"umsInfo",r),e.on(e.types.EVENT,"showInfo",n))}}}}),m(n[187],[n[19]],function(a){return function(){function b(){d.addClass("shown")}function c(){d.removeClass("shown")}var d,e='<div class="icon"><svg xmlns="http://www.w3.org/2000/svg" width="38" height="42" viewBox="0 0 38 42"><path fill="#707070" d="M64.885,58a4.55,4.55,0,0,1,.122,1.012c0,3.032-2.913,5.706-6.507,5.971S51.993,63,51.993,59.969,54.906,54.263,58.5,54a7.031,7.031,0,0,1,3.494.614l0-18.183L39.99,39.573V62H39.869a4.554,4.554,0,0,1,.122,1.012c0,3.032-2.908,5.7-6.5,5.969S27,67.007,27,63.975s2.908-5.7,6.5-5.97a7,7,0,0,1,3.506.62V40h0V31l28-4v1l0.008,30H64.885Z" transform="translate(-27 -27)"/></svg><span>Audio only</span></div>';return{getTemplate:function(){return e},init:function(e){d=e,a.on(a.types.UI,"audioOnly",function(a){a?b():c()})}}}}),m(n[188],[n[13],n[29],n[64],n[8],n[7],n[18],n[23],n[22],n[26],n[17],n[28],n[111],n[110],n[76],n[79],n[82],n[93],n[19],n[12],n[75],n[48],n[148]],function(b,c,d,h,k,l,m,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C){function D(a){o.set($a,a.longpoll?"1":"0",{expires:30})}function E(a){function c(b){var c,d,e,f,g,h,i=["reject","ipLock","geoLock","hashLock","passwordLock","referrerLock","sessionAuthLock","viewerHourLimitLock","nonexistent"],j=!1;for(Na("reject received"),c=0;c<b.length;++c){for(f=b[c],g="default",f.embedLimitExceeded&&j||(y.send(y.types.EVENT,"mediaReject",!0),j=!0),d=0;d<i.length;++d)if(e=i[d],f[e]){g=e.toLowerCase(),h=f[e];break}y.send(y.types.SCREEN,g,h)}b.length&&ca(a)}function d(a){a.stream&&a.stream.hasOwnProperty("providers")&&a.stream.providers.length&&a.ageLock&&y.send(y.types.SCREEN,"agelock",a.ageLock),delete a.ageLock}function e(a){a.meta&&(y.send(y.types.EVENT,"meta",a.meta),a.meta.title&&y.send(y.types.EVENT,"title",a.meta.title))}function f(a){a.thumbnail&&(y.send(y.types.EVENT,"thumbnail",a.thumbnail),delete a.thumbnail)}function g(a){a.logo&&(y.send(y.types.EVENT,"logo",a.logo),delete a.logo)}function h(a){a.meta&&a.meta.offairContent&&a.meta.offairContent.pictures&&!a.meta.offairContent.videos&&(Ea={pictures:a.meta.offairContent.pictures.concat()},delete a.meta.offairContent)}function i(a){var b,c,d,e,f=["broadcaster","meta",n[159]];for(d=0;d<f.length;++d)b=f[d],a.hasOwnProperty(b)&&(c=a[b],e=!0,p.setByContent(b,c));e&&S()}function j(b,c,j){var k=[d,e,f,g,h,i];delete c.id,k.forEach(function(a){a(c)}),a.registered?ya.callMethod(a.name,"moduleInfo",c):a.queue.push(c),j&&ya.callMethod("logic.media.modules.stream","switchProvider",j)}function k(b){Na("update received"),C.onComplete=j,C.update(a.mid,b[0]||b)}function l(b){for(var c=0;c<b.length;++c)ya.callMethod(a.name,"dataUploadResponse",b[c])}function m(a){b(a.slice(1))}var s;Na("create connection",a),q.getType()===Ia&&a.mid.split(".")[0]===Ja&&(a.connectParams.isOffairRecorded=!0),s=A({app:a.app,id:a.id,hid:a.hid,sessionId:Fa.sessionId,hash:p.getByContent("hash"),password:p.getByContent("channelPassword"),referrer:r,connectParams:a.connectParams,flotAddress:!!p.flot&&decodeURI(p.flot),umsDebugMode:p.umsDebugMode,bdtools:p.bdtools,longpoll:"1"===o.get($a)}),s.on(s.event.OPEN,D),s.on(s.event.REJECT,c),s.on(s.event.UPDATE,k),s.on(s.event.DU_RESPONSE,l),s.on(s.event.LOG,m),s.connect(),a.umsInstance=s}function F(a,b){var c,d;return Ya.hasOwnProperty(a)||(d=a.split("_"),b=l(Za,b),c={name:a,app:d[1],id:d[2],hid:d[3],mid:d.slice(1).join("."),umsInstance:null,connectParams:b,queue:[],registered:!1},Ya[a]=c),Ya[a]}function G(){var a,b;return a=["ums",q.app()].concat(q.ids()).join("_"),b=F(a)}function H(){ustream||(a.ustream={}),ustream.flash||(a.ustream.flash={}),Pa=a.ustream.flash.chromelessViewer={}}function I(){var a,b,d=Wa,e=V(),f=Y();b=s("opaque"),d=k(d,/%wmode%/g,b),d=k(d,/%swfUrl%/g,e),d=k(d,/%flashId%/g,Qa),d=k(d,/%flashName%/g,Sa),d=k(d,/%flashVars%/g,f),Ma("swf html",d),H(),ya=Pa[Sa]=t(),Xa.innerHTML=d,za=ya.ready,ya.ready=J,a=c(Qa),h.safari&&y.on(y.types.EVENT,"flashCallError",function(){y.send(y.types.UI,"hide")}),ya.init(a),a.tabIndex===-1&&y.send(y.types.UI,"hide")}function J(){za(),y.send(y.types.UI,"show"),ya.callMethod("tv.ustream.localization::Locale","init","flash.viewer",p.locale),N(),p.seamless&&ya.set("logic","seamlessSwitch",!0),
p.adFree?Z(Fa.sessionId,p.adFree):Z(Fa.sessionId),ua(q.getType(),q.id(),K())}function K(){return!(!p.autoplay&&fb)}function L(){var a,b,c=["adFree","campaignId","highlightId","user","pass","userId","scid","sessionSource","embedredirection"],d=p.getByContent("hash"),e={},f=!!h.chrome;for(e.enableStageVideo=!("facebook"===p.campaign&&h.flashActiveX),e.enableStageVideo=!f||h.flashPPAPI&&f,e.user=Fa.userName,a=0;a<c.length;a++)b=c[a],void 0!==p[b]?e[b]=p[b]:p.getByContent(b)&&(e[b]=p.getByContent(b));return d&&(e.hash=d),e}function M(a,b,c){var d=a.replace(".","_")+"_"+b;ya[d]=c,ya.addListener(a,b,d)}function N(){var a=q.getType();M("ums","registerExternal",ba),M("ums","unregisterExternal",ca),M(Ia,"online",m(fa,null,!0)),M(Ia,"offline",m(fa,null,!1)),M(Ia,"destroy",ja),M(Ja,"finish",m(y.send,null,y.types.EVENT,"finished",!0)),M(Ja,"meta",na),M(Ia,"bufferEmpty",m(ga,null,!0)),M(Ia,"bufferFull",m(ga,null,!1)),M(Ja,"bufferEmpty",m(ga,null,!0)),M(Ja,"bufferFull",m(ga,null,!1)),M(Ja,"hasHighlight",function(a){y.send(y.types.EVENT,"highlight",a)}),M(Ia,"play",pa),M(Ja,"play",pa),M(Ia,"pause",qa),M(Ja,"pause",qa),M(a,"syncMeta",ka),M("viewermodulemanager","createQos",function(){M("qos","adaptiveAvailability",ha),M("qos","streamIndexChange",ha),M("qos","streamVersionsChange",ha)}),M("viewermodulemanager","createShare",function(){M("share","update",ma)}),M("viewermodulemanager","createViewers",function(){M("viewers","update",function(){y.send(y.types.EVENT,"viewerCount",{current:ya.get(cb+".modules","viewers").viewerCount,all:ya.get(db+".modules","allTimeTotal").viewerCount})})}),M("viewermodulemanager","createClosedCaption",function(){y.send(y.types.EVENT,"cc");var a,b=[6540154,10414700],c=ya.get("logic.media.modules","meta");b.indexOf(q.id())===-1&&(a={playerVersion:4,contentType:q.getType(),mediaId:q.id()},c&&c.data&&(a.userName=c.data.userName),mixpanel&&(mixpanel.track("ClosedCaption",a),Ma("mixpanel",a)))}),M("thumbnail","complete",function(){K()&&sa()}),M("thumbnail","destroy",function(){K()&&!ya.get(bb,"playing")&&sa()}),M("meta","update",ia),M("recorded","moduleInfo",la),M(bb,"createChannel",m(oa,null,"channel")),M(bb,"createRecorded",m(oa,null,"recorded")),M(bb,"createSlideShow",W),M(bb,"mouseClick",R),M(bb,"mouseMove",function(a){y.send(y.types.UI,"mouseMove",a)}),M(bb,"mouseStop",function(a){y.send(y.types.UI,"mouseStop",a)}),h.chrome&&M(bb,"throttle",function(a){"throttle"!==a||Ca?"resume"===a&&y.send(y.types.UI,"chromeThrottle",!1):(Ca=!0,y.send(y.types.UI,"chromeThrottle",!0))}),M("keyboard","keyDown",function(a){h.ie&&y.send(y.types.UI,"keyDown",a)}),M("ads","adsVideoAdStarted",function(){y.send(y.types.EVENT,"videoAdPlaying",!0),y.send(y.types.UI,"hide")}),M("ads","adsVideoAdFinished",function(){y.send(y.types.EVENT,"videoAdPlaying",!1),y.send(y.types.UI,"show")}),M(bb,"next",function(a){y.send(y.types.EVENT,"currentOffairSlide",a)}),M(Ia,"adsPrerollDone",O),M(Ja,"adsPrerollDone",O),M(Ja,"logSendingStarted",P),M(Ia,"logSendingStarted",P),M(Ja,"logSendingComplete",Q),M(Ia,"logSendingComplete",Q),M("stream","providerChange",C.onProviderChange),M("uhsplayback","failure",C.onProviderFailure),M("uumfuhsplayback","failure",C.onProviderFailure),M("uumfuhsplayback","SegmentedEvents.recoverableIOError",C.onProviderFailure)}function O(){y.send(y.types.EVENT,"prerollDone")}function P(){y.send(y.types.EVENT,"logSendingStarted")}function Q(a){y.send(y.types.EVENT,"logSendingComplete",a.hash)}function R(a){return Ba?(y.send(y.types.UI,"mouseDblClick",a),f(Ba),void(Ba=!1)):void(Ba=e(function(){y.send(y.types.UI,"mouseClick",a),Ba=!1},200))}function S(){return Aa=d(),!!Aa&&(y.send(y.types.SCREEN,"referrerlock",{redirectUrl:q.getUrl()}),!0)}function T(){var b,c;if(ab=!0,Ma("init"),!S())return c="1"===o.get("ustream-loggedin")&&a.location.href.indexOf("http:")!==-1&&void 0===Fa.sessionId,c||(b=G(),E(b)),I(),_a={instance:ya,on:ra,setSession:Z,get:ya.get,set:ya.set,pause:function(){ya.callMethod(cb,"pause")},stop:function(){ya.callMethod(cb,"pause"),ya.callMethod(cb,"seek",0)},play:function(){ya.callMethod(cb,"play")},load:ua,seek:function(a){var b,c=0,d=ya.get(cb,"duration");typeof a===Ga&&null!==a&&(a=a[0]),c=+a,b=c/d,ya.callMethod(cb,"seek",i.max(0,b))},volume:function(a){a=+a||0,a>100&&(a=100),a<0&&(a=0),a<1&&a>0||(a/=100),ya.set(bb,"volume",a)},quality:function(a){ya.set(cb+".modules.qos","desiredStreamIndex",a)},style:function(a){ya.setStyle(a)},setTitleVisibility:function(a){y.send(y.types.UI,"setTitleVisibility",a)},duration:function(){var a=ya.get(cb,"duration");return u.send({property:{duration:a}}),a},viewers:function(){u.send({property:{viewers:ya.get(cb+".modules.viewers","data")}})},allTimeTotalViewers:function(){u.send({property:{allTimeTotalViewers:ya.get(cb+".modules.allTimeTotal","data")}})},progress:function(){var a=ya.get(cb,"duration"),b=ya.get(cb,"progress");return u.send({property:{progress:a*b}}),b},adOffset:function(a){ya.set(cb,"adOffset",a)},setViewMode:function(a){ya.set("logic","viewMode",a),ya.set(n[159],"theaterMode","theater"===a),y.send(y.types.UI,"viewMode",a)},clearHash:function(){v.clear.apply(null,arguments),U()},cursor:function(a){ya.set("logic","cursor",a)}},u.on(u.event.COMMAND,function(a){var b;switch(Ma("api command ",a),_a[a.cmd]&&_a[a.cmd].apply(_a,a.args),a.cmd){case"content":u.send({property:{content:[q.app()].concat(q.ids())}});break;case"playingContent":q.getType()!==Ia||q.live()?b=[q.app()].concat(q.ids()):(b=ya.get(eb,"id"),b=b?[Ja,+b]:[]),u.send({property:{playingContent:b}});break;case"volume":y.send(y.types.COMMAND,"volume",a.args)}}),y.on(y.types.COMMAND,"*",function(a,b){_a[a]&&_a[a].apply(_a,b)}),y.on(y.types.EVENT,"overlayClick",function(a){R(a)}),y.on(y.types.UI,"toggleCC",function(a){ya.set(cb+".modules.closedCaption","enabled",a)}),_a}function U(){Ma("reinit"),fb=!0,ab||T(),w.screen.unset(),ua(q.getType(),q.id(),!0)}function V(){var a=Ra[h.ssl?"https":"http"];return p.flashdev&&(a="http://"+p.flashdev+"-branches-www.dev.ustream.tv/flash/viewer.qrsl.swf"),Ma("swfUrl",a),a}function W(){y.send(y.types.EVENT,"createSlideShow")}function X(a,b,c,d){return typeof d!==Ha&&d&&a.push(b+"="+c),a}function Y(){Ma(p.getByContent("hash")),Ma(typeof p.getByContent("hash")),Ma(p.getByContent("hashObj")),Ma(typeof p.getByContent("hashObj"));var a,b=[],c=p.getByContent("hash");if(b=Ta.concat([]),b=X(b,"controls",p.controls,!p.controls),b=X(b,"quality",p.quality,!!p.quality),b=X(b,"campaign",p.campaign,!!p.campaign),b=X(b,"brandid",p.brandid,!!p.brandid),b=X(b,"showtitle",p.showtitle,!p.showtitle),b=X(b,"hash",g(c),!!c),b=X(b,"lite","true",!!p.lite),b=X(b,"abs","1",p.abs),typeof p.volume!==Ha){var d=+p.volume;d>100?d=1:d<0?d=0:d/=100,b.push("volume="+d)}return b=X(b,"sessionid",Fa.sessionId,!!Fa.sessionId),b=X(b,"adfree","1",!!p.adFree),a=p.getByContent("channelPassword"),Fa.isVerizon&&a&&(b=X(b,"password",a,!!a)),b=X(b,"style",p.style,!!p.style),b.push("ts="+ +new j),q.isVid()?(b.push("vid="+q.id()),b.push("loc="+q.id()),b.push("hasticket=false")):b.push("cid="+q.id()),q.isHid()&&b.push("hid="+q.ids()[1]),Ma("flashvars ",b),b.join("&amp;")}function Z(a,b){var c;Ma("set session ",a,b),Fa.sessionId=a,ya.setSession(a),p.adFree=b,"undefined"!=typeof b&&ya.set("logic","adFree",b),c=G(),c.umsInstance||E(c)}function _(a){return 100*i.round(a.bitrate/100)+"kbps"}function aa(a){return 20*i.round(a.height/20)+"p"}function ba(a){var b;if("object"!=typeof a||!a.name)return void Na("malformed data during register");if(b=F(a.name,a.connectParams),b.registered=!0,Na("flash interface register",b),M(b.name,"call",m(da,null,b)),b.umsInstance||(Na("there is no ums connection during register, creating a new one"),E(b)),b.queue.length)for(Na("queue empty",b);b.queue.length;)ya.callMethod(a.name,"moduleInfo",b.queue.shift())}function ca(a){var b;return"object"==typeof a&&a.name?(Na("flash interface unregister",a.name),void(Ya.hasOwnProperty(a.name)&&(b=Ya[a.name].umsInstance,b&&b.destroy(),delete Ya[a.name]))):void Na("malformed data during unregister")}function da(a,b){a.umsInstance||E(a),Na("call from flash",{flashInterface:a,call:b}),ea(b),a.umsInstance.send.call(null,b.cmd,b.args)}function ea(a){var b,c,d,e;if("dataUpload"===a.cmd)for(b=0;b<a.args.length;++b)if(d=a.args[b],d.rawData&&d.rawData.length){for(e=[],c=0;c<d.rawData.length;++c)e.push(JSON.stringify(d.rawData[c]));d.rawData=e.join("\n")}}function fa(a){y.send(y.types.EVENT,"live",a),a?x.stopSlideShow():(y.send(y.types.EVENT,"viewerCount",{current:0,all:0}),y.send(y.types.UI,"loading",!1),x.startSlideShow(Ea.pictures))}function ga(a){y.send(y.types.EVENT,"buffering",a)}function ha(){var a,b=!1,c=ya.get(cb+".modules","qos");if(c.availableQualities.length>1){var d=$.unique(z(c.availableQualities,function(a){return a.height}));d.length!==c.availableQualities.length&&(b=!0),a=z(c.availableQualities,function(a,d){return{id:d,height:a.height,label:b?_(a):aa(a),active:c.currentStreamIndex===d,selected:c.desiredStreamIndex!==-1&&c.currentStreamIndex===d}}),a.push({id:-1,label:B.getText("ui.qualityAuto"),active:!1,selected:c.desiredStreamIndex===-1}),p.setByContent("qualities",a),y.send(y.types.EVENT,"quality",a)}}function ia(){var a=ya.get("logic.media.modules","meta"),b=ya.get(cb,"duration");y.send(y.types.EVENT,"duration",b),y.send(y.types.EVENT,"title",a.data.title)}function ja(){y.send(y.types.EVENT,"destroy",!0),ya.removeSession()}function ka(a){y.send(y.types.EVENT,"syncedmeta",a)}function la(a){}function ma(a){var b={},c=ya.get("logic.media.modules","meta");if(a||(a=ya.get("logic.media.modules.share","data")),a){for(var d=0;d<a.length;d++)b[a[d].name]=a[d];b.facebook&&(b.facebook.title=c.data?c.data.title:""),b.twitter&&(b.twitter.title=c.data?c.data.title:"",b.twitter.username=c.data?c.data.userName:""),y.send(y.types.EVENT,"share",b)}}function na(){y.send(y.types.EVENT,"metaready",!0)}function oa(a){var b;b="channel"===a?ya.get("logic.channel","id"):ya.get("logic.recorded","id"),y.send(y.types.EVENT,"content",[a,b]),y.send(y.types.UI,"show")}function pa(){xa(),y.send(y.types.EVENT,"playing",!0),v.report()}function qa(a){y.send(y.types.EVENT,"playing",!1)}function ra(a,b){Oa[a]||(Oa[a]=[]),Oa[a].push(b)}function sa(){ya.callMethod(cb,"play")}function ta(){var a=!1;return(!1===h.swf||h.swf[0]<10||10===h.swf[0]&&h.swf[1]<3)&&(y.send(y.types.SCREEN,"getflash"),a=!0),a}function ua(a,b,c,d){var e=c||K(),f=p.getByContent("channelPassword")?p.getByContent("channelPassword"):null,g="destroy",h="createRecorded",i="boolean"!=typeof arguments[2]&&arguments[2],j=G();a===Ka&&(a=Ja),(fb||q.getType()!==a||q.id()!==b||i&&(!i||i!==q.ids()[1]))&&(fb=!1,d=l(d,L()),a===Ia&&(q.isCid()||ya.callMethod(cb,g),ya.callMethod(bb,"createChannel",b,e,f,d||null)),a!==Ka&&a!==Ja||(q.isCid()&&ya.callMethod(db,g),ya.callMethod(bb,h,b,e,f,d||null),y.send(y.types.EVENT,"viewerCount",{current:0,all:0})),a===La&&(i="boolean"!=typeof arguments[2]?arguments[2]:q.ids()[1],i&&(q.isCid()&&ya.callMethod(db,g),ya.callMethod(bb,h,b,e,f,{highlightId:i}))),Ma("load",a,b,c,d),e&&y.send(y.types.UI,"loading",!0),(a!==q.getType()||b!==q.id()||"boolean"!=typeof i&&i!==q.ids()[1])&&(ca(j),q.update(a,i?[b,i]:[b]),x.stopSlideShow()))}function va(){var a=ya.get(cb,"progress");y.send(y.types.EVENT,"progress",i.max(0,a))}function wa(){clearInterval(Da)}function xa(){wa(),va(),Da=setInterval(va,400)}var ya,za,Aa,Ba,Ca,Da,Ea,Fa=ustream.vars,Ga="object",Ha="undefined",Ia="channel",Ja="recorded",Ka="video",La="highlight",Ma=b("viewer/qrslviewer"),Na=b("qrslviewer/ums"),Oa={},Pa={},Qa="utv"+q.id(),Ra={http:Fa.qosSwf,https:Fa.httpsQosSwf},Sa=Qa,Ta=["locale="+p.locale,"referrer="+g(r),"autoResize=false","enablejsapi=true","useexternal=true"],Ua=h.ie&&h.win&&!h.edgeIe,Va=!h.ie||h.edgeIe,Wa="<object "+(Va?'type="application/x-shockwave-flash" ':"")+(Ua?'classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"':"")+(Va?'data="%swfUrl%" ':"")+'width="100%" height="100%" id="%flashId%" name="%flashName%"><param name="flashvars" value="%flashVars%"/><param name="allowfullscreen" value="true"/><param name="allowscriptaccess" value="always"/><param name="bgcolor" value="000000"/><param name="wmode" value="%wmode%"/>'+(Ua?'<param name="movie" value="%swfUrl%">':"")+"</object>",Xa=c("EmbedViewer"),Ya={},Za={appId:2,appVersion:3,rawMode:!0},$a="mte_use_longpoll",_a={},ab=!1,bb="logic",cb=bb+".media",db=bb+"."+Ia,eb=bb+"."+Ja,fb=!0;if(!ta())return w.screen.on(w.screen.event.RETRY,U),Ma("construct"),v.check()||T(),function(){return _a}}),l([n[157]],function(a){a()})}(window,location,document,navigator,setTimeout,clearTimeout,encodeURIComponent,decodeURIComponent,Math,Date);
//# sourceMappingURL=mte.js.map
